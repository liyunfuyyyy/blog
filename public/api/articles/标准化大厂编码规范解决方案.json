{"title":"标准化大厂编码规范解决方案","uid":"7bb7fcd214fc2de4ef1142bae196581d","slug":"标准化大厂编码规范解决方案","date":"2022-02-10T08:33:17.000Z","updated":"2022-05-28T11:06:46.470Z","comments":true,"path":"api/articles/标准化大厂编码规范解决方案.json","keywords":null,"cover":[],"content":"<h2 id=\"升级最新的vue\"><a href=\"#升级最新的vue\" class=\"headerlink\" title=\"升级最新的vue\"></a>升级最新的vue</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npm i vue@<span class=\"token number\">3.2</span><span class=\"token number\">.8</span> vue<span class=\"token operator\">-</span>router@<span class=\"token number\">4.0</span><span class=\"token number\">.11</span> vuex@<span class=\"token number\">4.0</span><span class=\"token number\">.2</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"ESLint规则\"><a href=\"#ESLint规则\" class=\"headerlink\" title=\"ESLint规则\"></a>ESLint规则</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// ESLint 配置文件遵循 commonJS 的导出规则，所导出的对象就是 ESLint 的配置对象</span>\n<span class=\"token comment\">// 文档：https://eslint.bootcss.com/docs/user-guide/configuring</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 表示当前目录即为根目录，ESLint 规则将被限制到该目录下</span>\n  <span class=\"token literal-property property\">root</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// env 表示启用 ESLint 检测的环境</span>\n  <span class=\"token literal-property property\">env</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 在 node 环境下启动 ESLint 检测</span>\n    <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ESLint 中基础配置需要继承的配置</span>\n  <span class=\"token keyword\">extends</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"plugin:vue/vue3-essential\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"@vue/standard\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 解析器</span>\n  <span class=\"token literal-property property\">parserOptions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token literal-property property\">parser</span><span class=\"token operator\">:</span> <span class=\"token string\">\"babel-eslint\"</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 需要修改的启用规则及其各自的错误级别</span>\n  <span class=\"token comment\">/**\n   * 错误级别分为三种：\n   * \"off\" 或 0 - 关闭规则\n   * \"warn\" 或 1 - 开启规则，使用警告级别的错误：warn (不会导致程序退出)\n   * \"error\" 或 2 - 开启规则，使用错误级别的错误：error (当被触发的时候，程序会退出)\n   */</span>\n  <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string-property property\">\"no-console\"</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"production\"</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"warn\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"off\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"no-debugger\"</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"production\"</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"warn\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"off\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'space-before-function-paren'</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>  <span class=\"token comment\">//函数参数前括号没有空格</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Prettier配置\"><a href=\"#Prettier配置\" class=\"headerlink\" title=\"Prettier配置\"></a>Prettier配置</h2><p>.prettierrc</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 不尾随分号</span>\n  <span class=\"token string-property property\">\"semi\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 使用单引号</span>\n  <span class=\"token string-property property\">\"singleQuote\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 多行逗号分割的语法中，最后一行不加逗号</span>\n  <span class=\"token string-property property\">\"trailingComma\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"none\"</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"修改VSCode的TabSize\"><a href=\"#修改VSCode的TabSize\" class=\"headerlink\" title=\"修改VSCode的TabSize\"></a>修改VSCode的TabSize</h2><p><img src=\"https://raw.githubusercontent.com/liyunfuyyyy/img-url/master/image-20220210163700095.png\" alt=\"image-20220210163700095\"></p>\n<h2 id=\"配置大厂git提交规范\"><a href=\"#配置大厂git提交规范\" class=\"headerlink\" title=\"配置大厂git提交规范\"></a>配置大厂git提交规范</h2><h3 id=\"全局安装Commitizen\"><a href=\"#全局安装Commitizen\" class=\"headerlink\" title=\"全局安装Commitizen\"></a>全局安装Commitizen</h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npm install <span class=\"token operator\">-</span>g commitizen@<span class=\"token number\">4.2</span><span class=\"token number\">.4</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"安装并配置-cz-customizable-插件\"><a href=\"#安装并配置-cz-customizable-插件\" class=\"headerlink\" title=\"安装并配置 cz-customizable 插件\"></a>安装并配置 cz-customizable 插件</h3><h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npm i cz<span class=\"token operator\">-</span>customizable@<span class=\"token number\">6.3</span><span class=\"token number\">.0</span> <span class=\"token operator\">--</span>save<span class=\"token operator\">-</span>dev<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"添加以下配置到-package-json-中\"><a href=\"#添加以下配置到-package-json-中\" class=\"headerlink\" title=\"添加以下配置到 package.json 中\"></a>添加以下配置到 package.json 中</h4><pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token property\">\"config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">\"commitizen\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token property\">\"path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node_modules/cz-customizable\"</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"项目根目录下创建-cz-config-js-自定义提示文件\"><a href=\"#项目根目录下创建-cz-config-js-自定义提示文件\" class=\"headerlink\" title=\"项目根目录下创建 .cz-config.js 自定义提示文件\"></a>项目根目录下创建 .cz-config.js 自定义提示文件</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 可选类型</span>\n  <span class=\"token literal-property property\">types</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'feat'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'feat:     新功能'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'fix'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'fix:      修复'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'docs'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'docs:     文档变更'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'style'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'style:    代码格式(不影响代码运行的变动)'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'refactor'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'refactor: 重构(既不是增加feature，也不是修复bug)'</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'perf'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'perf:     性能优化'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'test'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'test:     增加测试'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'chore'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'chore:    构建过程或辅助工具的变动'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'revert'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'revert:   回退'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'build'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'build:    打包'</span> <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 消息步骤</span>\n  <span class=\"token literal-property property\">messages</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'请选择提交类型:'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">customScope</span><span class=\"token operator\">:</span> <span class=\"token string\">'请输入修改范围(可选):'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">subject</span><span class=\"token operator\">:</span> <span class=\"token string\">'请简要描述提交(必填):'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token string\">'请输入详细描述(可选):'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">footer</span><span class=\"token operator\">:</span> <span class=\"token string\">'请输入要关闭的issue(可选):'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">confirmCommit</span><span class=\"token operator\">:</span> <span class=\"token string\">'确认使用以上信息提交？(y/n/e/h)'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 跳过问题</span>\n  <span class=\"token literal-property property\">skipQuestions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'footer'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// subject文字长度默认是72</span>\n  <span class=\"token literal-property property\">subjectLimit</span><span class=\"token operator\">:</span> <span class=\"token number\">72</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"使用-git-cz-代替-git-commit\"><a href=\"#使用-git-cz-代替-git-commit\" class=\"headerlink\" title=\"使用 git cz 代替 git commit\"></a>使用 git cz 代替 git commit</h4><h2 id=\"使用-husky-commitlint-检查提交描述是否符合规范要求\"><a href=\"#使用-husky-commitlint-检查提交描述是否符合规范要求\" class=\"headerlink\" title=\"使用 husky + commitlint 检查提交描述是否符合规范要求\"></a>使用 husky + commitlint 检查提交描述是否符合规范要求</h2><h3 id=\"commitlint\"><a href=\"#commitlint\" class=\"headerlink\" title=\"commitlint\"></a>commitlint</h3><h4 id=\"安装依赖：\"><a href=\"#安装依赖：\" class=\"headerlink\" title=\"安装依赖：\"></a>安装依赖：</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npm install <span class=\"token operator\">--</span>save<span class=\"token operator\">-</span>dev @commitlint<span class=\"token operator\">/</span>config<span class=\"token operator\">-</span>conventional@<span class=\"token number\">12.1</span><span class=\"token number\">.4</span> @commitlint<span class=\"token operator\">/</span>cli@<span class=\"token number\">12.1</span><span class=\"token number\">.4</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"根目录下创建-commitlint-config-js-文件\"><a href=\"#根目录下创建-commitlint-config-js-文件\" class=\"headerlink\" title=\"根目录下创建 commitlint.config.js 文件\"></a>根目录下创建 commitlint.config.js 文件</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 继承的规则</span>\n  <span class=\"token keyword\">extends</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'@commitlint/config-conventional'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 定义规则类型</span>\n  <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// type 类型定义，表示 git 提交的 type 必须在以下类型范围内</span>\n    <span class=\"token string-property property\">'type-enum'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'always'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">'feat'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 新功能 feature</span>\n        <span class=\"token string\">'fix'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 修复 bug</span>\n        <span class=\"token string\">'docs'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 文档注释</span>\n        <span class=\"token string\">'style'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 代码格式(不影响代码运行的变动)</span>\n        <span class=\"token string\">'refactor'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 重构(既不增加新功能，也不是修复bug)</span>\n        <span class=\"token string\">'perf'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 性能优化</span>\n        <span class=\"token string\">'test'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 增加测试</span>\n        <span class=\"token string\">'chore'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 构建过程或辅助工具的变动</span>\n        <span class=\"token string\">'revert'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 回退</span>\n        <span class=\"token string\">'build'</span> <span class=\"token comment\">// 打包</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// subject 大小写不做校验</span>\n    <span class=\"token string-property property\">'subject-case'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>注意：确保保存为</strong> <strong>UTF-8</strong> <strong>的编码格式</strong>，否则可能会出现以下错误：</p>\n<p><img src=\"https://raw.githubusercontent.com/liyunfuyyyy/img-url/master/image-20220210163651616.png\" alt=\"image-20220210163651616\"></p>\n<h3 id=\"husky\"><a href=\"#husky\" class=\"headerlink\" title=\"husky\"></a>husky</h3><h4 id=\"安装依赖：-1\"><a href=\"#安装依赖：-1\" class=\"headerlink\" title=\"安装依赖：\"></a>安装依赖：</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npm install husky@<span class=\"token number\">7.0</span><span class=\"token number\">.1</span> <span class=\"token operator\">--</span>save<span class=\"token operator\">-</span>dev<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"启动-hooks-，-生成-husky-文件夹\"><a href=\"#启动-hooks-，-生成-husky-文件夹\" class=\"headerlink\" title=\"启动 hooks ， 生成 .husky 文件夹\"></a>启动 hooks ， 生成 .husky 文件夹</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npx husky install<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"在-package-json-中生成-prepare-指令\"><a href=\"#在-package-json-中生成-prepare-指令\" class=\"headerlink\" title=\"在 package.json 中生成 prepare 指令\"></a>在 package.json 中生成 prepare 指令</h4><p><img src=\"https://raw.githubusercontent.com/liyunfuyyyy/img-url/master/image-20220210163646656.png\" alt=\"image-20220210163646656\"></p>\n<h4 id=\"执行-prepare-指令\"><a href=\"#执行-prepare-指令\" class=\"headerlink\" title=\"执行 prepare 指令\"></a>执行 prepare 指令</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npm run prepare<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"执行成功，提示\"><a href=\"#执行成功，提示\" class=\"headerlink\" title=\"执行成功，提示\"></a>执行成功，提示</h4><p><img src=\"https://raw.githubusercontent.com/liyunfuyyyy/img-url/master/image-20220210163641446.png\" alt=\"image-20220210163641446\"></p>\n<h4 id=\"添加-commitlint-的-hook-到-husky中，并指令在-commit-msg-的-hooks-下执行-npx-–no-install-commitlint-–edit-“-1”-指令\"><a href=\"#添加-commitlint-的-hook-到-husky中，并指令在-commit-msg-的-hooks-下执行-npx-–no-install-commitlint-–edit-“-1”-指令\" class=\"headerlink\" title=\"添加 commitlint 的 hook 到 husky中，并指令在 commit-msg 的 hooks 下执行 npx –no-install commitlint –edit “$1” 指令\"></a>添加 commitlint 的 hook 到 husky中，并指令在 commit-msg 的 hooks 下执行 npx –no-install commitlint –edit “$1” 指令</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npx husky add <span class=\"token punctuation\">.</span>husky<span class=\"token operator\">/</span>commit<span class=\"token operator\">-</span>msg <span class=\"token string\">'npx --no-install commitlint --edit \"$1\"'</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"此时的-husky-的文件结构\"><a href=\"#此时的-husky-的文件结构\" class=\"headerlink\" title=\"此时的 .husky 的文件结构\"></a>此时的 .husky 的文件结构</h4><p><img src=\"https://raw.githubusercontent.com/liyunfuyyyy/img-url/master/image-20220210163635765.png\" alt=\"image-20220210163635765\"></p>\n<p>至此， 不符合规范的 commit 将不再可提交</p>\n<h2 id=\"通过-pre-commit-检测提交时代码规范\"><a href=\"#通过-pre-commit-检测提交时代码规范\" class=\"headerlink\" title=\"通过 pre-commit 检测提交时代码规范\"></a>通过 pre-commit 检测提交时代码规范</h2><p>我们期望通过 <strong>husky</strong> <strong>监测</strong> <strong>pre-commit</strong> <strong>钩子，在该钩子下执行</strong> <strong>npx eslint –ext .js,.vue src</strong> 指令来去进行相关检测：</p>\n<ol>\n<li> 执行 <code>npx husky add .husky/pre-commit &quot;npx eslint --ext .js,.vue src&quot;</code> 添加 <code>commit</code> 时的 <code>hook</code> （<code>npx eslint --ext .js,.vue src</code> 会在执行到该 hook 时运行） </li>\n<li> 该操作会生成对应文件 <code>pre-commit</code>： </li>\n</ol>\n<p><img src=\"https://raw.githubusercontent.com/liyunfuyyyy/img-url/master/image-20220210163622918.png\" alt=\"image-20220210163622918\"></p>\n<h2 id=\"lint-staged-自动修复格式错误\"><a href=\"#lint-staged-自动修复格式错误\" class=\"headerlink\" title=\"lint-staged 自动修复格式错误\"></a>lint-staged 自动修复格式错误</h2><h3 id=\"lint-staged-可以让你当前的代码检查-只检查本次修改更新的代码，并在出现错误的时候，自动修复并且推送\"><a href=\"#lint-staged-可以让你当前的代码检查-只检查本次修改更新的代码，并在出现错误的时候，自动修复并且推送\" class=\"headerlink\" title=\"lint-staged 可以让你当前的代码检查 只检查本次修改更新的代码，并在出现错误的时候，自动修复并且推送\"></a><a href=\"https://github.com/okonet/lint-staged\">lint-staged</a> 可以让你当前的代码检查 <strong>只检查本次修改更新的代码，并在出现错误的时候，自动修复并且推送</strong></h3><p><a href=\"https://github.com/okonet/lint-staged\">lint-staged</a> 无需单独安装，我们生成项目时，vue-cli 已经帮助我们安装过了，所以我们直接使用就可以了</p>\n<h3 id=\"修改-package-json-配置\"><a href=\"#修改-package-json-配置\" class=\"headerlink\" title=\"修改 package.json 配置\"></a>修改 package.json 配置</h3><pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token property\">\"lint-staged\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token property\">\"src/**/*.&#123;js,vue&#125;\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"eslint --fix\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"git add\"</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"修改-husky-pre-commit-文件\"><a href=\"#修改-husky-pre-commit-文件\" class=\"headerlink\" title=\"修改 .husky/pre-commit 文件\"></a>修改 .husky/pre-commit 文件</h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token hashbang comment\">#!/bin/sh</span>\n<span class=\"token punctuation\">.</span> <span class=\"token string\">\"$(dirname \"</span>$0<span class=\"token string\">\")/_/husky.sh\"</span>\n\nnpx lint<span class=\"token operator\">-</span>staged<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n","feature":true,"text":"升级最新的vuenpm i vue@3.2.8 vue-router@4.0.11 vuex@4.0.2 ESLint规则// ESLint 配置文件遵循 commonJS 的导出规则，所导出的对象就是 ESLint 的配置对象 // 文档：https://eslint.boot...","link":"","photos":[],"count_time":{"symbolsCount":"4.1k","symbolsTime":"4 mins."},"categories":[{"name":"规范","slug":"规范","count":1,"path":"api/categories/规范.json"}],"tags":[{"name":"git","slug":"git","count":2,"path":"api/tags/git.json"},{"name":"规范","slug":"规范","count":1,"path":"api/tags/规范.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8D%87%E7%BA%A7%E6%9C%80%E6%96%B0%E7%9A%84vue\"><span class=\"toc-text\">升级最新的vue</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ESLint%E8%A7%84%E5%88%99\"><span class=\"toc-text\">ESLint规则</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Prettier%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">Prettier配置</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9VSCode%E7%9A%84TabSize\"><span class=\"toc-text\">修改VSCode的TabSize</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E5%A4%A7%E5%8E%82git%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83\"><span class=\"toc-text\">配置大厂git提交规范</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85Commitizen\"><span class=\"toc-text\">全局安装Commitizen</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AE-cz-customizable-%E6%8F%92%E4%BB%B6\"><span class=\"toc-text\">安装并配置 cz-customizable 插件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">安装</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E9%85%8D%E7%BD%AE%E5%88%B0-package-json-%E4%B8%AD\"><span class=\"toc-text\">添加以下配置到 package.json 中</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%88%9B%E5%BB%BA-cz-config-js-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%90%E7%A4%BA%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">项目根目录下创建 .cz-config.js 自定义提示文件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8-git-cz-%E4%BB%A3%E6%9B%BF-git-commit\"><span class=\"toc-text\">使用 git cz 代替 git commit</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8-husky-commitlint-%E6%A3%80%E6%9F%A5%E6%8F%90%E4%BA%A4%E6%8F%8F%E8%BF%B0%E6%98%AF%E5%90%A6%E7%AC%A6%E5%90%88%E8%A7%84%E8%8C%83%E8%A6%81%E6%B1%82\"><span class=\"toc-text\">使用 husky + commitlint 检查提交描述是否符合规范要求</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#commitlint\"><span class=\"toc-text\">commitlint</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%EF%BC%9A\"><span class=\"toc-text\">安装依赖：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%88%9B%E5%BB%BA-commitlint-config-js-%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">根目录下创建 commitlint.config.js 文件</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#husky\"><span class=\"toc-text\">husky</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%EF%BC%9A-1\"><span class=\"toc-text\">安装依赖：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8-hooks-%EF%BC%8C-%E7%94%9F%E6%88%90-husky-%E6%96%87%E4%BB%B6%E5%A4%B9\"><span class=\"toc-text\">启动 hooks ， 生成 .husky 文件夹</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%9C%A8-package-json-%E4%B8%AD%E7%94%9F%E6%88%90-prepare-%E6%8C%87%E4%BB%A4\"><span class=\"toc-text\">在 package.json 中生成 prepare 指令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%89%A7%E8%A1%8C-prepare-%E6%8C%87%E4%BB%A4\"><span class=\"toc-text\">执行 prepare 指令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%89%A7%E8%A1%8C%E6%88%90%E5%8A%9F%EF%BC%8C%E6%8F%90%E7%A4%BA\"><span class=\"toc-text\">执行成功，提示</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0-commitlint-%E7%9A%84-hook-%E5%88%B0-husky%E4%B8%AD%EF%BC%8C%E5%B9%B6%E6%8C%87%E4%BB%A4%E5%9C%A8-commit-msg-%E7%9A%84-hooks-%E4%B8%8B%E6%89%A7%E8%A1%8C-npx-%E2%80%93no-install-commitlint-%E2%80%93edit-%E2%80%9C-1%E2%80%9D-%E6%8C%87%E4%BB%A4\"><span class=\"toc-text\">添加 commitlint 的 hook 到 husky中，并指令在 commit-msg 的 hooks 下执行 npx –no-install commitlint –edit “$1” 指令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%AD%A4%E6%97%B6%E7%9A%84-husky-%E7%9A%84%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84\"><span class=\"toc-text\">此时的 .husky 的文件结构</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%80%9A%E8%BF%87-pre-commit-%E6%A3%80%E6%B5%8B%E6%8F%90%E4%BA%A4%E6%97%B6%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83\"><span class=\"toc-text\">通过 pre-commit 检测提交时代码规范</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#lint-staged-%E8%87%AA%E5%8A%A8%E4%BF%AE%E5%A4%8D%E6%A0%BC%E5%BC%8F%E9%94%99%E8%AF%AF\"><span class=\"toc-text\">lint-staged 自动修复格式错误</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#lint-staged-%E5%8F%AF%E4%BB%A5%E8%AE%A9%E4%BD%A0%E5%BD%93%E5%89%8D%E7%9A%84%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5-%E5%8F%AA%E6%A3%80%E6%9F%A5%E6%9C%AC%E6%AC%A1%E4%BF%AE%E6%94%B9%E6%9B%B4%E6%96%B0%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%B9%B6%E5%9C%A8%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E8%87%AA%E5%8A%A8%E4%BF%AE%E5%A4%8D%E5%B9%B6%E4%B8%94%E6%8E%A8%E9%80%81\"><span class=\"toc-text\">lint-staged 可以让你当前的代码检查 只检查本次修改更新的代码，并在出现错误的时候，自动修复并且推送</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9-package-json-%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">修改 package.json 配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9-husky-pre-commit-%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">修改 .husky&#x2F;pre-commit 文件</span></a></li></ol></li></ol>","author":{"name":"LIYUNFU","slug":"blog-author","avatar":"https://p26-passport.byteacctimg.com/img/user-avatar/c52fbf24fbba8a052c8dd93e8b978eac~300x300.image","link":"/","description":"一个正在重塑知识的切图仔 <br /> @ <b>公众号:伯nulee</b>","socials":{"github":"https://gitee.com/LUNIONT","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/2277843824292183","customs":{}}},"mapped":true,"prev_post":{"title":"基于koa-generator搭建通用服务端","uid":"52748ea8c7aacb653b9bc3a082a7560f","slug":"基于koa-generator搭建通用服务端","date":"2022-03-05T02:51:22.000Z","updated":"2022-03-06T04:20:00.000Z","comments":true,"path":"api/articles/基于koa-generator搭建通用服务端.json","keywords":null,"cover":null,"text":"安装koa-generator全局安装koa-generatornpm i koa-generator -g 初始化项目koa2 goudong-server 进入并安装依赖cd goudong-server npm install 改造项目环境 在根目录下新建src目录 将pu...","link":"","photos":[],"count_time":{"symbolsCount":"16k","symbolsTime":"14 mins."},"categories":[{"name":"实战","slug":"实战","count":5,"path":"api/categories/实战.json"}],"tags":[{"name":"实战","slug":"实战","count":3,"path":"api/tags/实战.json"},{"name":"koa","slug":"koa","count":1,"path":"api/tags/koa.json"}],"author":{"name":"LIYUNFU","slug":"blog-author","avatar":"https://p26-passport.byteacctimg.com/img/user-avatar/c52fbf24fbba8a052c8dd93e8b978eac~300x300.image","link":"/","description":"一个正在重塑知识的切图仔 <br /> @ <b>公众号:伯nulee</b>","socials":{"github":"https://gitee.com/LUNIONT","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/2277843824292183","customs":{}}},"feature":true},"next_post":{"title":"nestjs全解[windows版]","uid":"4edaeadfac9de456799e43869dc8071d","slug":"nestjs全解","date":"2022-04-23T01:38:46.000Z","updated":"2022-05-28T11:06:46.466Z","comments":true,"path":"api/articles/nestjs全解.json","keywords":null,"cover":[],"text":"前期准备基于docker配置数据库环境 进入docker官网下载docker desktop https://www.docker.com/get-started/ 使用docker-compose简化运行方式 由于docker desktop安装时已经自带docker-comp...","link":"","photos":[],"count_time":{"symbolsCount":"4.5k","symbolsTime":"4 mins."},"categories":[{"name":"服务端","slug":"服务端","count":1,"path":"api/categories/服务端.json"}],"tags":[{"name":"数据库","slug":"数据库","count":3,"path":"api/tags/数据库.json"},{"name":"服务端","slug":"服务端","count":1,"path":"api/tags/服务端.json"},{"name":"nestjs","slug":"nestjs","count":1,"path":"api/tags/nestjs.json"},{"name":"node","slug":"node","count":1,"path":"api/tags/node.json"}],"author":{"name":"LIYUNFU","slug":"blog-author","avatar":"https://p26-passport.byteacctimg.com/img/user-avatar/c52fbf24fbba8a052c8dd93e8b978eac~300x300.image","link":"/","description":"一个正在重塑知识的切图仔 <br /> @ <b>公众号:伯nulee</b>","socials":{"github":"https://gitee.com/LUNIONT","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/2277843824292183","customs":{}}}}}