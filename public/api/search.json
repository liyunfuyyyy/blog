[{"id":"50ba5796497ecb4fe11ec2fa6f32ff0a","title":"å¸¸ç”¨ç®—æ³•","content":"é¢˜ç›®1 - å°†ä¸€ä¸ªæ•°ç»„æ—‹è½¬kæ­¥\nè¾“å…¥æ•°ç»„[1,2,3,4,5,6,7]\nk=3ï¼Œå³æ—‹è½¬3æ­¥\nè¾“å‡º[5,6,7,1,2,3,4]\n\nconst arr = [1, 2, 3, 4, 5, 6, 7]\nfunction rotate2(arr, k) &#123;\n  const length = arr.length\n  if (!k || length === 0) return arr\n  const step = Math.abs(k % length)   // abs å–ç»å¯¹å€¼\n\n  const part1 = arr.slice(-step)\n  const part2 = arr.slice(0, length - step)\n  const part3 = [...part1, ...part2]\n  return part3\n&#125;\n\nconst arr2 = rotate2(arr, 3)\nconsole.log(arr2)\n\n\n\né¢˜ç›®2 - å¿«é€Ÿæ’åº\nç”¨JavaScript å®ç°å¿«é€Ÿæ’åºï¼Œå¹¶è¯´æ˜æ—¶é—´å¤æ‚åº¦\n\né¢˜ç›®3 - åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ‹¬å·åŒ¹é…\nä¸€ä¸ªå­—ç¬¦ä¸²så¯èƒ½åŒ…æ‹¬{} () []ä¸‰ç§æ‹¬å·\nåˆ¤æ–­sæ˜¯å¦æ˜¯æ‹¬å·åŒ¹é…\nå¦‚(a{b}c)åŒ¹é…ï¼Œè€Œ{a(b]c)}å°±ä¸åŒ¹é…\n\nfunction isMatch(left, right) &#123;\n  if (left === '[' &amp;&amp; right == ']') return true\n  if (left === '&#123;' &amp;&amp; right == '&#125;') return true\n  if (left === '(' &amp;&amp; right == ')') return true\n  return false\n&#125;\nfunction matchBracket(str) &#123;\n  const length = str.length\n  if (length === 0) return true\n\n  const stack = []\n\n  const leftSymbols = '&#123;[('\n  const rightSymbols = '&#125;])'\n\n  for (let i = 0; i &lt; length; i++) &#123;\n    const s = str[i]\n    if (leftSymbols.includes(s)) &#123;\n      // å·¦æ‹¬å·\n      stack.push(s)\n    &#125; else if (rightSymbols.includes(s)) &#123;\n      // å³æ‹¬å·ï¼Œåˆ¤æ–­æ ˆé¡¶\n      console.log('å³æ‹¬å·' + s)\n      const top = stack[stack.length - 1]\n      if (isMatch(top, s)) &#123;\n        stack.pop()\n      &#125; else &#123;\n        return false\n      &#125;\n    &#125;\n  &#125;\n  return stack.length === 0\n&#125;\n\nconst str = '&#123;a(b[c])&#125;'\nconsole.log(matchBracket(str))\n\né¢˜ç›®4 - åè½¬å•å‘é“¾è¡¨\nè¾“å…¥ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œè¾“å‡ºå®ƒçš„åè½¬(å¤´å˜å°¾ï¼Œå°¾å˜å¤´)\n\ninterface ILinkListNode &#123;\n  value: number,\n  next?: ILinkListNode\n&#125;\n // åè½¬é“¾è¡¨\nfunction reverseLinkList(listNode: ILinkListNode): ILinkListNode &#123;\n  // å®šä¹‰ä¸‰ä¸ªæŒ‡é’ˆ\n  let prevNode: ILinkListNode | undefined = undefined\n  let curNode: ILinkListNode | undefined = undefined\n  let nextNode: ILinkListNode | undefined = listNode\n\n  // ä»¥nextNodeä¸ºä¸» éå†é“¾è¡¨\n  while (nextNode) &#123;\n    // ç¬¬ä¸€ä¸ªå…ƒç´  åˆ æ‰next é˜²æ­¢å¾ªç¯å¼•ç”¨\n    if (curNode &amp;&amp; !prevNode) &#123;\n      delete curNode.next\n    &#125;\n\n    // åè½¬æŒ‡é’ˆ\n    if (curNode &amp;&amp; prevNode) &#123;\n      curNode.next = prevNode\n    &#125;\n\n    // æ•´ä½“å‘åç§»åŠ¨\n    prevNode = curNode\n    curNode = nextNode\n    nextNode = nextNode?.next\n  &#125;\n\n  // å½“nextNodeç©ºæ—¶\n  curNode!.next = prevNode\n\n  return curNode\n&#125;\n  // åˆ›å»ºé“¾è¡¨\nfunction createLinkList(arr: number[]): ILinkListNode &#123;\n  const length = arr.length\n  if (length === 0) throw new Error('arr is empty')\n\n  let curNode: ILinkListNode = &#123;\n    value: arr[length - 1]\n  &#125;\n  for (let i = length - 2; i >= 0; i--) &#123;\n    curNode = &#123;\n      value: arr[i],\n      next: curNode\n    &#125;\n  &#125;\n\n  return curNode\n&#125;\n\nconst arr = [100, 200, 300, 400, 500]\nconst list = createLinkList(arr)\nconsole.log(list)\n\nconst list1 = reverseLinkList(list)\nconsole.log(list1)\n\né¢˜ç›®5 - ç”¨é“¾è¡¨å®ç°é˜Ÿåˆ—interface ILinkListNode &#123;\n  value: number,\n  next?: ILinkListNode\n&#125;\n\nclass MyQueue &#123;\n  private head: ILinkListNode | null = null\n  private tail: ILinkListNode | null = null\n  private len = 0\n  // å…¥é˜Ÿ åœ¨tailä½ç½®\n  add(n: number) &#123;\n    const newNode: ILinkListNode = &#123;\n      value: n,\n      next: null\n    &#125;\n    // å¤„ç†head\n    if (this.head === null) &#123;\n      this.head = newNode\n    &#125;\n\n    // å¤„ç†tail\n    const tailNode = this.tail\n    if (tailNode) &#123;\n      tailNode.next = newNode\n    &#125;\n    this.tail = newNode\n\n    // è®°å½•é•¿åº¦\n    this.len++\n  &#125;\n  // å‡ºé˜Ÿ åœ¨headä½ç½®\n  delete(): number | null &#123;\n    const headNode = this.head\n    if (headNode == null) return null\n    if (this.len &lt;= 0) return null\n\n    // å–å€¼\n    const value = headNode.value\n\n    //å¤„ç†head\n    this.head = headNode.next\n\n    // è®°å½•é•¿åº¦\n    this.len--\n\n    return value\n  &#125;\n  get length(): number &#123;\n    // lengthè¦å•ç‹¬å­˜å‚¨ ä¸èƒ½éå†é“¾è¡¨æ¥å­˜å– \n    return this.len\n  &#125;\n&#125;\n\nconst q = new MyQueue()\n\nq.add(100)\nq.add(200)\nq.add(300)\nconsole.log('length1', q.length)\nconsole.log(q.delete())\n\n\n\né¢˜ç›®6 - ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—class MyQueue &#123;\n  private stack1: number[] = []\n  private stack2: number[] = []\n\n  /**\n   * å…¥é˜Ÿ\n   */\n  add(n: number) &#123;\n    this.stack1.push(n)\n  &#125;\n\n  /**\n   * å‡ºé˜Ÿ\n   */\n  delete(): number | null &#123;\n    let res\n\n    const stack1 = this.stack1\n    const stack2 = this.stack2\n\n    // å°†stack1 æ‰€æœ‰å…ƒç´ ç§»åŠ¨åˆ°stack2ä¸­\n    while (stack1.length) &#123;\n      const n = stack1.pop()\n      if (n != null) &#123;\n        stack2.push(n)\n      &#125;\n    &#125;\n\n    // stack2 pop\n    res = stack2.pop()\n\n    // å°†stack2æ‰€æœ‰å…ƒç´ è¿˜ç»™stack1\n    while (stack2.length) &#123;\n      const n = stack2.pop()\n      if (n != null) &#123;\n        stack1.push(n)\n      &#125;\n    &#125;\n    return res || null\n  &#125;\n  get length(): number &#123;\n    return this.stack1.length\n  &#125;\n&#125;\n\n","slug":"å¸¸ç”¨ç®—æ³•","date":"2022-03-14T10:17:13.000Z","categories_index":"çŸ¥è¯†ç‚¹","tags_index":"ç®—æ³•,æ•°æ®ç»“æ„","author_index":"LIYUNFU"},{"id":"52748ea8c7aacb653b9bc3a082a7560f","title":"åŸºäºkoa-generatoræ­å»ºé€šç”¨æœåŠ¡ç«¯","content":"å®‰è£…koa-generatorå…¨å±€å®‰è£…koa-generatornpm i koa-generator -g\n\nåˆå§‹åŒ–é¡¹ç›®koa2 goudong-server \n\nè¿›å…¥å¹¶å®‰è£…ä¾èµ–cd goudong-server \nnpm install\n\n\n\næ”¹é€ é¡¹ç›®ç¯å¢ƒ\nåœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºsrcç›®å½•\n\nå°†public ã€routes ã€views ã€app.jsæ‹–å…¥srcç›®å½•\n\nä¿®æ”¹bin/wwwä¸­çš„var app = require(&#39;../app&#39;);ä¸ºvar app = require(&#39;../src/app&#39;);\n\næ”¹é€ åç›®å½•\n\n```shell|- bin  |- www|-node_modules|-src  |-public  |-routes  |-views  |-app.js|-package.json\n\n- åœ¨&#96;src&#96;ç›®å½•ä¸‹åˆ›å»ºå››ä¸ªç›®å½•&#96;controller&#96; ã€&#96;db&#96; ã€&#96;middleware&#96;ã€&#96;models&#96;\n\n\n\n\n\n## å®ç°ç™»å½•åŠŸèƒ½\n\n### é…ç½®å¼€å‘ç¯å¢ƒ\n\n#### å®‰è£…&#96;koa-generic-session&#96;ä¾èµ–\n\n&#96;&#96;&#96;shell\nni koa-generic-session \n\nä½¿ç”¨const session = require('koa-generic-session')\n\n//sessioné…ç½®\napp.keys = ['liyunfuAAA'] //å¯†é’¥ç”¨äºåŠ å¯†\napp.use(session(&#123;\n  //é…ç½®cookie\n  cookie: &#123;\n    path: '/',\n    httpOnly: true,\n    maxAge: 24 * 60 * 60 * 1000\n  &#125;\n&#125;))\n\n\n\nè·¨åŸŸå®‰è£…koa2-corsä¾èµ–ni koa2-cors\n\nä½¿ç”¨const cors = require('koa2-cors')\n\n//corsé…ç½®\napp.use(cors(&#123;\n  origin: 'http://localhost:8080',  //å‰ç«¯origin\n  credentials: true //å…è®¸è·¨åŸŸå¸¦cookie\n&#125;))\n\nè¿æ¥æ•°æ®åº“å®‰è£…mongooseni mongoose\n\nåœ¨dbç›®å½•ä¸‹æ–°å»ºdb.js/**\n * @description mongoose è¿æ¥æ•°æ®åº“\n * @author liyunfu\n */\nconst mongoose = require('mongoose')\n\nconst DB_URL = 'mongodb://root:example@47.99.147.11.27017/jingdong?authSource=admin'\n\n// å¼€å§‹è¿æ¥\nmongoose.connect(DB_URL, &#123;\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n&#125;)\n\n// è¿æ¥å¯¹è±¡\nconst db = mongoose.connection\n\ndb.on('error', err => &#123;\n  console.error('mongoose connect error', err)\n&#125;)\ndb.once('open', () => &#123;\n  console.log('mongoose è¿æ¥æˆåŠŸ')\n&#125;)\n\nmodule.exports = mongoose\n\n\n\nè®¾è®¡Schemaå’ŒModel\nåœ¨modelsç›®å½•ä¸‹æ–°å»ºUser.js\n/**\n * @description user Model\n * @author liyunfu\n */\n\nconst mongoose = require('../db/db')\n\nconst Schema = mongoose.Schema(&#123;\n  username: &#123;\n    type: String,\n    require: true,\n    unique: true\n  &#125;,\n  password: String\n&#125;, &#123; timestamps: true &#125;)\n\nconst User = mongoose.model('user', Schema)\n\nmodule.exports = User\nåœ¨modelsä¸‹æ–°å»ºAddress.js\n/**\n * @description Address Model\n * @author liyunfu\n */\n\nconst mongoose = require('../db/db')\n\nconst Schema = mongoose.Schema(&#123;\n  username: &#123;\n    type: String,\n    require: true\n  &#125;,\n  city: String,\n  department: String,\n  houseNumber: String,\n  name: String,\n  phone: String\n&#125;, &#123; timeStamps: true &#125;)\n\nconst Address = mongoose.model('address', Schema)\n\nmodule.exports = Address\nåœ¨modelsä¸‹æ–°å»ºShop.js\n/**\n * @description Shop Model\n * @author liyunfu\n */\n\nconst mongoose = require('../db/db')\n\nconst Schema = mongoose.Schema(&#123;\n  name: String,\n  imgUrl: String,\n  sales: Number,\n  expressLimit: &#123;\n    type: Number,\n    default: 0\n  &#125;,\n  expressPrice: Number,\n  slogan: String\n&#125;, &#123; timeStamps: true &#125;)\n\nconst Shop = mongoose.model('shop', Schema)\n\nmodule.exports = Shop\nåœ¨modelsä¸‹æ–°å»ºProduct.js\n/**\n * @description Product Model\n * @author liyunfu\n */\n\nconst mongoose = require('../db/db')\n\nconst Schema = mongoose.Schema(&#123;\n  ShopId: &#123;\n    type: String,\n    require: true\n  &#125;,\n  name: String,\n  imgUrl: String,\n  sales: Number,\n  price: Number,\n  oldPrice: Number,\n  tabs: [String]  //ç¤ºä¾‹ tabs:['all','seckill']\n&#125;, &#123; timestamps: true &#125;)\n\nconst Product = mongoose.model('product', Schema)\n\nmodule.exports = Product\nåœ¨modelsä¸‹æ–°å»ºOrder.js \n/**\n * @description Order Model\n * @author liyunfu\n */\n\nconst mongoose = require('../db/db')\n\nconst Schema = mongoose.Schema(&#123;\n  username: &#123;\n    type: String,\n    require: true\n  &#125;,\n  shopId: String,\n  shopName: String,\n\n  idCanceled: &#123;\n    type: Boolean,\n    default: false\n  &#125;,\n  address: &#123;\n    username: String,\n    city: String,\n    department: String,\n    houseNumber: String,\n    name: String,\n    phone: String\n  &#125;,\n  products: [\n    &#123;\n      product: &#123;\n        shopId: &#123;\n          type: String,\n          require: true\n        &#125;,\n        name: String,\n        imgUrl: String,\n        sales: Number,\n        price: Number,\n        oldPrice: Number,\n        tabs: [String]\n      &#125;,\n      orderSales: Number\n    &#125;\n  ]\n&#125;, &#123; timestamps: true &#125;)\n\nconst Order = mongoose.model('order', Schema)\n\nmodule.exports = Order\nåœ¨models ä¸‹æ–°å»ºindex.js \n/**\n * @description Model å…¥å£æ–‡ä»¶\n * @author liyunfu\n */\nconst Address = require('./Address')\nconst Order = require('./Order')\nconst Product = require('./Product')\nconst Shop = require('./Shop')\nconst User = require(\"./User\")\n\nmodule.exports = &#123;\n  Address,\n  Order,\n  Product,\n  Shop,\n  User\n&#125;\n\næ ‡å‡†åŒ–è¯·æ±‚æˆåŠŸä¸å¤±è´¥çš„å“åº”ä¿¡æ¯\nåœ¨res-model ä¸‹æ–°å»ºErrorModel.js\n/**\n * @description é”™è¯¯è¿”å›çš„æ•°æ®ç»“æ„\n * @author liyunfu\n */\n\nclass ErrorModel &#123;\n  constructor(errno = -1, message = 'error') &#123;\n    this.errno = errno\n    this.message = message\n  &#125;\n&#125;\n\nmodule.exports = ErrorModel\nåœ¨res-model ä¸‹æ–°å»ºSuccessModel.js\n/**\n * @description æˆåŠŸè¿”å›çš„æ•°æ®ç±»å‹\n * @author liyunfu\n */\n\nclass SuccessModel &#123;\n  constructor(data) &#123;\n    this.errno = 0\n    if (data !== null) &#123;\n      this.data = data\n    &#125;\n  &#125;\n&#125;\n\nmodule.exports = SuccessModel\nåœ¨res-model ä¸‹æ–°å»ºå…¥å£æ–‡ä»¶index.js\n/**\n * @description è¿”å›æ•°æ®ç±»å‹ å…¥å£æ–‡ä»¶\n * @author liyunfu\n */\nconst SuccessModel = require('./SuccessModel')\nconst ErrorModel = require('./ErrorModel')\n\nmodule.exports = &#123; SuccessModel, ErrorModel &#125;\n\nç¼–å†™ç™»å½•éªŒè¯ä¸­é—´ä»¶\nåœ¨middleware ä¸‹æ–°å»ºloginCheck.js\n/**\n * @description ç™»å½•éªŒè¯ä¸­é—´ä»¶\n * @author liyunfu\n */\n\nconst &#123; ErrorModel &#125; = require('../res-model/index')\n\nmodule.exports = async (ctx, next) => &#123;\n  const session = ctx.session\n\n  if (session &amp;&amp; session.userInfo) &#123;\n    await next()\n    return\n  &#125;\n  ctx.body = new ErrorModel(10003, 'ä¸­é—´ä»¶ç™»å½•éªŒè¯å¤±è´¥')\n&#125;\n\nç”¨æˆ·æ“ä½œæ¥å£\nåœ¨controller ä¸‹æ–°å»º user.js\n/**\n * @description user controller\n * @author liyunfu\n */\n\nconst &#123; User &#125; = require('../models/index')\n\n/**\n * æ³¨å†Œæ–¹æ³•\n * @param &#123;Object&#125; userInfo ç”¨æˆ·ä¿¡æ¯\n * @returns \n */\nasync function register(userInfo = &#123;&#125;) &#123;\n  // æ³¨æ„éªŒè¯ä¸€ä¸‹username unique\n  const newUser = await User.create(userInfo)\n  return newUser\n&#125;\n\nasync function login(username, password) &#123;\n  const user = await User.findOne(&#123; username, password &#125;)\n  if (user != null) &#123;\n    // ç™»å½•æˆåŠŸ\n    return true\n  &#125;\n  return false\n&#125;\n\nmodule.exports = &#123;\n  register, login\n&#125;\nåœ¨routes ä¸‹æ–°å»ºusers.js\nconst router = require('koa-router')()\n\n\nconst &#123; register, login &#125; = require('../controller/user')\nconst &#123; SuccessModel, ErrorModel &#125; = require('../res-model/index')\nconst loginCheck = require('../middleware/loginCheck')\n\nrouter.prefix('/api/user')\n\n// æ³¨å†Œ\nrouter.post('/register', async function (ctx, next) &#123;\n  const userInfo = ctx.request.body\n  try &#123;\n    await register(userInfo)\n    // è¿”å›æˆåŠŸ\n    ctx.body = new SuccessModel()\n  &#125; catch (ex) &#123;\n    console.log(ex)\n    // è¿”å›å¤±è´¥\n    ctx.body = new ErrorModel(10001, `æ³¨å†Œå¤±è´¥ - $&#123;ex.message&#125;`)\n  &#125;\n&#125;)\n\n// ç™»å½•\nrouter.post('/login', async (ctx, next) => &#123;\n  const &#123; username, password &#125; = ctx.request.body\n  // æŸ¥è¯¢å•ä¸ªç”¨æˆ·\n  const res = await login(username, password)\n\n  if (res) &#123;\n    // ç™»å½•æˆåŠŸ\n    ctx.session.userInfo = &#123; username &#125;  //è®¾ç½®session\n\n    ctx.body = new SuccessModel()\n  &#125; else &#123;\n    ctx.body = new ErrorModel(10002, `ç™»å½•éªŒè¯å¤±è´¥`)\n  &#125;\n&#125;)\n\nrouter.get('/info', loginCheck, async function (ctx, next) &#123;\n  // åŠ äº†loginCheckä¹‹åï¼Œå› ä¸ºä¿è¯äº†å¿…é¡»ç™»å½•\n  const session = ctx.session\n  ctx.body = new SuccessModel(session.userInfo)\n&#125;)\nmodule.exports = router\n\nåœ°å€æ“ä½œæ¥å£\nåœ¨controller ä¸‹æ–°å»ºaddress.js\n/**\n * @description address controller\n * @author liyunfu\n */\n\nconst &#123; Address &#125; = require('../models/index')\n\n/**\n * åˆ›å»ºåœ°å€ \n * @param &#123;string&#125; username ç”¨æˆ·å\n * @param &#123;Object&#125; data åœ°å€çš„è¯¦ç»†ä¿¡æ¯\n * @returns \n */\nasync function createAddress(username, data) &#123;\n  const address = await Address.create(&#123; username, ...data &#125;)\n\n  return address\n&#125;\n\n/**\n * è·å–åœ°å€åˆ—è¡¨\n * @param &#123;string&#125; username ç”¨æˆ·å\n * @returns \n */\nasync function getAddressList(username) &#123;\n  const list = await Address.find(&#123; username &#125;).sort(&#123; updatedAt: -1 &#125;)\n  return list\n&#125;\n\n/**\n * è·å–å•ä¸ªæ”¶è·åœ°å€\n * @param &#123;string&#125; id id\n * @returns \n */\nasync function getAddressById(id) &#123;\n  const address = await Address.findById(id)\n  return address\n&#125;\n\nasync function updateAddress(id, username, data) &#123;\n  const address = await Address.findOneAndUpdate(\n    &#123;\n      // æŸ¥è¯¢æ¡ä»¶\n      _id: id,\n      username,\n    &#125;,\n    &#123;\n      username, ...data\n    &#125;,\n    &#123;\n      new: true  //è¿”å›æ›´æ–°ä¹‹åçš„æœ€æ–°æ•°æ®ï¼Œé»˜è®¤æ—¶falseï¼Œè¿”å›æ›´æ–°ä¹‹å‰çš„æ•°æ®\n    &#125;\n  )\n  return address\n&#125;\n\nmodule.exports = &#123;\n  createAddress,\n  getAddressList,\n  getAddressById,\n  updateAddress\n&#125;\nåœ¨routes ä¸‹æ–°å»ºaddress.js\n/**\n * @description address router\n * @author liyunfu\n */\n\nconst router = require('koa-router')()\nconst &#123; createAddress, getAddressList, getAddressById, updateAddress &#125; = require('../controller/address')\nconst &#123; SuccessModel, ErrorModel &#125; = require('../res-model/index')\nconst loginCheck = require('../middleware/loginCheck')\n\nrouter.prefix('/api/user/address')\n\n// åˆ›å»ºæ”¶è´§åœ°å€\nrouter.post('/', loginCheck, async (ctx, next) => &#123;\n  // è·å–ç”¨æˆ·ä¿¡æ¯\n  const userInfo = ctx.session.userInfo\n  const username = userInfo.username\n  const data = ctx.request.body\n\n  // åˆ›å»ºæ•°æ®\n  try &#123;\n    const newAddress = await createAddress(username, data)\n    ctx.body = new SuccessModel(newAddress)\n  &#125; catch (error) &#123;\n    console.log(error)\n    ctx.body = new ErrorModel(10004, 'åˆ›å»ºæ”¶è´§åœ°å€å¤±è´¥')\n  &#125;\n&#125;)\n\n// è·å–æ”¶è´§åœ°å€åˆ—è¡¨\nrouter.get('/', loginCheck, async (ctx, next) => &#123;\n  const userInfo = ctx.session.userInfo\n  const username = userInfo.username\n\n  // è·å–åˆ—è¡¨\n  const list = await getAddressList(username)\n  ctx.body = new SuccessModel(list)\n&#125;)\n\n// è·å–å•ä¸ªæ”¶è·åœ°å€\nrouter.get('/:id', loginCheck, async (ctx, next) => &#123;\n  const id = ctx.params.id\n  const address = await getAddressById(id)\n\n  ctx.body = new SuccessModel(address)\n&#125;)\n\n// æ›´æ–°æ”¶è´§åœ°å€\nrouter.patch('/:id', loginCheck, async (ctx, next) => &#123;\n  const id = ctx.params.id\n  const data = ctx.request.body\n  const userInfo = ctx.session.userInfo\n  const username = userInfo.username\n  // æ›´æ–°\n  const newAddress = await updateAddress(id, username, data)\n  ctx.body = new SuccessModel(newAddress)\n&#125;)\n\nmodule.exports = router\n\nå•†åº—å•†å“æ¥å£\nåœ¨controller ä¸‹æ–°å»ºshop.js\n/**\n * @description shop controller\n * @author liyunfu\n */\n\nconst &#123; &#125; = require('../models/index')\n\n// çƒ­é—¨å•†åº—åˆ—è¡¨\nasync function getHotList() &#123;\n  const list = await Shop.find().sort(&#123; _id: -1 &#125;) //é€†åº\n  return list\n&#125;\n\n// æ ¹æ®idè·å–å•ä¸ªå•†åº—ä¿¡æ¯\nasync function getShopInfo(id) &#123;\n  const shop = await Shop.findById(id)\n  return shop\n&#125;\n\n// æ ¹æ®å•†åº—idè·å–å•†å“\nasync function getProductByShopId(id, tab = '') &#123;\n  const pList = await Product.find(&#123;\n    shopId: id,\n    tabs: &#123;\n      $in: tab  //åŒ¹é…tabs\n    &#125;\n  &#125;).sort(&#123; _id: -1 &#125;)  //é€†åº\n  return pList\n&#125;\n\nmodule.exports = &#123;\n  getHotList,\n  getShopInfo,\n  getProductByShopId\n&#125;\nåœ¨routesä¸‹æ–°å»ºshop.js\nconst router = require('koa-router')()\n\nconst &#123; SuccessModel &#125; = require('../res-model/SuccessModel')\n\nconst &#123;\n  getHotList,\n  getShopInfo,\n  getProductByShopId\n&#125; = require('../controller/shop')\n\nrouter.prefix('/api/shop')\n\n// çƒ­é—¨å•†åº—ï¼ˆé¦–é¡µå•†åº—åˆ—è¡¨ï¼‰\nrouter.get('/hot-list', async function (ctx, next) &#123;\n  const list = await getHotList()\n  ctx.body = new SuccessModel(list)\n&#125;)\n\n// æ ¹æ® id æŸ¥è¯¢å•ä¸ªå•†åº—ä¿¡æ¯\nrouter.get('/:id', async function (ctx, next) &#123;\n  const id = ctx.params.id  //å•†åº—id\n  const shop = await getShopInfo(id)\n  ctx.body = new SuccessModel(shop)\n&#125;)\n\nrouter.get('/:id/product', async function (ctx, next) &#123;\n  const id = ctx.params.id\n  const tab = ctx.query.tab || 'all'\n  const products = await getProductByShopId(id, tab)\n  ctx.body = new SuccessModel(products)\n&#125;)\n\nè®¢å•æ¥å£\nåœ¨controller ä¸‹æ–°å»ºorder.js\n/**\n * @description order controller\n * @author liyunfu\n */\n\nconst &#123; Order, Product, Address &#125; = require('../models/index')\n\n// åˆ›å»ºè®¢å•(è¦ä»Addressï¼ŒProducté‡Œæ‹·è´æ•°æ®ï¼Œæ¯”è¾ƒéº»çƒ¦)\nasync function createOrder(username, data = &#123;&#125;) &#123;\n  console.log(username, data)\n  // ç»“æ„data(å‰ç«¯ä¼ æ¥çš„è®¢å•ä¿¡æ¯)\n  const &#123;\n    addressId,\n    shopId,\n    shopName,\n    isCanceled = false,\n    products = []\n  &#125; = data\n\n  // æ ¹æ®addressIdè·å–åœ°å€ä¿¡æ¯\n  const address = await Address.findById(addressId)\n\n  // è·å–å•†å“åˆ—è¡¨\n  const pIds = products.map(p => p.id)\n  const productList = await Product.find(&#123;\n    // æ¡ä»¶1ï¼šå•†å“id\n    _id: &#123;\n      $in: pIds\n    &#125;,\n    // æ¡ä»¶2ï¼šå•†åº—id\n    shopId\n  &#125;)\n\n  // ç»™å•†å“åˆ—è¡¨å¢åŠ é”€å”®æ•°é‡(è®¢å•é‡Œï¼Œæ¯ä¸ªå•†å“éƒ½æœ‰é”€é‡)\n  const productListWithSales = productList.map(p => &#123;\n    // å•†å“id\n    const id = p._id.toString()\n\n    // æ‰¾åˆ°å•†å“é”€é‡\n    const filterProducts = products.filter(item => item.id === id)\n    if (filterProducts.length === 0) &#123;\n      // æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ•°é‡ æŠ¥é”™\n      throw new Error('æœªæ‰¾åˆ°åŒ¹é…çš„é”€é‡æ•°æ®')\n    &#125;\n\n    return &#123;\n      orderSales: filterProducts[0].num,\n      product: p\n    &#125;\n  &#125;)\n\n  // åˆ›å»ºè®¢å•\n  const newOrder = await Order.create(&#123;\n    username,\n    address,\n    shopId,\n    shopName,\n    isCanceled,\n    products: productListWithSales\n  &#125;)\n  return newOrder\n&#125;\n\n// è·å–è®¢å•åˆ—è¡¨\nasync function getOrderList(username) &#123;\n  console.log('username', username)\n  const list = await Order.find(&#123; username &#125;).sort(&#123; _id: -1 &#125;)\n  console.log('list', 'list')\n  return list\n&#125;\n\nmodule.exports = &#123;\n  createOrder,\n  getOrderList\n&#125;\nåœ¨routes ä¸‹æ–°å»ºorder.js\nconst router = require('koa-router')()\n\nconst &#123; SuccessModel, ErrorModel &#125; = require('../res-model/index')\nconst loginCheck = require('../middleware/loginCheck')\nconst &#123; createOrder, getOrderList &#125; = require('../controller/order')\n\nrouter.prefix('/api/order')\n\n// åˆ›å»ºè®¢å•\nrouter.post('/', loginCheck, async function (ctx, next) &#123;\n  // æœ‰ç™»å½•éªŒè¯ å¯ä»¥ç›´æ¥è·å–session\n  const userInfo = ctx.session.userInfo\n  const username = userInfo.username\n\n  // è®¢å•æ•°æ®\n  const data = ctx.request.body\n\n  try &#123;\n    const newOrder = await createOrder(username, data)\n    ctx.body = new SuccessModel(newOrder)\n  &#125; catch (ex) &#123;\n    console.error(ex)\n    ctx.body = new ErrorModel(10005, 'è®¢å•åˆ›å»ºå¤±è´¥')\n  &#125;\n&#125;)\n\n// è·å–è®¢å•åˆ—è¡¨\nrouter.get('/', loginCheck, async function (ctx, next) &#123;\n  // æœ‰ç™»å½•éªŒè¯ï¼Œå¯ä»¥ç›´æ¥è·å–session\n  const userInfo = ctx.session.userInfo\n  const username = userInfo.username\n\n  const list = await getOrderList(username)\n\n  ctx.body = new SuccessModel(list)\n&#125;)\n\nmodule.exports = router\n\næ”¹ä¸ºé€‚åˆéƒ¨ç½²åˆ°Vercelçš„é¡¹ç›®\nåœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºvercel.json\n&#123;\n  \"version\": 2,\n  \"builds\": [\n    &#123;\n      \"src\": \"./index.js\",\n      \"use\": \"@vercel/node\"\n    &#125;\n  ],\n  \"routes\": [\n    &#123;\n      \"src\": \"/(.*)\",\n      \"dest\": \"/\"\n    &#125;\n  ]\n&#125;\nåœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºindex.js å°†åŸbin/wwwå†…å®¹ç§»åˆ°æ­¤å¤„\n\nä¿®æ”¹package.json\n\"start\": \"node index.js\",\n\"dev\": \"./node_modules/.bin/nodemon index.js\",\n\"prd\": \"pm2 start index.js\",\n\næ”¹é€ é¡¹ç›®ï¼Œå®ç°è·¨åŸŸ\nä¿®æ”¹æ ¹ç›®å½•ä¸‹vercel.json\n&#123;\n  \"version\": 2,\n  \"builds\": [\n    &#123;\n      \"src\": \"./index.js\",\n      \"use\": \"@vercel/node\"\n    &#125;\n  ],\n  \"routes\": [\n    &#123;\n      \"src\": \"/(.*)\",\n      \"dest\": \"/\",\n      \"headers\": &#123;\n        \"Access-Control-Allow-Credentials\": \"true\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Methods\": \"GET,OPTIONS,PATCH,DELETE,POST,PUT\",\n        \"Access-Control-Allow-Headers\": \"X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version\"\n      &#125;\n    &#125;\n  ]\n&#125;\n\nâ€‹      \n","slug":"åŸºäºkoa-generatoræ­å»ºé€šç”¨æœåŠ¡ç«¯","date":"2022-03-05T02:51:22.000Z","categories_index":"å®æˆ˜","tags_index":"å®æˆ˜,koa","author_index":"LIYUNFU"},{"id":"7bb7fcd214fc2de4ef1142bae196581d","title":"æ ‡å‡†åŒ–å¤§å‚ç¼–ç è§„èŒƒè§£å†³æ–¹æ¡ˆ","content":"å‡çº§æœ€æ–°çš„vuenpm i vue@3.2.8 vue-router@4.0.11 vuex@4.0.2\n\nESLintè§„åˆ™// ESLint é…ç½®æ–‡ä»¶éµå¾ª commonJS çš„å¯¼å‡ºè§„åˆ™ï¼Œæ‰€å¯¼å‡ºçš„å¯¹è±¡å°±æ˜¯ ESLint çš„é…ç½®å¯¹è±¡\n// æ–‡æ¡£ï¼šhttps://eslint.bootcss.com/docs/user-guide/configuring\nmodule.exports = &#123;\n  // è¡¨ç¤ºå½“å‰ç›®å½•å³ä¸ºæ ¹ç›®å½•ï¼ŒESLint è§„åˆ™å°†è¢«é™åˆ¶åˆ°è¯¥ç›®å½•ä¸‹\n  root: true,\n  // env è¡¨ç¤ºå¯ç”¨ ESLint æ£€æµ‹çš„ç¯å¢ƒ\n  env: &#123;\n    // åœ¨ node ç¯å¢ƒä¸‹å¯åŠ¨ ESLint æ£€æµ‹\n    node: true\n  &#125;,\n  // ESLint ä¸­åŸºç¡€é…ç½®éœ€è¦ç»§æ‰¿çš„é…ç½®\n  extends: [\"plugin:vue/vue3-essential\", \"@vue/standard\"],\n  // è§£æå™¨\n  parserOptions: &#123;\n    parser: \"babel-eslint\"\n  &#125;,\n  // éœ€è¦ä¿®æ”¹çš„å¯ç”¨è§„åˆ™åŠå…¶å„è‡ªçš„é”™è¯¯çº§åˆ«\n  /**\n   * é”™è¯¯çº§åˆ«åˆ†ä¸ºä¸‰ç§ï¼š\n   * \"off\" æˆ– 0 - å…³é—­è§„åˆ™\n   * \"warn\" æˆ– 1 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarn (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)\n   * \"error\" æˆ– 2 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerror (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)\n   */\n  rules: &#123;\n    \"no-console\": process.env.NODE_ENV === \"production\" ? \"warn\" : \"off\",\n    \"no-debugger\": process.env.NODE_ENV === \"production\" ? \"warn\" : \"off\",\n    'space-before-function-paren': 0  //å‡½æ•°å‚æ•°å‰æ‹¬å·æ²¡æœ‰ç©ºæ ¼\n  &#125;\n&#125;;\n\nPrettieré…ç½®.prettierrc\n&#123;\n  // ä¸å°¾éšåˆ†å·\n  \"semi\": false,\n  // ä½¿ç”¨å•å¼•å·\n  \"singleQuote\": true,\n  // å¤šè¡Œé€—å·åˆ†å‰²çš„è¯­æ³•ä¸­ï¼Œæœ€åä¸€è¡Œä¸åŠ é€—å·\n  \"trailingComma\": \"none\"\n&#125;\n\nä¿®æ”¹VSCodeçš„TabSize\né…ç½®å¤§å‚gitæäº¤è§„èŒƒå…¨å±€å®‰è£…Commitizennpm install -g commitizen@4.2.4\n\nå®‰è£…å¹¶é…ç½® cz-customizable æ’ä»¶å®‰è£…npm i cz-customizable@6.3.0 --save-dev\n\næ·»åŠ ä»¥ä¸‹é…ç½®åˆ° package.json ä¸­\"config\": &#123;\n  \"commitizen\": &#123;\n    \"path\": \"node_modules/cz-customizable\"\n  &#125;\n&#125;\n\né¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º .cz-config.js è‡ªå®šä¹‰æç¤ºæ–‡ä»¶module.exports = &#123;\n  // å¯é€‰ç±»å‹\n  types: [\n    &#123; value: 'feat', name: 'feat:     æ–°åŠŸèƒ½' &#125;,\n    &#123; value: 'fix', name: 'fix:      ä¿®å¤' &#125;,\n    &#123; value: 'docs', name: 'docs:     æ–‡æ¡£å˜æ›´' &#125;,\n    &#123; value: 'style', name: 'style:    ä»£ç æ ¼å¼(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)' &#125;,\n    &#123;\n      value: 'refactor',\n      name: 'refactor: é‡æ„(æ—¢ä¸æ˜¯å¢åŠ featureï¼Œä¹Ÿä¸æ˜¯ä¿®å¤bug)'\n    &#125;,\n    &#123; value: 'perf', name: 'perf:     æ€§èƒ½ä¼˜åŒ–' &#125;,\n    &#123; value: 'test', name: 'test:     å¢åŠ æµ‹è¯•' &#125;,\n    &#123; value: 'chore', name: 'chore:    æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨' &#125;,\n    &#123; value: 'revert', name: 'revert:   å›é€€' &#125;,\n    &#123; value: 'build', name: 'build:    æ‰“åŒ…' &#125;\n  ],\n  // æ¶ˆæ¯æ­¥éª¤\n  messages: &#123;\n    type: 'è¯·é€‰æ‹©æäº¤ç±»å‹:',\n    customScope: 'è¯·è¾“å…¥ä¿®æ”¹èŒƒå›´(å¯é€‰):',\n    subject: 'è¯·ç®€è¦æè¿°æäº¤(å¿…å¡«):',\n    body: 'è¯·è¾“å…¥è¯¦ç»†æè¿°(å¯é€‰):',\n    footer: 'è¯·è¾“å…¥è¦å…³é—­çš„issue(å¯é€‰):',\n    confirmCommit: 'ç¡®è®¤ä½¿ç”¨ä»¥ä¸Šä¿¡æ¯æäº¤ï¼Ÿ(y/n/e/h)'\n  &#125;,\n  // è·³è¿‡é—®é¢˜\n  skipQuestions: ['body', 'footer'],\n  // subjectæ–‡å­—é•¿åº¦é»˜è®¤æ˜¯72\n  subjectLimit: 72\n&#125;\n\nä½¿ç”¨ git cz ä»£æ›¿ git commitä½¿ç”¨ husky + commitlint æ£€æŸ¥æäº¤æè¿°æ˜¯å¦ç¬¦åˆè§„èŒƒè¦æ±‚commitlintå®‰è£…ä¾èµ–ï¼šnpm install --save-dev @commitlint/config-conventional@12.1.4 @commitlint/cli@12.1.4\n\næ ¹ç›®å½•ä¸‹åˆ›å»º commitlint.config.js æ–‡ä»¶module.exports = &#123;\n  // ç»§æ‰¿çš„è§„åˆ™\n  extends: ['@commitlint/config-conventional'],\n  // å®šä¹‰è§„åˆ™ç±»å‹\n  rules: &#123;\n    // type ç±»å‹å®šä¹‰ï¼Œè¡¨ç¤º git æäº¤çš„ type å¿…é¡»åœ¨ä»¥ä¸‹ç±»å‹èŒƒå›´å†…\n    'type-enum': [\n      2,\n      'always',\n      [\n        'feat', // æ–°åŠŸèƒ½ feature\n        'fix', // ä¿®å¤ bug\n        'docs', // æ–‡æ¡£æ³¨é‡Š\n        'style', // ä»£ç æ ¼å¼(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)\n        'refactor', // é‡æ„(æ—¢ä¸å¢åŠ æ–°åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤bug)\n        'perf', // æ€§èƒ½ä¼˜åŒ–\n        'test', // å¢åŠ æµ‹è¯•\n        'chore', // æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨\n        'revert', // å›é€€\n        'build' // æ‰“åŒ…\n      ]\n    ],\n    // subject å¤§å°å†™ä¸åšæ ¡éªŒ\n    'subject-case': [0]\n  &#125;\n&#125;\n\næ³¨æ„ï¼šç¡®ä¿ä¿å­˜ä¸º UTF-8 çš„ç¼–ç æ ¼å¼ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š\n\nhuskyå®‰è£…ä¾èµ–ï¼šnpm install husky@7.0.1 --save-dev\n\nå¯åŠ¨ hooks ï¼Œ ç”Ÿæˆ .husky æ–‡ä»¶å¤¹npx husky install\n\nåœ¨ package.json ä¸­ç”Ÿæˆ prepare æŒ‡ä»¤\næ‰§è¡Œ prepare æŒ‡ä»¤npm run prepare\n\næ‰§è¡ŒæˆåŠŸï¼Œæç¤º\næ·»åŠ  commitlint çš„ hook åˆ° huskyä¸­ï¼Œå¹¶æŒ‡ä»¤åœ¨ commit-msg çš„ hooks ä¸‹æ‰§è¡Œ npx â€“no-install commitlint â€“edit â€œ$1â€ æŒ‡ä»¤npx husky add .husky/commit-msg 'npx --no-install commitlint --edit \"$1\"'\n\næ­¤æ—¶çš„ .husky çš„æ–‡ä»¶ç»“æ„\nè‡³æ­¤ï¼Œ ä¸ç¬¦åˆè§„èŒƒçš„ commit å°†ä¸å†å¯æäº¤\né€šè¿‡ pre-commit æ£€æµ‹æäº¤æ—¶ä»£ç è§„èŒƒæˆ‘ä»¬æœŸæœ›é€šè¿‡ husky ç›‘æµ‹ pre-commit é’©å­ï¼Œåœ¨è¯¥é’©å­ä¸‹æ‰§è¡Œ npx eslint â€“ext .js,.vue src æŒ‡ä»¤æ¥å»è¿›è¡Œç›¸å…³æ£€æµ‹ï¼š\n\n æ‰§è¡Œ npx husky add .husky/pre-commit &quot;npx eslint --ext .js,.vue src&quot; æ·»åŠ  commit æ—¶çš„ hook ï¼ˆnpx eslint --ext .js,.vue src ä¼šåœ¨æ‰§è¡Œåˆ°è¯¥ hook æ—¶è¿è¡Œï¼‰ \n è¯¥æ“ä½œä¼šç”Ÿæˆå¯¹åº”æ–‡ä»¶ pre-commitï¼š \n\n\nlint-staged è‡ªåŠ¨ä¿®å¤æ ¼å¼é”™è¯¯lint-staged å¯ä»¥è®©ä½ å½“å‰çš„ä»£ç æ£€æŸ¥ åªæ£€æŸ¥æœ¬æ¬¡ä¿®æ”¹æ›´æ–°çš„ä»£ç ï¼Œå¹¶åœ¨å‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œè‡ªåŠ¨ä¿®å¤å¹¶ä¸”æ¨é€lint-staged æ— éœ€å•ç‹¬å®‰è£…ï¼Œæˆ‘ä»¬ç”Ÿæˆé¡¹ç›®æ—¶ï¼Œvue-cli å·²ç»å¸®åŠ©æˆ‘ä»¬å®‰è£…è¿‡äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†\nä¿®æ”¹ package.json é…ç½®\"lint-staged\": &#123;\n    \"src/**/*.&#123;js,vue&#125;\": [\n      \"eslint --fix\",\n      \"git add\"\n    ]\n  &#125;\n\nä¿®æ”¹ .husky/pre-commit æ–‡ä»¶#!/bin/sh\n. \"$(dirname \"$0\")/_/husky.sh\"\n\nnpx lint-staged\n","slug":"æ ‡å‡†åŒ–å¤§å‚ç¼–ç è§„èŒƒè§£å†³æ–¹æ¡ˆ","date":"2022-02-10T08:33:17.000Z","categories_index":"è§„èŒƒ","tags_index":"git,è§„èŒƒ","author_index":"LIYUNFU"},{"id":"ce895751a313319f06b50d562f5dd5db","title":"ES6æ–°ç‰¹æ€§","content":"let&amp;constè§£æ„èµ‹å€¼æ•°ç»„æ–°ç‰¹æ€§\nArray.of() ï¼šå°†ä¸€ç»„å€¼è½¬åŒ–ä¸ºæ•°ç»„ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¹¶ä¸”ä¸è€ƒè™‘å‚æ•°çš„æ•°é‡æˆ–ç±»å‹\ncopyWithin() ï¼šæŠŠæŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼Œè¿”å›åŸæ•°ç»„\nfind() ï¼šè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å€¼\nfindIndex() ï¼šè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ç´¢å¼•\nkeys() ï¼š å¯¹é”®åçš„1éå†ï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå¯ç”¨for-of å¾ªç¯\nvalues() ï¼šä¸keys() ç”¨æ³•ä¸€æ ·ï¼Œä¸è¿‡æ˜¯å¯¹é”®å€¼çš„éå†\nentries() ï¼šä¸keys() ç”¨æ³•ä¸€æ ·ï¼Œä¸è¿‡æ˜¯å¯¹ é”®å€¼å¯¹çš„éå†\nArray.from() ï¼š ä»ä¸€ä¸ªç±»æ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡ä¸­æ–°å»ºä¸€ä¸ªæ–°çš„æ•°ç»„å®ä¾‹\nfill() ï¼š ä½¿ç”¨å®šåˆ¶çš„å…ƒç´ å¡«å……æ•°ç»„ï¼Œè¿”å›åŸæ•°ç»„\nincludes() ï¼šåˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›å¸ƒå°”å€¼ï¼Œå¯¹NaNæœ‰æ•ˆï¼Œä½†ä¸èƒ½å®šä½ï¼Œç¬¬äºŒä¸ªå‚æ•°å¼€å§‹å¯»æ‰¾ä½ç½®\nflatMap() ï¼šæ–¹æ³•é¦–å…ˆä½¿ç”¨æ˜ å°„å‡½æ•°æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åå°†ç»“æœå‹ç¼©æˆä¸€ä¸ªæ–°æ•°ç»„\nflat() ï¼š æ–¹æ³•ä¼šæŒ‰ç…§ä¸€ä¸ªå¯æŒ‡å®šçš„æ·±åº¦é€’å½’éå†æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰å…ƒç´ ä¸éå†åˆ°çš„å­æ•°ç»„ä¸­çš„å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªæ–°æ•°ç»„è¿”å›ï¼Œé»˜è®¤å€¼ä¸º1(åº”ç”¨ï¼šæ•°ç»„æ‰å¹³åŒ–(å½“è¾“å…¥Infinity è‡ªåŠ¨è§£åˆ°æœ€åº•å±‚))\n\nlet arr = [1, 2, 3, 4, 5]\n\n//Array.of()\nlet arr1 = Array.of(1, 2, 3);\nconsole.log(arr1) // [1, 2, 3]\n\n//copyWithin(): ä¸‰ä¸ªå‚æ•° (target, start = 0, end = this.length)\n// target: ç›®æ ‡çš„ä½ç½®\n// start: å¼€å§‹ä½ç½®ï¼Œå¯ä»¥çœç•¥ï¼Œå¯ä»¥æ˜¯è´Ÿæ•°ã€‚\n// end: ç»“æŸä½ç½®ï¼Œå¯ä»¥çœç•¥ï¼Œå¯ä»¥æ˜¯è´Ÿæ•°ï¼Œå®é™…ä½ç½®æ˜¯end-1ã€‚\nconsole.log(arr.copyWithin(0, 3, 5)) // [4, 5, 3, 4, 5]\n\n//find()\nconsole.log(arr.find((item) => item > 3 )) // 4\n\n//findIndex()\nconsole.log(arr.findIndex((item) => item > 3 )) // 3\n\n// keys()\nfor (let index of arr.keys()) &#123;\n    console.log(index); // ä¸€æ¬¡è¿”å› 0 1 2 3 4\n&#125;\n\n// values()\nfor (let index of arr.values()) &#123;\n    console.log(index); // ä¸€æ¬¡è¿”å› 1 2 3 4 5\n&#125;\n\n// entries()\nfor (let index of arr.entries()) &#123;\n    console.log(index); // ä¸€æ¬¡è¿”å› [0, 1] [1, 2] [2, 3] [3, 4] [4, 5]\n&#125;\n\n let arr = [1, 2, 3, 4, 5]\n\n// Array.from(): éå†çš„å¯ä»¥æ˜¯ä¼ªæ•°ç»„ï¼Œå¦‚ Stringã€Setç»“æ„ï¼ŒNodeèŠ‚ç‚¹\nlet arr1 = Array.from([1, 3, 5], (item) => &#123;\n    return item * 2;\n&#125;)\nconsole.log(arr1) // [2, 6, 10] \n\n// fill(): ä¸‰ä¸ªå‚æ•° (target, start = 0, end = this.length)\n// target: ç›®æ ‡çš„ä½ç½®\n// start: å¼€å§‹ä½ç½®ï¼Œå¯ä»¥çœç•¥ï¼Œå¯ä»¥æ˜¯è´Ÿæ•°ã€‚\n// end: ç»“æŸä½ç½®ï¼Œå¯ä»¥çœç•¥ï¼Œå¯ä»¥æ˜¯è´Ÿæ•°ï¼Œå®é™…ä½ç½®æ˜¯end-1ã€‚\nconsole.log(arr.fill(7)) // [7, 7, 7, 7, 7]\nconsole.log(arr.fill(7, 1, 3)) // [1, 7, 7, 4, 5]\n\nlet arr = [1, 2, 3, 4]\n\n//includes()\nconsole.log(arr.includes(3)) // true\nconsole.log([1, 2, NaN].includes(NaN)); // true\n\nlet arr = [1, 2, 3, 4]\n\n// flatMap()\nconsole.log(arr.map((x) => [x * 2])); // [ [ 2 ], [ 4 ], [ 6 ], [ 8 ] ]\nconsole.log(arr.flatMap((x) => [x * 2])); // [ 2, 4, 6, 8 ]\nconsole.log(arr.flatMap((x) => [[x * 2]])); // [ [ 2 ], [ 4 ], [ 6 ], [ 8 ] ]\n\nconst arr1 = [0, 1, 2, [3, 4]];\nconst arr2 = [0, 1, 2, [[[3, 4]]]];\n\nconsole.log(arr1.flat()); // [ 0, 1, 2, 3, 4 ]\nconsole.log(arr2.flat(2)); // [ 0, 1, 2, [ 3, 4 ] ]\nconsole.log(arr2.flat(Infinity)); // [ 0, 1, 2, 3, 4 ]\n\nå­—ç¬¦ä¸²æ–°ç‰¹æ€§\nUnicodeï¼šå¤§æ‹¬å·åŒ…å«è¡¨ç¤ºUnicodeå­—ç¬¦\ncodePointAt() ï¼š è¿”å›å­—ç¬¦å¯¹åº”ç ç‚¹ï¼Œä¸fromCharCode() å¯¹åº”\nString.fromCharCode() ï¼šå°†å¯¹åº”çš„ç ç‚¹è¿”å›ä¸ºå­—ç¬¦ï¼Œä¸codePointAt() å¯¹åº”\nString.raw() ï¼šè¿”å›æŠŠå­—ç¬¦ä¸²æ‰€æœ‰å˜é‡æ›¿æ¢ä¸”å¯¹æ–œæ è¿›è¡Œè½¬ä¹‰çš„ç»“æœ\nstartsWith() ï¼š è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨å…ƒå­—ç¬¦ä¸²çš„å¤´éƒ¨\nendsWith ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨æºå­—ç¬¦ä¸²çš„å¤´éƒ¨\nrepart() ï¼šè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå°†åŸå­—ç¬¦ä¸²é‡å¤næ¬¡\nincludes() ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²\ntrimStart() ï¼šæ–¹æ³•ä»å­—ç¬¦ä¸²çš„å¼€å¤´åˆ é™¤ç©ºæ ¼ï¼ŒtrimLeft() æ˜¯æ­¤æ–¹æ³•çš„åˆ«å\ntrimEnd() ï¼šæ–¹æ³•ä»å­—ç¬¦ä¸²çš„æœ«ç«¯åˆ é™¤ç©ºæ ¼ï¼ŒtrimRight() æ˜¯æ­¤æ–¹æ³•çš„åˆ«å\npadStart() ï¼š ç”¨äºå¤´éƒ¨è¡¥å…¨\npadEnd() ï¼š ç”¨äºå°¾éƒ¨è¡¥å…¨\nJSON.stringify() : å¯è¿”å›ä¸ç¬¦åˆUTF-8æ ‡å‡†çš„å­—ç¬¦ä¸²\nreplace() ï¼šä»…æ›¿æ¢ä¸€ä¸ª å­—ç¬¦ä¸²ä¸­æŸæ¨¡å¼çš„é¦–ä¸ªå®ä¾‹\nreplaceAll() ï¼š è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²ä¸­ç”¨ä¸€ä¸ªæ›¿æ¢é¡¹æ›¿æ¢äº†åŸå­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…äº†æ¨¡å¼çš„éƒ¨åˆ†\næ¨¡å¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œè€Œæ›¿æ¢é¡¹å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–ä¸€ä¸ªåº”ç”¨äºæ¯ä¸ªåŒ¹é…é¡¹çš„å‡½æ•°\n\n//Unicode\nconsole.log(\"a\", \"\\u0061\"); // a a\nconsole.log(\"d\", \"\\u&#123;4E25&#125;\"); // d ä¸¥\n\nlet str = 'Domesy'\n\n//codePointAt()\nconsole.log(str.codePointAt(0)) // 68\n\n//String.fromCharCode()\nconsole.log(String.fromCharCode(68)) // D\n\n//String.raw()\nconsole.log(String.raw`Hi\\n$&#123;1 + 2&#125;`); // Hi\\n3\nconsole.log(`Hi\\n$&#123;1 + 2&#125;`); // Hiâ€ˆ3\n\nlet str = 'Domesy'\n\n//startsWith()\nconsole.log(str.startsWith(\"D\")) // true\nconsole.log(str.startsWith(\"s\")) // false\n\n//endsWith()\nconsole.log(str.endsWith(\"y\")) // true\nconsole.log(str.endsWith(\"s\")) // false\n\n//repeat(): æ‰€ä¼ çš„å‚æ•°ä¼šè‡ªåŠ¨å‘ä¸Šå–æ•´ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²ä¼šè½¬åŒ–ä¸ºæ•°å­—\nconsole.log(str.repeat(2)) // DomesyDomesy\nconsole.log(str.repeat(2.9)) // DomesyDomesy\n\n// éå†ï¼šfor-of\n for(let code of str)&#123;\n   console.log(code) // ä¸€æ¬¡è¿”å› D o m e s y\n &#125;\n \n //includes()\n console.log(str.includes(\"s\")) // true\n console.log(str.includes(\"a\")) // false\n \n // trimStart()\n const string = \"   Hello world!   \";\n console.log(string.trimStart()); // \"Hello world!   \"\n console.log(string.trimLeft()); // \"Hello world!   \"\n \n // trimEnd()\n const string = \"   Hello world!   \";\n console.log(string.trimEnd()); // \"   Hello world!\"\n console.log(string.trimRight()); // \"   Hello world!\"\n\nlet str = 'Domesy'\n\n//padStart(): ä¼šä»¥ç©ºæ ¼çš„å½¢å¼è¡¥ä½å—ï¼Œè¿™é‡Œç”¨0ä»£æ›¿ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼šå®šä¹‰ä¸€ä¸ªæ¨¡æ¿å½¢å¼ï¼Œä¼šä»¥æ¨¡æ¿è¿›è¡Œæ›¿æ¢\nconsole.log(\"1\".padStart(2, \"0\")); // 01\nconsole.log(\"8-27\".padStart(10, \"YYYY-0M-0D\")); //  YYYY-08-27\n \n// padEnd()ï¼šä¸padStart()ç”¨æ³•ç›¸åŒ\nconsole.log(\"1\".padEnd(2, \"0\")); // 10\n\n//JSON.stringify() å‡çº§\nconsole.log(JSON.stringify(\"\\uD83D\\uDE0E\")); // ğŸ˜\nconsole.log(JSON.stringify(\"\\u&#123;D800&#125;\")); // \\ud800\n\nlet str = \"Hiï¼ï¼Œè¿™æ˜¯ES6~ES12çš„æ–°ç‰¹æ€§ï¼Œç›®å‰ä¸ºES12\"\n\nconsole.log(str.replace(\"ES\", \"SY\")); // Hiï¼ï¼Œè¿™æ˜¯SY6~ES12çš„æ–°ç‰¹æ€§ï¼Œç›®å‰ä¸ºES12\nconsole.log(str.replace(/ES/g, \"Sy\")); // Hiï¼ï¼Œè¿™æ˜¯Sy6~Sy12çš„æ–°ç‰¹æ€§ï¼Œç›®å‰ä¸ºSy12\n\nconsole.log(str.replaceAll(\"ES\", \"Sy\")); // Hiï¼ï¼Œè¿™æ˜¯Sy6~Sy12çš„æ–°ç‰¹æ€§ï¼Œç›®å‰ä¸ºSy12\nconsole.log(str.replaceAll(/ES/g, \"Sy\")); // Hiï¼ï¼Œè¿™æ˜¯Sy6~Sy12çš„æ–°ç‰¹æ€§ï¼Œç›®å‰ä¸ºSy12\n\n\n\n","slug":"ES6æ–°ç‰¹æ€§","date":"2022-03-12T10:48:14.000Z","categories_index":"çŸ¥è¯†ç‚¹","tags_index":"ES6,å‰ç»","author_index":"LIYUNFU"},{"id":"c1e8ab70e0a19618b82b65eaec3559f1","title":"Reacté¢è¯•é¢˜","content":"1. Reactç»„ä»¶å¦‚ä½•é€šè®¯\nprops\ncontext\nredux\nè‡ªå®šä¹‰äº‹ä»¶\n\n2. JSXæœ¬è´¨æ˜¯ä»€ä¹ˆ3. contextæ˜¯ä»€ä¹ˆï¼Œæœ‰ä½•ç”¨é€”4. SCUçš„ç”¨é€”\næ€§èƒ½ä¼˜åŒ–\nå¿…é¡»é…åˆä¸å¯å˜å€¼ä½¿ç”¨\n\n5. æè¿°reduxå•é¡¹æ•°æ®æµ6. setStateæ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼ˆåœºæ™¯é¢˜ï¼‰\n\nReacté»˜è®¤çˆ¶ç»„ä»¶æœ‰æ›´æ–°ï¼Œå­ç»„ä»¶æ— æ¡ä»¶æ›´æ–°\n\nå¼‚æ­¥action\néœ€è¦ä½¿ç”¨redux-thunk ä¸­é—´ä»¶\nå¼‚æ­¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚è®©ç½‘ç»œè¯·æ±‚ç­‰\n\n\n\n\nviewè§¦å‘ä¸€ä¸ªæ–°çš„action\nactionåˆ°dispatchä¸­\nå¦‚æœdispatchæœ‰ä¸­é—´ä»¶å¯èƒ½å†æ¬¡è§¦å‘action\ndispatchè§¦å‘actionåˆ°reducer\nreduceræ ¹æ®actionç”Ÿæˆæ–°çš„state\nstateå»æ›´æ–°view\n\n","slug":"Reacté¢è¯•é¢˜","date":"2022-03-10T10:29:44.000Z","categories_index":"é¢è¯•","tags_index":"React,Redux,Router","author_index":"LIYUNFU"},{"id":"deb07f2084ce5c6636760b3189f1eaa0","title":"gitå‘½ä»¤å¤‡å¿˜å½•","content":"\ngit init åˆå§‹åŒ–ç‰ˆæœ¬åº“\ngit add æ¯æ¬¡æäº¤å‰éƒ½è¦æ·»åŠ \ngit commit -m â€œä¿®æ”¹ä¿¡æ¯â€  \ngit log æ‰“å°æäº¤è®°å½•\ngit diff readme  æŸ¥çœ‹ç‰ˆæœ¬åŒºåˆ«\ngit reset å›åˆ°æŸä¸ªç‰ˆæœ¬  git reset --hard  ç‰ˆæœ¬ä»£å·\ngit reflog æ‰“å°æ“ä½œè®°å½• å†ä½¿ç”¨git reset ç‰ˆæœ¬å·å¯ä»¥åˆ°æœªæ¥\nå·¥ä½œåŒºçš„æ–‡ä»¶git addä¹‹ååˆ°äº†æš‚å­˜åŒºï¼Œæš‚å­˜åŒºgit commitä¸€æ¬¡æ€§æäº¤åˆ°masteråˆ†æ”¯\ngit diff HEAD -- readme.txt æŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“é‡Œé¢æœ€æ–°ç‰ˆæœ¬çš„åŒºåˆ«\ngit checkout -- readme.txt ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ï¼Œä»æš‚å­˜åŒºæ¢å¤\ngit reset HEAD readme.txtæš‚å­˜åŒºå›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬\ngit remote add origin git@github.com:michaelliao/learngit.git å…³è”è¿œç¨‹ä»“åº“\ngit push -u origin masterç¬¬ä¸€æ¬¡æ¨é€\ngit push origin masterä»¥åæ¨é€\ngit remote -væŸ¥çœ‹è¿œç¨‹ä»“åº“\ngit remote rm originè§£é™¤è¿œç¨‹ä»“åº“\ngit switch -c devåˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°çš„devåˆ†æ”¯\ngit switch masteråˆ‡æ¢åˆ°masteråˆ†æ”¯\ngit branchæŸ¥çœ‹åˆ†æ”¯\ngit branch -d devåˆ é™¤åˆ†æ”¯\ngit merge devå°†devåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸Š\ngit merge --no-ff -m &quot;merge with no-ff&quot; devåˆå¹¶åˆ†æ”¯å¹¶ç¦ç”¨å¿«é€Ÿåˆå¹¶\ngit stashæŠŠå½“å‰å·¥ä½œç°åœºå‚¨å­˜ä¸‹æ¥ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ¬¡æ¢å¤ç°åœºç»§ç»­å·¥ä½œ \ngit stash popæ¢å¤ç°åœºï¼Œå¹¶æŠŠstashå†…å®¹åˆ é™¤\ngit cherry-pick &lt;commit&gt;  å¦‚æœå½“å‰ä¹Ÿæœ‰bug å°±æŠŠåŸå…ˆçš„æäº¤å¤åˆ¶åˆ°è¿™å„¿ä¸€ä»½\nå‘½ä»¤git push origin &lt;tagname&gt;å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼›\nå‘½ä»¤git push origin --tagså¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼›\nå‘½ä»¤git tag -d &lt;tagname&gt;å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼›\nå‘½ä»¤git push origin :refs/tags/&lt;tagname&gt;å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚\n\n","slug":"gitå‘½ä»¤å¤‡å¿˜å½•","date":"2022-03-05T03:08:36.000Z","categories_index":"çŸ¥è¯†ç‚¹","tags_index":"git,å¤‡å¿˜å½•","author_index":"LIYUNFU"},{"id":"6f0689131b9192e324f81c8459e5c263","title":"ajaxåŸºæœ¬ä½¿ç”¨åŠè·¨åŸŸè¿‡ç¨‹","content":"ajax\næ˜¯ä»€ä¹ˆï¼šajaxæ˜¯Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥ JavaScript å’Œ XMlï¼‰çš„ç®€å†™\nå¼‚æ­¥ï¼šå¼‚æ­¥å¾—åƒæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œåœ¨ç­‰å¾…å“åº”çš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šé˜»å¡å½“å‰é¡µé¢ï¼Œæµè§ˆå™¨å¯ä»¥åšè‡ªå·±çš„äº‹æƒ…ã€‚ç›´åˆ°æˆåŠŸè·å–å“åº”åï¼Œæµè§ˆå™¨æ‰å¼€å§‹å¤„ç†å“åº”æ•°æ®\nAjax éœ€è¦æœåŠ¡å™¨ç¯å¢ƒï¼ŒéæœåŠ¡å™¨ç¯å¢ƒä¸‹ï¼Œå¾ˆå¤šæµè§ˆå™¨æ— æ³•æ­£å¸¸ä½¿ç”¨ajax\n\nXMLHttpRequest//åˆ›å»ºxhrå¯¹è±¡\nconst xhr=new XMLHttpRequest();\n\n//ç›‘å¬äº‹ä»¶ï¼Œå¤„ç†å“åº”\nxhr.addEventListener('readystatechange',()=>&#123;&#125;,false)\n//æˆ–\nxhr.onreadystatechange=()=>&#123;&#125;\n\n//å¤„ç†å“åº”\nxhr.onreadystatechange=()=>&#123;\n    if(xhr.readyState!==4)return;\n    \n    //http code\n    //è·å–åˆ°å“åº”åï¼Œå“åº”çš„å†…å®¹ä¼šè‡ªåŠ¨å¡«å……xhrå¯¹è±¡çš„å±æ€§\n    if(xhr.status>=200&amp;&amp;xhr.status&lt;300||xhr.status===304)&#123;\n        console.log(xhr.responseText)\n    &#125;\n&#125;\n\n/*\nreadystatechange äº‹ä»¶ç›‘å¬readyStateè¿™ä¸ªçŠ¶æ€çš„å˜åŒ–\n0: æœªåˆå§‹åŒ–ï¼Œå°šæœªè°ƒç”¨open()\n1: å¯åŠ¨ï¼Œå·²ç»è°ƒç”¨open() ä½†å°šæœªè°ƒç”¨send()\n2: å‘é€ï¼Œå·²ç»è°ƒç”¨send() ä½†å°šæœªæ¥æ”¶åˆ°å“åº”\n3: æ¥æ”¶ï¼Œå·²ç»æ¥æ”¶åˆ°éƒ¨åˆ†å“åº”æ•°æ®\n4: å®Œæˆï¼Œå·²ç»æ¥æ”¶åˆ°å…¨éƒ¨å“åº”æ•°æ®ï¼Œè€Œä¸”å·²ç»å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨äº†\n*/\n\n//å‡†å¤‡å‘é€è¯·æ±‚\nxhr.open(\n\t'HTTP æ–¹æ³• GETã€POSTã€PUTã€DELETE',\n    'åœ°å€ URL',\n    true //æ˜¯å¦å¼‚æ­¥\n)\n\n//å‘é€è¯·æ±‚ sendçš„å‚æ•°æ˜¯é€šè¿‡è¯·æ±‚ä½“æºå¸¦çš„æ•°æ® åªæœ‰postèƒ½æºå¸¦è¯·æ±‚ä½“\nxhr.send(null)\n\nå±æ€§\nresponseType å’Œ response å±æ€§\nxhr.onreadystatechange = () => &#123;\n  if (xhr.readyState != 4) return;\n  if ((xhr.status >= 200 &amp;&amp; xhr.status &lt; 300) || xhr.status === 304) &#123;\n    // æ–‡æœ¬å½¢å¼çš„å“åº”å†…å®¹\n    // responseText åªèƒ½åœ¨æ²¡æœ‰è®¾ç½® responseType æˆ–è€… responseType = '' æˆ– 'text' çš„æ—¶å€™æ‰èƒ½ä½¿ç”¨\n    // console.log('responseText:', xhr.responseText);\n    // å¯ä»¥ç”¨æ¥æ›¿ä»£ responseText\n    console.log('response:', xhr.response);\n    // console.log(JSON.parse(xhr.responseText));\n  &#125;\n&#125;;\n\nxhr.responseType = 'text';\ntimeoutå±æ€§\n//è®¾ç½®è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼ˆå•ä½msï¼‰ åœ¨å‘é€ä¹‹å‰\n xhr.open('GET', url, true);\n\nxhr.timeout = 10000;\n\nxhr.send(null);\nwithCredentialså±æ€§\n//æŒ‡å®šä½¿ç”¨ajaxå‘é€è¯·æ±‚æ—¶æ˜¯å¦æºå¸¦cookie\nxhr.open('GET', url, true);\n\nxhr.withCredentials = true;\n\nxhr.send(null);\n\næ–¹æ³•\nabort() ç»ˆæ­¢å½“å‰è¯·æ±‚\nxhr.open('GET', url, true);\nxhr.send(null);\nxhr.abort();\n//æ”¾åœ¨å‘é€ä¹‹å\nsetRequestHeader()è®¾ç½®è¯·æ±‚å¤´æ¶ˆæ¯\nxhr.setRequestHeader(å¤´éƒ¨å­—æ®µçš„åç§°, å¤´éƒ¨å­—æ®µçš„å€¼);\nxhr.setRequestHeader('Content-Type','application/json')\n\näº‹ä»¶\nloadäº‹ä»¶ å“åº”æ•°æ®å¯ç”¨æ—¶è§¦å‘\nxhr.onload=()=>&#123;&#125;\nxhr.addEventListener('load',()=>&#123;&#125;)\n//ä»£æ›¿readystatechange å¯ä»¥æœ‰æ•ˆå‡å°‘åˆ¤æ–­æ ‡è¯†ä¸º4 çš„çŠ¶æ€\nerroräº‹ä»¶ è¯·æ±‚å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘\nxhr.addEventListener(\n  'load',\n  () => &#123;\n    if ((xhr.status >= 200 &amp;&amp; xhr.status &lt; 300) || xhr.status === 304) &#123;\n      console.log(xhr.response);\n    &#125;\n  &#125;,\n  false\n);\nxhr.addEventListener(\n  'error',\n  () => &#123;\n    console.log('error');\n  &#125;,\n  false\n)\nabortäº‹ä»¶ è°ƒç”¨abortæ–¹æ³•åè§¦å‘\nxhr.addEventListener(\n  'abort',\n  () => &#123;\n    console.log('abort');\n  &#125;,\n  false\n);\n\nJsonä¸æ”¯æŒundefined\n\nJSON.parse()\nå°†jsonå­—ç¬¦ä¸²è½¬åŒ–ä¸ºJSçš„æ•°æ®ç±»å‹ï¼Œå¯¹è±¡æˆ–è€…æ•°ç»„\n\n\nJSON.stringify()\nå°†JSçš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯¹è±¡æˆ–è€…æ•°ç»„è½¬åŒ–ä¸ºJSONçš„å­—ç¬¦ä¸²\n\n\n\nCORS\nä½¿ç”¨CORS è·¨åŸŸçš„è¿‡ç¨‹\nâ‘  æµè§ˆå™¨å‘é€è¯·æ±‚\nâ‘¡ åç«¯åœ¨å“åº”å¤´ä¸­æ·»åŠ Access-Control-Allow-Origin å¤´ä¿¡æ¯\nâ‘¢ æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”\nâ‘£ å¦‚æœæ˜¯åŒåŸŸä¸‹çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¸ä¼šé¢å¤–åšä»€ä¹ˆï¼Œè¿™æ¬¡å‰åç«¯é€šä¿¡å°±åœ†æ»¡äº†\nâ‘¤ å¦‚æœæ˜¯è·¨åŸŸè¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šä»å“åº”å¤´ä¸­æŸ¥æ‰¾æ˜¯å¦å…è®¸è·¨åŸŸè®¿é—®\nâ‘¥ å¦‚æœå…è®¸è·¨åŸŸï¼Œé€šä¿¡åœ†æ»¡å®Œæˆ\nâ‘¦ å¦‚æœæ²¡æ‰¾åˆ°æˆ–æ­¥åŒ…å«æƒ³è¦è·¨åŸŸçš„åŸŸåï¼Œå°±ä¸¢å¼ƒå“åº”ç»“æœ\n\n\n","slug":"ajaxåŸºæœ¬ä½¿ç”¨åŠè·¨åŸŸè¿‡ç¨‹","date":"2022-03-05T03:06:30.000Z","categories_index":"çŸ¥è¯†ç‚¹","tags_index":"ajax,è·¨åŸŸ","author_index":"LIYUNFU"},{"id":"c123efc46127ac74fdea33d3d47fa7a0","title":"è¿œç¨‹æœåŠ¡å™¨å®‰è£…Dockerå¹¶é…ç½®æ•°æ®åº“","content":"Dockerå‘½ä»¤å®‰è£…docker-desktopç‚¹å‡»å‰å¾€å®˜ç½‘ä¸‹è½½ï¼Œä¸€ç›´ä¸‹ä¸€æ­¥å®‰è£…å³å¯\nå¦‚æœå‡ºç°é”™è¯¯ï¼Œè¯´æ˜wslå†…æ ¸æœªæ›´æ–°åˆ°wsl2ï¼Œç‚¹å‡»ä¸‹è½½å®‰è£…ä¹‹åé‡å¯docker-desktopå³å¯\næŸ¥çœ‹å·²å®‰è£…dockerç‰ˆæœ¬docker --version\nå®‰è£…docker-compose\n\n\n\n\n\n\n\n\nDocker Composeæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©å®šä¹‰å’Œå…±äº«å¤šå®¹å™¨åº”ç”¨ç¨‹åºã€‚ä½¿ç”¨Composeï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªYAMLæ–‡ä»¶æ¥å®šä¹‰æœåŠ¡ï¼Œå¹¶ä¸”ä½¿ç”¨å•ä¸ªå‘½ä»¤ï¼Œå¯ä»¥å¯åŠ¨æ‰€æœ‰å†…å®¹æˆ–å°†å…¶å…¨éƒ¨æ‹†è§£ã€‚ä½¿ç”¨ Composeçš„æœ€å¤§ä¼˜ç‚¹æ˜¯ï¼Œæ‚¨å¯ä»¥åœ¨æ–‡ä»¶ä¸­å®šä¹‰åº”ç”¨ç¨‹åºå †æ ˆï¼Œå°†å…¶ä¿ç•™åœ¨é¡¹ç›®å­˜å‚¨åº“çš„æ ¹ç›®å½•ä¸‹ï¼ˆç°åœ¨æ˜¯å—ç‰ˆæœ¬æ§åˆ¶çš„ï¼‰ï¼Œå¹¶è½»æ¾åœ°è®©å…¶ä»–äººèƒ½å¤Ÿä¸ºæ‚¨çš„é¡¹ç›®åšå‡ºè´¡çŒ®ã€‚æœ‰äººåªéœ€è¦å…‹éš†ä½ çš„å­˜å‚¨åº“å¹¶å¯åŠ¨æ’°å†™åº”ç”¨ã€‚äº‹å®ä¸Šï¼Œä½ ç°åœ¨å¯èƒ½ä¼šåœ¨GitHub/GitLabä¸Šçœ‹åˆ°ç›¸å½“å¤šçš„é¡¹ç›®åœ¨åšè¿™ä»¶äº‹ã€‚\nç®€å•æ¥è¯´å°±æ˜¯ docker-composeèƒ½å¤Ÿè®©ä½ è‡ªå®šä¹‰ä¸€ä¸ªYAMLé…ç½®æ–‡ä»¶ï¼Œèƒ½å¤Ÿä¸€é”®å¯åŠ¨æ‰€æœ‰ä»»åŠ¡å®‰è£…äº†docker desktopçš„è‡ªå¸¦docker-composeä¸éœ€è¦å†å®‰è£…äº†\n\nLinuxå®‰è£…æ•™ç¨‹ https://docs.docker.com/compose/install/\n\nå®‰è£…mongoä½¿ç”¨Docker Hubæœç´¢mongo ç‚¹å‡»è¿›å…¥mongo-Docker Hub\ndocker pull mongo:4  #å¯æ¥ç‰ˆæœ¬å·ä¹Ÿå¯ä¸æ¥\n\næŸ¥çœ‹æœ¬åœ°ä¸‹è½½äº†å“ªäº›é•œåƒdocker images\n\nè¿è¡Œmongoæ˜ å°„åˆ°å®¿ä¸»æœºä¸Šdocker run -d --name some-mongo -p 10050:27017 mongo:4\n\nè¿è¡ŒMYSQLæ˜ å°„åˆ°å®¿ä¸»æœºä¸Šdocker run --name some-mysql -e MYSQL_ROOT_PASSWORD&#x3D;123456 -p 10051:3306 -d mysql:5.6\n\næŸ¥çœ‹å½“å‰è¿è¡Œçš„æœåŠ¡docker ps\n\nåœ¨Linuxæœºå™¨ä¸­éœ€è¦æ”¾è¡Œç«¯å£ 10050æ–¹æ¡ˆä¸€ ç›´æ¥å…³é—­é˜²ç«å¢™#ubuntu\nservice ufw stop\n#centos\nservice firewalld stop\n\næ–¹æ¡ˆäºŒ æ”¾è¡ŒæŒ‡å®šç«¯å£# ubuntu\nufw allow Port ç«¯å£å·\n\n#centos\nfirewall-cmd --zone&#x3D;public --add-port&#x3D;10050&#x2F;tcp --permanent\n\né‡è½½é˜²ç«å¢™firewall-cmd --reload\n\næäº¤è‡ªå·±çš„imagesæäº¤åˆ°dockerä»“åº“docker commit idå·  liyunfu&#x2F;mysql:1.0\ndocker push liyunfu&#x2F;mysql:1.0 \n\næ‹‰å–è‡ªå·±çš„imagesdocker pull liyunfu&#x2F;mysql:1.0\n\nåˆ é™¤imagesdocker image rm idå·\n\n\n\ndocker-composeç¼–å†™YMLæ–‡ä»¶version: '3'\nservices:\n  mysql1:\n    image: mysql\n    environment:\n    - MYSQL_ROOT_PASSWORD=123456\n    ports:\n    - 10052:3306\n\n  mysql2:\n    image: mysql\n    environment:\n    - MYSQL_ROOT_PASSWORD=123456\n    ports:\n    - 10053:3306\n\næ‰§è¡ŒYMLdocker-compose up\n\n\n\nLinuxè¿æ¥è¿œç¨‹æœåŠ¡å™¨ssh -p 27822 root@server.bontor.cn   # ssh -p ç«¯å£  ç”¨æˆ·å@æœåŠ¡å™¨åœ°å€\n\næŸ¥çœ‹æ“ä½œç³»ç»Ÿç‰ˆæœ¬lsb_release -a\n\næŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬uname -a\n\næ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿç£ç›˜ç©ºé—´å ç”¨æƒ…å†µdf -Th  # åç¼€å˜ä¸ºä»¥Gä¸ºå•ä½ ä¸åŠ ä»¥å­—èŠ‚ä¸ºå•ä½\n\nç›®å½•ç»“æ„&#x2F;home  ä¸»ç›®å½•\n&#x2F;etc   è½¯ä»¶é…ç½®æ–‡ä»¶\n&#x2F;sys   ç³»ç»Ÿç›®å½•\n&#x2F;usr   ç³»ç»Ÿå¯æ‰§è¡Œæ–‡ä»¶\n&#x2F;var   æ—¥å¿—æ–‡ä»¶ ä¸æ–­å¢é•¿å¤§å°\n\nCPUå’Œå†…å­˜top #æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ å·²ç»cpuå ç”¨æƒ…å†µ å’Œå†…å­˜ä½¿ç”¨æƒ…å†µ\n\næ–‡æ¡£å‹ï¼šæ–‡ä»¶ç›¸å…³å‘½ä»¤(touchï¼Œcatï¼Œechoï¼Œrmï¼Œviï¼Œcd)touch test.txt \nvi test.txt\ncd &#x2F;home\ncat test.txt\necho &quot;123123&quot;&gt;&gt;test.txt  #ä¸¤ä¸ªç®­å¤´è¿½åŠ  ä¸€ä¸ªç®­å¤´è¦†ç›–  \n\nç¡¬ä»¶å‹ï¼šç£ç›˜/è¿›ç¨‹/æœåŠ¡/ç½‘ç»œæŸ¥çœ‹è¿›ç¨‹ps -ef | grep docker  #æŸ¥è¯¢å¹¶ä½¿ç”¨grepç­›é€‰ dockerè¿›ç¨‹\n\nå¼ºåˆ¶å…³é—­è¿›ç¨‹kill -9 è¿›ç¨‹çš„PID\n\næŸ¥çœ‹æœåŠ¡çš„çŠ¶æ€service sshd status\n\nå…³é—­æœåŠ¡service sshd stop  #å…³é—­sshdæœåŠ¡\n\né‡å¯æœåŠ¡service sshd restart\n\nåŠŸèƒ½å‹ï¼šå‹ç¼©/è§£å‹ï¼Œä¸‹è½½ï¼Œè¿œç¨‹ä¸‹è½½wget èµ„æºåœ°å€\n\nè§£å‹tar zxvf app.tar.gz\n\nå‹ç¼©tar zcvf app.tar.gz app\n\n\n\nä¿®æ”¹é»˜è®¤SSHç«¯å£æŸ¥çœ‹é»˜è®¤ç›‘å¬ç«¯å£netstat -anlp | grep sshd\n\nä¿®æ”¹é»˜è®¤ç›‘å¬ç«¯å£vi &#x2F;etc&#x2F;ssh&#x2F;sshd_config\n#åˆ é™¤#  ä¿®æ”¹port 22 ä¸º port 27001\n\n#centosä¿®æ”¹ä¹‹åå¿…é¡»è¿è¡Œ\nsemanage port -a -t ssh_port_t -p tcp 27001   \n#æç¤ºæ²¡æœ‰è¯¥å‘½ä»¤\nyum whatprovides semanage\n#æ‰¾åˆ°æ‹¥æœ‰å‘½ä»¤çš„åŒ…å®‰è£…\nyum install -y policycoreutils-python\n#æŸ¥çœ‹ç«¯å£\nsemanage port -l | grep ssh\n\n#åˆ é™¤ç«¯å£\nsemanage port -d -t ssh_port_t -p tcp 22\n","slug":"è¿œç¨‹æœåŠ¡å™¨å®‰è£…Dockerå¹¶é…ç½®æ•°æ®åº“","date":"2022-03-05T03:02:36.000Z","categories_index":"å®æˆ˜","tags_index":"æ•°æ®åº“,Docker","author_index":"LIYUNFU"},{"id":"417b0753cea51755f39f949bc1137c41","title":"Webpack5æ­å»ºæ ‡å‡†å¼€å‘ç¯å¢ƒ","content":"Webpackå®‰è£…&amp;ä½¿ç”¨å®‰è£…npm install webpack webpack-cli -D\n\nä½¿ç”¨æ–¹å¼æ–¹å¼ä¸€.&#x2F;node_modules&#x2F;.bin&#x2F;webpack --version\n\næ–¹å¼äºŒnpx webpack --version\n\n\n\nå…¥å£(entry)\n\n\n\n\n\n\n\n\n**å…¥å£èµ·ç‚¹(entry point)*æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾*çš„å¼€å§‹ã€‚è¿›å…¥å…¥å£èµ·ç‚¹åï¼Œwebpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰ä¾èµ–çš„ã€‚\nå‡ºå£(output)\n\n\n\n\n\n\n\n\noutput å±æ€§å‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundlesï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ï¼Œé»˜è®¤å€¼ä¸º ./dist\nconst config = &#123;\n    entry: './src/index.js',\n    output: &#123;\n        filename: 'bundle.js',\n        path: path.join(__dirname, './dist')\n    &#125;\n&#125;\n\n\nloader\n\n\n\n\n\n\n\n\nloader è®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶ï¼ˆwebpack è‡ªèº«åªç†è§£ JavaScriptï¼‰ã€‚loader å¯ä»¥å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œç„¶åä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›ï¼Œå¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚\nè®©webpackå¤„ç†CSSæ–‡ä»¶\n\n\n\n\n\n\n\n\nwebpack æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¥ç¡®å®šåº”è¯¥æŸ¥æ‰¾å“ªäº›æ–‡ä»¶ï¼Œå¹¶å°†å…¶æä¾›ç»™æŒ‡å®šçš„ loaderã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»¥ .css ç»“å°¾çš„å…¨éƒ¨æ–‡ä»¶ï¼Œéƒ½å°†è¢«æä¾›ç»™ style-loader å’Œ css-loaderã€‚\n\nä¸‹è½½ä¾èµ–loader\nnpm install --save-dev css-loader\nnpm install --save-dev style-loader\nç¼–å†™è§„åˆ™ï¼ŒåŒ¹é…å“ªäº›åç¼€ä½¿ç”¨å“ªäº›loader  webpack.config.js\nmodule:&#123;\n    rules:[\n        &#123;\n            test:/\\.css$/,\n            use:['style-loader','css-loader']\n        &#125;\n    ]\n&#125;\nloaderé“¾å¼ä¼ é€’ï¼Œå…ˆä»åé¢çš„loaderå¼€å§‹\n\n\nè®©webpackå¤„ç†scssæ–‡ä»¶\nä¸‹è½½ä¾èµ–loader\nnpm install sass-loader node-sass -D\nç¼–å†™è§„åˆ™\nmodule:&#123;\n    rules:[\n        &#123;\n            test:/\\.(scss|sass)$/,\n            use:['style-loader','css-loader','sass-loader']\n        &#125;\n    ]\n&#125;,\n\nfile-loader å’Œ url-loader å¯ä»¥æ¥æ”¶å¹¶åŠ è½½ä»»ä½•æ–‡ä»¶ï¼Œç„¶åå°†å…¶è¾“å‡ºåˆ°æ„å»ºç›®å½•ã€‚\nè®©webpackå¤„ç†å›¾ç‰‡\nä¸‹è½½ä¾èµ–loader\nnpm install file-loader -D\nç¼–å†™è§„åˆ™\n&#123;\n    test: /\\.(png|jpg|svg|gif)$/,\n    use:['file-loader']\n&#125;\nå¯ä»¥åœ¨index.jsä¸­å¼•å…¥\nimport Icon from './icon.jpg';\n\n//å°†å›¾åƒæ·»åŠ åˆ°æˆ‘ä»¬ç°æœ‰çš„div\nconst myIcon = new Image();\nmyIcon.src = Icon;\nelement.appendChild(myIcon);\nä¹Ÿå¯åœ¨index.scssä¸­å¼•å…¥\n.hello&#123;\n  color: red;\n  background: url(\"./icon.jpg\");\n&#125;\n\nè®©webpackå¤„ç†å­—ä½“\nä¸‹è½½ä¾èµ–loader\nnpm install file-loader -D\nç¼–å†™è§„åˆ™\n&#123;\n    test:/\\.(woff|woff2|eot|ttf|otf)$/,\n    use:['file-loader']\n&#125;\nåœ¨index.scssä¸­å¼•å…¥\n@font-face &#123;\n  font-family: 'Myfont';\n  src: url(\"./myfont.TTF\") format('ttf');\n  font-weight: 600;\n  font-style: normal;\n&#125;\n.hello&#123;\n  color: red;\n  font-family: Myfont;\n&#125;\n\nè®©webpackå¤„ç†CSVã€TSV ã€XML\nä¸‹è½½ä¾èµ–loader\nnpm install csv-loader xml-loader -D\nç¼–å†™è§„åˆ™\n&#123;\n    test:/\\.(csv|tsv)$/,\n    use:['csv-loader']\n&#125;,\n&#123;\n    test:/\\.xml$/,\n    use:['xml-loader']\n&#125;\nåœ¨srcä¸‹åˆ›å»ºdata.xmlå¹¶åœ¨index.jsä¸­å¼•å…¥\n\ndata.xml\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n&lt;note>\n    &lt;to>mary&lt;/to>\n    &lt;from>john&lt;/from>\n    &lt;heading>reminder&lt;/heading>\n    &lt;body>call cindy on tuesday&lt;/body>\n&lt;/note>\n\n\nindex.js\n\nimport Data from './data.xml';\n\nconsole.log(Data);\n\næ’ä»¶(plugins)\n\n\n\n\n\n\n\n\nloader è¢«ç”¨äºè½¬æ¢æŸäº›ç±»å‹çš„æ¨¡å—ï¼Œè€Œæ’ä»¶åˆ™å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ï¼Œä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©ï¼Œä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ã€‚æ’ä»¶æ¥å£åŠŸèƒ½æå…¶å¼ºå¤§ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å„ç§å„æ ·çš„ä»»åŠ¡ã€‚\nä½¿ç”¨pluginså¤„ç†html\nä¸‹è½½ä¾èµ–plugins\nnpm install html-webpack-plugin -D\nç”±äºæ’ä»¶å¯ä»¥æºå¸¦å‚æ•°/é€‰é¡¹ï¼Œæ‰€ä»¥å¿…é¡»åœ¨webpacké…ç½®ä¸­ï¼Œå‘pluginså±æ€§ä¼ å…¥newå®ä¾‹\n\n```js//å¤„ç†srcä¸‹çš„htmlæ–‡ä»¶plugins: [\n    new HtmlWebpackPlugin(&#123;template: &quot;./src/index.html&quot;&#125;)\n\n],\n\n## æ¨¡å¼(mode)\n\n&gt; é€šè¿‡é€‰æ‹© &#96;development&#96; æˆ– &#96;production&#96; ä¹‹ä¸­çš„ä¸€ä¸ªï¼Œæ¥è®¾ç½® &#96;mode&#96; å‚æ•°ï¼Œä½ å¯ä»¥å¯ç”¨ç›¸åº”æ¨¡å¼ä¸‹çš„ webpack å†…ç½®çš„ä¼˜åŒ–\n\n&#96;&#96;&#96;jsx\nmodule.exports &#x3D; &#123;\n  mode: &#39;production&#39;\n&#125;;\n\næ¨¡å—çƒ­æ›¿æ¢è¿‡ç¨‹åœ¨åº”ç”¨ç¨‹åºä¸­ç½®æ¢æ¨¡å—\nåº”ç”¨ç¨‹åºä»£ç è¦æ±‚HMR runtimeæ£€æŸ¥æ›´æ–°\nHMR runtime(å¼‚æ­¥)ä¸‹è½½æ›´æ–°ï¼Œç„¶åé€šçŸ¥åº”ç”¨ç¨‹åºä»£ç \nåº”ç”¨ç¨‹åºä»£ç è¦æ±‚HMR runtimeåº”ç”¨æ›´æ–°\nHMR runtime(åŒæ­¥)åº”ç”¨æ›´æ–°\n\nåœ¨ç¼–è¯‘å™¨ä¸­é™¤äº†æ™®é€šèµ„æºï¼Œç¼–è¯‘å™¨éœ€è¦å‘å‡ºupdateï¼Œä»¥å…è®¸æ›´æ–°ä¹‹å‰çš„ç‰ˆæœ¬åˆ°æ–°çš„ç‰ˆæœ¬ï¼Œupdateç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š\n\næ›´æ–°åçš„manifest(JSON)\nä¸€ä¸ªæˆ–å¤šä¸ªæ›´æ–°åçš„chunk(JavaScript)\n\né…ç½®æ ‡å‡†å¼€å‘ç¯å¢ƒni babel-loader @babel&#x2F;core @babel&#x2F;preset-env @babel&#x2F;plugin-transform-runtime -D\nni @babel&#x2F;runtime \n\nåˆ›å»º.babelrc&#123;\n  \"presets\": [\n    \"@babel/preset-env\"\n  ],\n  \"plugins\": [\n    \"@babel/plugin-transform-runtime\"\n  ]\n&#125;\n\nåœ¨webpack.config.jsä¸­rulesæ·»åŠ è§„åˆ™&#123;\n    test:/\\.js$/,\n    loader: \"babel-loader\"\n&#125;\n\n\n\n\n\n\n\n\n\n\nç¬¬ä¸€é‡Œç¨‹ç¢‘\nè‡ªåŠ¨æ¸…ç†distç›®å½•webpack5.xä¹‹ååœ¨è¾“å‡ºä¸­æ·»åŠ clean:trueå³å¯\noutput: &#123;\n    filename: &#39;bundle.js&#39;,\n    path: path.join(__dirname, &#39;.&#x2F;dist&#39;),\n    clean: true\n&#125;,\n\n\nCleanWebpackPlugin does not clean in Webpack 5 - fsou (nilmap.com)\nå¤åˆ¶èµ„æºåˆ°distç›®å½•\nå¼•å…¥å¯¹åº”æ’ä»¶\n\nnpm install --save-dev copy-webpack-plugin\n\n\nç¼–å†™æ–°çš„pluginè¯­æ³•ï¼Œæ—§è¯­æ³•æœ‰é—®é¢˜ï¼Œå› ä¸ºCopyWebpackPluginæ„é€ å‡½æ•°è¿˜æ”¯æŒå…¶ä»–é€‰é¡¹\n\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\n\nnew CopyWebpackPlugin(\n    &#123;\n        patterns: [\n            &#123;\n                from: path.join(__dirname, 'assets')\n                to: 'assets'\n            &#125;\n        ]\n    &#125;\n)\n\n\n\n\n\n\n\n\n\n\n\né”™è¯¯ä¿¡æ¯ï¼š[webpack-cli] Invalid options object. Copy Plugin has been initialized using an options object that does not match the API schema.\nå¯¹jså’Œcsså‹ç¼© ä¸‘åŒ–JSå’ŒCSSå‹ç¼©csså’Œjs\nå®‰è£…ä¾èµ–\nni css-minimizer-webpack-plugin -D\nni terser-webpack-plugin -D   &#x2F;&#x2F;è®©ä»–æ¥å¢å¼º...æ‰©å±•è¿ç®—ç¬¦\nni mini-css-extract-plugin -D  &#x2F;&#x2F;æ”¯æŒå¤´éƒ¨å•ç‹¬å¼•ç”¨ä¸è®¸å®‰è£…\nå¼•å…¥å¯¹åº”æ’ä»¶ \nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\nconst CssMinimizerPlugin = require('css-minimizer-webpack-plugin');\nconst TerserJSPlugin=require('terser-webpack-plugin')\nrules\n&#123;\n    test: /\\.(scss|sass)$/,\n    use: [MiniCssExtractPlugin.loader, 'css-loader', 'sass-loader']\n&#125;,\noptimization\noptimization: &#123;\n    minimize: true,  //è®¾ç½®å¼€å‘ç¯å¢ƒå¯ç”¨ï¼Œè‹¥ä¸è®¾ç½®é»˜è®¤falseåªèƒ½æ”¯æŒç”Ÿäº§ç¯å¢ƒ\n    minimizer: [\n        `...`,   //ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å¢å¼º\n        new CssMinimizerPlugin(),\n      \tnew TerserJSPlugin()\n    ]\n&#125;,\nplugins\nnew MiniCssExtractPlugin(&#123;\n    filename: '[name].css',\n    chunkFilename:'[id].css',\n&#125;),\nnew MiniCssExtractPlugin(),\nnew TerserJSPlugin()\n\n","slug":"Webpack5æ­å»ºæ ‡å‡†å¼€å‘ç¯å¢ƒ","date":"2022-03-05T03:00:17.000Z","categories_index":"å®æˆ˜","tags_index":"Webpack,å‰ç«¯å·¥ç¨‹åŒ–","author_index":"LIYUNFU"},{"id":"fe45cec90ec11b72673f92c41490ffd7","title":"åŸºäºkoa-generatorå®ç°éªŒè¯ç åŠŸèƒ½","content":"ç¬¬ä¸€æ­¥\nå…¨å±€å®‰è£…koa-generator\n\n```shellnpm install -g koa-generator\n\n- ç”ŸæˆåŸºæœ¬æ¡†æ¶\n\n- &#96;&#96;&#96;shell\n  koa2 apiname    \n  # ä½¿ç”¨koa2åé¢æ¥ç›®å½•åå³å¯è‡ªåŠ¨åˆ›å»ºåä¸ºapinameçš„ç›®å½•\næ ¹æ®å‘½ä»¤è¡Œæç¤ºï¼Œè¿›å…¥åˆ›å»ºçš„æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œnpm install\n\n```shellcd apinamenpm install\n\n- ä¸‹è½½ä¾èµ–å®Œæˆä¹‹åï¼Œå¯ä»¥å¯åŠ¨çœ‹çœ‹\n\n- &#96;&#96;&#96;shell\n  npm run start\næ‰“å¼€æµè§ˆå™¨è®¿é—®3000ç«¯å£\n\n```shellhttp://localhost:3000\n\n- å¦‚æœæµè§ˆå™¨ä¸­é¡µé¢æ˜¾ç¤ºå‡ºæ•°æ®å³åˆ›å»ºæˆåŠŸï¼Œå¯ä»¥è¿›å…¥ä¸‹ä¸€æ­¥\n\n\n\n### ç¬¬äºŒæ­¥\n\n- åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º&#96;src&#96;ç›®å½•\n\n- å°†&#96;public&#96; ã€&#96;routes&#96; ã€&#96;views&#96; ã€&#96;app.js&#96;æ‹–å…¥&#96;src&#96;ç›®å½•\n\n- ä¿®æ”¹&#96;bin&#x2F;www&#96;ä¸­çš„&#96;var app &#x3D; require(&#39;..&#x2F;app&#39;);&#96;ä¸º&#96;var app &#x3D; require(&#39;..&#x2F;src&#x2F;app&#39;);&#96;\n\n- æ”¹é€ åç›®å½•\n\n- &#96;&#96;&#96;shell\n  |- bin\n    |- www\n  |-node_modules\n  |-src\n    |-public\n    |-routes\n    |-views\n    |-app.js\n  |-package.json\nåœ¨srcç›®å½•ä¸‹åˆ›å»ºç›®å½•controller\n\n\nç¬¬ä¸‰æ­¥\nå®‰è£…ç”¨äºèšåˆrouterçš„åŒ…\n\nå®‰è£…koa-combine-routersåŒ…\n\n```shellnpm install koa-combine-routers\n\n- å®‰è£…&#96;svg-captcha&#96;  åŒ… ç”¨äºç”Ÿæˆ&#96;svg&#96;éªŒè¯ç \n\n- &#96;&#96;&#96;shell\n  npm install svg-captcha\nåœ¨controllerç›®å½•ä¸‹åˆ›å»ºpublicController.js ç”¨äºç”ŸæˆéªŒè¯ç  å¹¶è¾“å…¥ä»¥ä¸‹ä»£ç \n\n```jsconst svgCaptcha = require(â€œsvg-captchaâ€);\nfunction  publicController(ctx) {  //åˆ›å»ºä¸€ä¸ªæ–°éªŒè¯ç svgå¯¹è±¡  const newCaptcha = svgCaptcha.create({\nsize: 4,  //éªŒè¯ç é•¿åº¦\nignoreChars: &quot;0o1il&quot;, //æ’é™¤æ˜“æ··æ·†çš„å‡ ä¸ª0o1ilå­—ç¬¦\ncolor: true,   //éªŒè¯ç æœ‰é¢œè‰²\nnoise: Math.floor(Math.random() * 5), //å¹²æ‰°çº¿\nwidth: 150,  \nheight: 50,\n\n  });  ctx.body = {\nmsg: newCaptcha.data,\n\n  };}\nmodule.exports = publicController;\n\n- åœ¨&#96;routes&#96;ç›®å½•ä¸‹æ–°å»º&#96;publicRouter.js &#96; è¾“å…¥ä»¥ä¸‹ä»£ç \n\n- &#96;&#96;&#96;js\n  const router &#x3D; require(&quot;koa-router&quot;)();\n  const getCaptcha &#x3D; require(&quot;..&#x2F;controller&#x2F;PublicController&quot;);\n  \n  router.get(&quot;&#x2F;getCaptcha&quot;, getCaptcha);\n  \n  module.exports &#x3D; router;\nåœ¨routesç›®å½•ä¸‹æ–°å»ºroutes.js è¾“å…¥ä»¥ä¸‹ä»£ç \n\n```jsconst combineRoutes=require(â€˜koa-combine-routersâ€™)\nconst aRoutes=require(â€˜./publicRouterâ€™)\nmodule.exports=combineRoutes(  aRoutes   //å¦‚æœæœ‰å¤šä¸ª å¯ä»¥å¼•å…¥å¤šä¸ªï¼Œå¹¶å†™åœ¨æ­¤å¤„ç”¨é€—å·éš”å¼€)\n\n- åœ¨&#96;app.js&#96;å¼•å…¥&#96;routes.js&#96; å¹¶ä½¿ç”¨\n\n- &#96;&#96;&#96;js\n  const router &#x3D; require(&quot;.&#x2F;routes&#x2F;routes&quot;);\n  app.use(router())\nå®ç°è·¨åŸŸè¯·æ±‚ï¼Œä¸‹è½½å¹¶å¼•å…¥koa2-corsåŒ…\n\n```shellnpm install koa2-cors\nconst cors = require(â€œkoa2-corsâ€);\n//corsé…ç½®app.use(  cors({\norigin: &quot;http://localhost:8080&quot;, //å‰ç«¯origin\ncredentials: true, //å…è®¸è·¨åŸŸå¸¦cookie\n\n  }));\n\n\n\n### ç¬¬å››æ­¥\n\nä½¿ç”¨&#96;vue&#96;é¡¹ç›®ï¼Œå°è¯•è¯·æ±‚éªŒè¯ç   ä¸‹è½½&#96;axios&#96;åŒ…\n\n&#96;&#96;&#96;vue\n&lt;template&gt;\n\t&lt;div id&#x3D;&quot;app&quot;&gt;\n    &lt;div class&#x3D;&quot;svg&quot; @click&#x3D;&quot;getCaptcha&quot; v-html&#x3D;&quot;svg&quot;&gt;éªŒè¯ç &lt;&#x2F;div&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nconst axios &#x3D; require(&#39;axios&#39;)\nexport default &#123;\n  name: &#39;app&#39;,\n  data () &#123;\n    return &#123;\n      svg: &#39;&#39;\n    &#125;\n  &#125;,\n  mounted () &#123;\n    this.getCaptcha()\n  &#125;,\n  methods: &#123;\n    getCaptcha () &#123;\n      axios.get(&#39;http:&#x2F;&#x2F;localhost:3000&#x2F;getCaptcha&#39;).then((res) &#x3D;&gt; &#123;\n        if (res.status &#x3D;&#x3D;&#x3D; 200) &#123;\n          this.svg &#x3D; res.data.msg\n        &#125;\n      &#125;)\n    &#125;\n  &#125;\n&#125;\n&lt;&#x2F;script&gt;\n\n\n","slug":"åŸºäºkoa-generatorå®ç°éªŒè¯ç åŠŸèƒ½","date":"2022-03-05T02:56:54.000Z","categories_index":"å®æˆ˜","tags_index":"Koa","author_index":"LIYUNFU"},{"id":"2dd921bc2e0b67b467ed4b61518bdc3d","title":"MongoDBçš„CRUD","content":"MongoDBåˆè§\nDockerä¸­MongoDBæ•°æ®çš„å¤‡ä»½ä¸æ¢å¤#å¤‡ä»½\ndocker exec -it é•œåƒå mongodump -h åœ°å€ -u root -p example -o å¤‡ä»½åˆ°çš„åœ°å€\ndocker exec -it some-mongo mongodump -h localhost -u root -p example -o &#x2F;temp&#x2F;test\n\n\n\næ˜¯ä»€ä¹ˆ\nå­˜å‚¨æ–‡æ¡£çš„éå…³ç³»å‹æ•°æ®åº“\n\n\n\nå¯ä»¥å°†å¤šä¸ªä¸åŒçš„å†…å®¹æ·»åŠ åˆ°ä¸€ä¸ªé›†åˆé‡Œé¢ï¼Œå¦‚æœæƒ³è¦æ·»åŠ å­—æ®µï¼Œç›´æ¥æ·»åŠ ï¼Œä¸ä¼šæŠ¥é”™\n\nMongoDBçš„CRUDåˆ›å»ºæ–‡æ¡£åˆ›å»ºä¸€ä¸ªæ–‡æ¡£\nè‡ªå·±æä¾›æ–‡æ¡£ä¸»é”®_idå€¼ï¼Œå®¹æ˜“å‡ºç°é”™è¯¯ï¼Œå¯ä»¥çœç•¥æ–‡æ¡£_idå­—æ®µï¼Œè®©å®ƒè‡ªåŠ¨ç”Ÿæˆï¼Œcollectionä¸ºé›†åˆ\n\ndb.collection.insertOne(\n\t&#123;\n\t_id: &quot;account1&quot;,\n\tname: &quot;alice&quot;,\n\tbalance: 100\n\t&#125;\n)\n\ndb.collection.insertOne(\n\t&#123;\n\tname: &quot;alice&quot;,\n\tbalance: 100\n\t&#125;\n)\n\nåˆ›å»ºå¤šä¸ªæ–‡æ¡£\norderedå‚æ•°ç”¨æ¥å†³å®šmongoDBæ˜¯å¦è¦æŒ‰é¡ºåºæ¥å†™å…¥è¿™äº›æ–‡æ¡£\nordered:false è¡¨ç¤ºå¯ä»¥æ‰“ä¹±æ–‡æ¡£å†™å…¥é¡ºåºï¼Œä»¥ä¾¿ä¼˜åŒ–å†™å…¥çš„æ“ä½œ\nordered:true(é»˜è®¤å€¼)æŒ‰é¡ºåºæ‰§è¡Œï¼Œå¦‚æœç¬¬ä¸€æ¡æ’å…¥æ•°æ®é”™è¯¯ï¼Œé‚£ä¹ˆç¬¬äºŒå¤©ä¸ä¼šæ‰§è¡Œ\n\n\n\ndb.accounts.insertMany(\n\t[\n\t\t&#123;\n\t\tname: &quot;alice1&quot;,\n\t\tbalance: 100\n\t\t&#125;,\n\t\t&#123;\n\t\tname: &quot;alice2&quot;,\n\t\tbalance: 200\n\t\t&#125;\n\t]\t,\n\t&#123;\n\t\tordered:false  &#x2F;&#x2F;å¯é€‰\n\t&#125;\n)\n\n\nåˆ›å»ºå•ä¸ªæˆ–å¤šä¸ªæ–‡æ¡£\nsaveå‘½ä»¤è¿è¡Œæ—¶è°ƒç”¨insert   db.collection.save \n\ndb.accounts.insert(\n\t&#123;\n\tname: &quot;alice1&quot;,\n\tbalance: 100\n\t&#125;,\n)\n\ndb.accounts.insert(\n\t[\n\t\t&#123;\n\t\tname: &quot;alice1&quot;,\n\t\tbalance: 100\n\t\t&#125;,\n\t\t&#123;\n\t\tname: &quot;alice2&quot;,\n\t\tbalance: 200\n\t\t&#125;\n\t]\t\n)\n\n\n\ninsertOne ã€insertMany ã€insertçš„åŒºåˆ«\næ­£ç¡®å’Œé”™è¯¯è¿”å›çš„ç»“æœä¸åŒ\n\ninsertOneå’ŒinsertManyå‘½ä»¤ä¸æ”¯æŒdb.collection.explain()å\n\ninsertæ”¯æŒdb.collection.explainå‘½ä»¤\n\n\nè¯»å–æ–‡æ¡£è¯»å–å…¨éƒ¨æ–‡æ¡£\næ—¢ä¸ç­›é€‰ï¼Œä¹Ÿä¸æŠ•å°„\ndb.accounts.find()\næ›´æ¸…æ™°çš„æ˜¾ç¤ºæ–‡æ¡£\ndb.accounts.find().pretty()\n\nåŒ¹é…æŸ¥è¯¢\nè¯»å–aliceçš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;name: &quot;alice&quot;&#125;)\nè¯»å–aliceçš„ä½™é¢ä¸º100å…ƒçš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;name: &quot;alice&quot;,balance: 100&#125;)\nè¯»å–å¤åˆä¸»é”®çš„æ–‡æ¡£\ndb.accounts.find(&#123;&quot;_id.type&quot;: &quot;savings&quot;&#125;)\n\næ¯”è¾ƒæ“ä½œç¬¦\n\n\næ“ä½œç¬¦\nå«ä¹‰\n\n\n\n$eq\nç›¸ç­‰æŸ¥è¯¢å€¼çš„æ–‡æ¡£\n\n\n$ne\nä¸ç­‰æŸ¥è¯¢å€¼çš„æ–‡æ¡£\n\n\n$gt\nå¤§äºæŸ¥è¯¢å€¼çš„æ–‡æ¡£\n\n\n$gte\nå¤§äºæˆ–ç­‰äºæŸ¥è¯¢å€¼çš„æ–‡æ¡£\n\n\n$lt\nå°äºæŸ¥è¯¢å€¼çš„æ–‡æ¡£\n\n\n$lte\nå°äºæˆ–ç­‰äºæŸ¥è¯¢å€¼çš„æ–‡æ¡£\n\n\n$in\nä¸ä»»ä¸€æŸ¥è¯¢å€¼ç›¸ç­‰çš„æ–‡æ¡£\n\n\n$nin\nä¸ä»»ä½•æŸ¥è¯¢å€¼éƒ½ä¸ç­‰çš„æ–‡æ¡£\n\n\n\nè¯»å–ä¸å±äºaliceçš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;name: &#123;$ne:&quot;alice&quot;&#125;&#125;)\nè¯»å–ä½™é¢å¤§äº500çš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;balance: &#123;$gt:500&#125;&#125;)\nè¯»å–ç”¨æˆ·åå­—æ’åœ¨fredä¹‹å‰çš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;name: &#123;$lt:&quot;fred&quot;&#125;&#125;)\nè¯»å–aliceå’Œcharlieçš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;name: &#123;$in:[&quot;alice&quot;,&quot;charlie&quot;]&#125;&#125;)\nè¯»å–æ—¢ä¸æ˜¯aliceå’Œcharlieçš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;name: &#123;$nin:[&quot;alice&quot;,&quot;charlie&quot;]&#125;&#125;)\n\né€»è¾‘æ“ä½œç¬¦\n\n\né€»è¾‘æ“ä½œç¬¦\nå«ä¹‰\n\n\n\n$not\nç­›é€‰æ¡ä»¶ä¸æˆç«‹çš„æ–‡æ¡£\n\n\n$and\nå¤šä¸ªæ¡ä»¶å…¨éƒ¨æˆç«‹çš„æ–‡æ¡£\n\n\n$or\nè‡³å°‘ä¸€ä¸ªç­›é€‰æ¡ä»¶æˆç«‹çš„æ–‡æ¡£\n\n\n$nor\nå¤šä¸ªç­›é€‰æ¡ä»¶å…¨éƒ¨ä¸æˆç«‹çš„æ–‡æ¡£\n\n\n\nè¯»å–ä½™é¢ä¸å°äº500çš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£  \ndb.accounts.find(&#123;balance:&#123;$not:&#123;$lt:500&#125;&#125;&#125;)\nè¯»å–ä½™é¢å¤§äº100å¹¶ä¸”ç”¨æˆ·å§“åæ’åœ¨fredä¹‹åçš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;$and:[&#123;balance:&#123;$gt:100&#125;&#125;,&#123;name:&#123;$gt:&quot;fred&quot;&#125;&#125;]&#125;)\nè¯»å–ä½™é¢å¤§äº100å¹¶ä¸”å°äº500çš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;balance:&#123;$lt:500,$gt:100&#125;&#125;&#125;)\nè¯»å–å±äºaliceæˆ–è€…charlieçš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;\n\t$or:[\n\t\t&#123;name:&#123;$eq:&quot;alice&quot;&#125;&#125;,\n\t\t&#123;name:&#123;$eq:&quot;charlie&quot;&#125;&#125;\n\t]\n&#125;)\nè¯»å–æ—¢ä¸å±äºaliceå’Œcharlieä¸”ä½™é¢ä¸å°äº100çš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;\n\t$nor:[\n\t\t&#123;name:&quot;alice&quot;&#125;,\n\t\t&#123;name:&quot;charlie&quot;&#125;,\n\t\t&#123;balance:&#123;$lt:100&#125;&#125;\n\t]\n&#125;)\n\nå­—æ®µæ“ä½œç¬¦\n\n\næ“ä½œç¬¦\nå«ä¹‰\n\n\n\n$exists\nåŒ…å«æŸ¥è¯¢å­—æ®µçš„æ–‡æ¡£\n\n\n$type\nå­—æ®µç±»å‹ç¬¦åˆæŸ¥è¯¢å€¼çš„æ–‡æ¡£\n\n\n\nè¯»å–åŒ…å«è´¦æˆ·ç±»å‹å­—æ®µçš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;&quot;_id.type&quot;:&#123;$exists:true&#125;&#125;)\nè¯»å–æ–‡æ¡£ä¸»é”®æ˜¯å­—ç¬¦ä¸²çš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;_id:&#123;$type:&quot;string&quot;&#125;&#125;)\n\næ•°ç»„æ“ä½œç¬¦\n\n\næ“ä½œç¬¦\nå«ä¹‰\n\n\n\n$all\næ•°ç»„å­—æ®µä¸­åŒ…å«æ‰€æœ‰æŸ¥è¯¢å€¼çš„æ–‡æ¡£\n\n\n$elemMatch\næ•°ç»„å­—æ®µä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªå€¼æ»¡è¶³ç­›é€‰æ¡ä»¶çš„æ–‡æ¡£\n\n\n\nè¯»å–è”ç³»åœ°å€ä½äºä¸­å›½åŒ—äº¬çš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;contact:&#123;$all:[&quot;china&quot;,&quot;beijing&quot;]&#125;&#125;)\nè¯»å–è”ç³»ç”µè¯èŒƒå›´åœ¨100000å’Œ200000ä¹‹é—´çš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;contact:&#123;$elemMatch:&#123;$gt:&quot;100000&quot;,$lt:&quot;200000&quot;&#125;&#125;&#125;)\n\næ­£åˆ™æ“ä½œç¬¦\nè¯»å–ç”¨æˆ·å§“åä»¥cæˆ–è€…jå¼€å¤´çš„é“¶è¡Œè´¦å·æ–‡æ¡£\ndb.accounts.find(&#123;name:&#123;$in:[&#x2F;^c&#x2F;,&#x2F;^j&#x2F;]&#125;&#125;)\nè¯»å–ç”¨æˆ·å§“ååŒ…å«LIE(ä¸åŒºåˆ†å¤§å°å†™)çš„é“¶è¡Œè´¦æˆ·æ–‡æ¡£\ndb.accounts.find(&#123;name:&#123;$regex:&#x2F;LIE&#x2F;,$options:&#39;i&#39;&#125;&#125;)\n\næ–‡æ¡£æ¸¸æ ‡\næŸ¥è¯¢è¯­å¥é»˜è®¤è¿”å›çš„æ˜¯æ–‡æ¡£æ¸¸æ ‡ï¼Œé»˜è®¤åªæ˜¾ç¤ºå‰äºŒåæ¡\n\næ¸¸æ ‡å‡½æ•°var cursor=db.accounts.find()\n\n\ncursor.hasNext() cursor.next()\n\n```jsvar myCursor=db.accounts.find({name:â€aliceâ€})while(myCursor.hasNext()){  printjson(myCursor.next())}  //åªè¦è¿˜æœ‰å°±æŠŠå‰©ä½™æ–‡æ¡£æ‰“å°å‡ºæ¥\n\n- &#96;cursor.forEach()&#96;\n\n- &#96;&#96;&#96;js\n  var myCursor&#x3D;db.accounts.find(&#123;name:&quot;alice&quot;&#125;)\n  myCursor.forEach(printjson)   &#x2F;&#x2F;æ¯ç¯‡æ–‡æ¡£è¢«æ‰“å°\ncursor.limit()\n\ncursor.skip()\n\n```jsdb.accounts.find({name:â€aliceâ€}).limit(1)  //åªè¿”å›ç¬¬ä¸€ç¯‡æ–‡æ¡£db.accounts.find({name:â€aliceâ€}).skip(1)   //è·³è¿‡ç¬¬ä¸€ç¯‡ åªæ˜¾ç¤ºç¬¬äºŒç¯‡å’Œç¬¬ä¸‰ç¯‡\n\n- &#96;cursor.count()&#96;\n\n- &#96;&#96;&#96;js\n  db.accounts.find(&#123;name:&quot;alice&quot;&#125;).limit(1).count()   &#x2F;&#x2F;è¿”å›3\n  db.accounts.find(&#123;name:&quot;alice&quot;&#125;).limit(1).count(true)  &#x2F;&#x2F;è¿”å›1\n  &#x2F;&#x2F;é»˜è®¤ä¸æ¥æ”¶limitå’Œskipè¿”å›çš„ç»“æœ\ncursor.sort()\n\næŒ‰ç…§ä½™é¢ä»å¤§åˆ°å°ï¼Œç”¨æˆ·åæŒ‰å­—æ¯é¡ºåºæ’åº\n\n```jsdb.accounts.find().sort({balance:-1,name:1})\n\n\n\n#### æ¸¸æ ‡æ³¨æ„äº‹ä»¶\n\n- &#96;cursor.skip()&#96;åœ¨&#96;cursor.limit()&#96;ä¹‹å‰æ‰§è¡Œ\n- &#96;cursor.sort()&#96;åœ¨&#96;cursor.skip()&#96;å’Œ&#96;cursor.limit()&#96;ä¹‹å‰æ‰§è¡Œ\n\n\n\n#### æ–‡æ¡£æŠ•å½±\n\n- åªè¿”å›é“¶è¡Œè´¦æˆ·æ–‡æ¡£ä¸­çš„ç”¨æˆ·å§“å\n\n- &#96;&#96;&#96;js\n  db.accounts.find(&#123;&#125;,&#123;name:1&#125;)\n\n\nåªè¿”å›é“¶è¡Œè´¦æˆ·æ–‡æ¡£ä¸­çš„ç”¨æˆ·å§“å(ä¸åŒ…å«æ–‡æ¡£ä¸»é”®)\n\ndb.accounts.find(&#123;&#125;,&#123;name:1,_id:0&#125;)\n\n\né™¤äº†æ–‡æ¡£ä¸»é”®ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¸å¯ä»¥åœ¨æŠ•å½±æ–‡æ¡£ä¸­æ··åˆä½¿ç”¨åŒ…å«å’Œä¸åŒ…å«è¿™ä¸¤ç§æŠ•å½±æ“ä½œè¦ä¹ˆåœ¨æŠ•å½±æ–‡æ¡£ä¸­åˆ—å‡ºæ‰€æœ‰åº”è¯¥åŒ…å«çš„å­—æ®µï¼Œè¦ä¹ˆåˆ—å‡ºæ‰€æœ‰ä¸åº”è¯¥åŒ…å«çš„å­—æ®µ\n\n\næ›´æ–°æ–‡æ¡£","slug":"MongoDBçš„CRUD","date":"2022-03-05T02:54:11.000Z","categories_index":"å®æˆ˜","tags_index":"MongoDB,æ•°æ®åº“,Mongoose","author_index":"LIYUNFU"},{"id":"b9b69e275d0ea3fd4374ffde1f72e980","title":"JSXå¦‚ä½•\"æ‘‡èº«ä¸€å˜\"æˆä¸ºDOMçš„","content":"JSXä»£ç å¦‚ä½•å˜æˆDOMæŠ›å‡ºé—®é¢˜\n  JSXçš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Œå®ƒå’ŒJSä¹‹é—´åˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ\n\n  ä¸ºä»€ä¹ˆè¦ç”¨JSXï¼Ÿä¸ç”¨ä¼šæœ‰ä»€ä¹ˆåæœï¼Ÿ\n\n  JSXèƒŒåçš„åŠŸèƒ½æ¨¡å—æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªåŠŸèƒ½æ¨¡å—éƒ½åšäº†é‚£äº›äº‹\n\n\nå°è¯•è§£ç­”\n  JSXçš„æœ¬è´¨æ˜¯JSçš„æ‹“å±•ï¼Œä½†æ˜¯æµè§ˆå™¨ä¸èƒ½å¤©ç„¶æ”¯æŒJSXï¼Œæ‰€ä»¥éœ€è¦Babelå°†å®ƒç¼–è¯‘ä¸ºReact.createElement()çš„è°ƒç”¨ï¼Œè¯­æ³•ç³–è¿”å›ä¸€ä¸ªå«React Elementçš„JSå¯¹è±¡\n\n\n\n  æ—¢ç„¶æœ€åç¼–è¯‘ä¸ºReact.createElement()çš„è°ƒç”¨ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨React.createElement()å‘¢ï¼Ÿ\nç­”ï¼š\n  ç”±äºå®ç°åŒæ ·çš„åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼ŒJSXä»£ç å±‚æ¬¡åˆ†æ˜ï¼Œè¯­è¨€ç®€ç»ƒï¼Œè€ŒReact.createElement()ä»£ç ç¹é‡\n  JSXè¯­æ³•ç³–å…è®¸å‰ç«¯å¼€å‘è€…ä½¿ç”¨æˆ‘ä»¬æœ€ä¸ºç†Ÿæ‚‰çš„ç±»HTMLæ ‡ç­¾è¯­æ³•æ¥åˆ›å»ºè™šæ‹ŸDOMï¼Œåœ¨é™ä½å­¦ä¹ æˆæœ¬çš„åŒæ—¶ï¼Œä¹Ÿæå‡äº†ç ”å‘æ•ˆç‡å’Œç ”å‘ä½“éªŒ\n\n\n\n\\\n\n  \n\n\\\ncreateElementè§£æ&#x2F;**\n  Reactçš„åˆ›å»ºå…ƒç´ æ–¹æ³•\n *&#x2F;\n\nfunction createElement(type, config, children) &#123;\n  &#x2F;&#x2F; propNameç”¨äºå‚¨å­˜åé¢éœ€è¦ç”¨åˆ°çš„å…ƒç´ å±æ€§\n  var propName;\n  &#x2F;&#x2F; propsç”¨äºå‚¨å­˜å…ƒç´ å±æ€§çš„é”®å€¼å¯¹é›†åˆ\n  var props &#x3D; &#123;&#125;;\n  &#x2F;&#x2F; keyã€refã€selfã€sourceå‡ä¸ºReactå…ƒç´ çš„å±æ€§\n  var key &#x3D; null;\n  var ref &#x3D; null;\n  var self &#x3D; null;\n  var source &#x3D; null;\n\n  &#x2F;&#x2F; config å¯¹è±¡ä¸­å­˜å‚¨çš„æ˜¯å…ƒç´ çš„å±æ€§\n  if (config !&#x3D; null) &#123;\n    &#x2F;&#x2F; è¿›æ¥ä¹‹åçš„ç¬¬ä¸€ä»¶äº‹ï¼Œä¾æ¬¡å¯¹refã€keyã€selfå’Œsourceå±æ€§èµ‹å€¼\n    if (hasValidRef(config)) &#123;\n      ref &#x3D; config.ref;\n\n      &#123;\n        warnIfStringRefCannotBeAutoConverted(config);\n      &#125;\n    &#125;\n\n    &#x2F;&#x2F; æ­¤å¤„å°†key å€¼å­—ç¬¦ä¸²åŒ–\n    if (hasValidKey(config)) &#123;\n      key &#x3D; &#39;&#39; + config.key;\n    &#125;\n\n    self &#x3D; config.__self &#x3D;&#x3D;&#x3D; undefined ? null : config.__self;\n    source &#x3D; config.__source &#x3D;&#x3D;&#x3D; undefined ? null : config.__source; &#x2F;&#x2F; Remaining properties are added to a new props object\n\n    &#x2F;&#x2F; æ¥ç€å°±æ˜¯è¦æŠŠconfigé‡Œé¢çš„å±æ€§éƒ½ä¸€ä¸ªä¸€ä¸ªæŒªåˆ°propså¯¹è±¡é‡Œé¢\n    for (propName in config) &#123;\n      if (hasOwnProperty.call(config, propName) &amp;&amp; !RESERVED_PROPS.hasOwnProperty(propName)) &#123;\n        props[propName] &#x3D; config[propName];\n      &#125;\n    &#125;\n  &#125;\n\n  &#x2F;&#x2F; childrenLength æŒ‡çš„æ˜¯å½“å‰å…ƒç´ çš„å­å…ƒç´ çš„ä¸ªæ•°ï¼Œå‡å»çš„2æ˜¯typeå’Œconfigä¸¤ä¸ªå‚æ•°å ç”¨çš„é•¿åº¦\n  var childrenLength &#x3D; arguments.length - 2;\n\n  &#x2F;&#x2F; å¦‚æœæŠ›å»typeå’Œconfigï¼Œå°±åªå‰©ä¸‹ä¸€ä¸ªå‚æ•°ï¼Œä¸€èˆ¬æ„å‘³ç€æ–‡æœ¬èŠ‚ç‚¹å‡ºç°äº†\n  if (childrenLength &#x3D;&#x3D;&#x3D; 1) &#123;\n    &#x2F;&#x2F; ç›´æ¥æŠŠè¿™ä¸ªå€¼èµ‹å€¼ç»™props.children\n    props.children &#x3D; children;\n  &#125; else if (childrenLength &gt; 1) &#123;\n    &#x2F;&#x2F; å¤„ç†åµŒå¥—å¤šä¸ªå­å…ƒç´ çš„æƒ…å†µ\n    &#x2F;&#x2F; å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼ŒæŠŠæ‰€æœ‰å‰©ä½™å¯¹è±¡å‚æ•°éƒ½éå†ä¼ å…¥ï¼Œæœ€åæŠŠæ•°ç»„èµ‹å€¼ç»™props.childrenå¯¹è±¡\n    var childArray &#x3D; Array(childrenLength);\n\n    for (var i &#x3D; 0; i &lt; childrenLength; i++) &#123;\n      childArray[i] &#x3D; arguments[i + 2];\n    &#125;\n\n    &#123;\n      if (Object.freeze) &#123;\n        Object.freeze(childArray);\n      &#125;\n    &#125;\n\n    props.children &#x3D; childArray;\n  &#125; &#x2F;&#x2F; Resolve default props\n\n  &#x2F;&#x2F; å¤„ç†defaultProps\n  if (type &amp;&amp; type.defaultProps) &#123;\n    var defaultProps &#x3D; type.defaultProps;\n\n    for (propName in defaultProps) &#123;\n      if (props[propName] &#x3D;&#x3D;&#x3D; undefined) &#123;\n        props[propName] &#x3D; defaultProps[propName];\n      &#125;\n    &#125;\n  &#125;\n\n  &#123;\n    if (key || ref) &#123;\n      var displayName &#x3D; typeof type &#x3D;&#x3D;&#x3D; &#39;function&#39; ? type.displayName || type.name || &#39;Unknown&#39; : type;\n\n      if (key) &#123;\n        defineKeyPropWarningGetter(props, displayName);\n      &#125;\n\n      if (ref) &#123;\n        defineRefPropWarningGetter(props, displayName);\n      &#125;\n    &#125;\n  &#125;\n  &#x2F;&#x2F; æœ€åè¿”å›ä¸€ä¸ªè°ƒç”¨ReactElementæ‰§è¡Œæ–¹æ³•ï¼Œå¹¶ä¼ å…¥åˆšæ‰å¤„ç†è¿‡çš„å‚æ•°\n  return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n&#125;\n\nå‚æ•°è¯´æ˜ï¼š\n  type:ç”¨äºæ ‡è¯†èŠ‚ç‚¹çš„ç±»å‹ï¼Œå®ƒå¯ä»¥æ˜¯HTMLæ ‡ç­¾å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯Reactç»„ä»¶ç±»å‹\n\n  config: ä»¥å¯¹è±¡å½¢å¼ä¼ å…¥ï¼Œç»„ä»¶æ‰€æœ‰çš„å±æ€§éƒ½ä¼šä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨åœ¨configå¯¹è±¡ä¸­\n\n  children: ä»¥å¯¹è±¡å½¢å¼ä¼ å…¥ï¼Œå®ƒè®°å½•çš„æ˜¯ç»„ä»¶æ ‡ç­¾ä¹‹é—´åµŒå¥—çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€å­èŠ‚ç‚¹â€â€å­å…ƒç´ â€\n\n\nä¾‹å­DOMç»“æ„\n&lt;ul className&#x3D;&quot;list&quot; id&#x3D;&quot;lis&quot;&gt;\n  &lt;li key&#x3D;&#123;1&#125;&gt;&lt;&#x2F;li&gt;\n  &lt;li key&#x3D;&#123;2&#125;&gt;&lt;&#x2F;li&gt;\n&lt;&#x2F;ul&gt;\n\nReact.createElementè¯­æ³•ç³–\nReact.createElement(&quot;ul&quot;, &#123;\n  &#x2F;&#x2F; ä¼ å…¥å±æ€§é”®å€¼å¯¹\n  className: &quot;list&quot;,\n  id: &quot;lis&quot;\n  &#x2F;&#x2F; ä»ç¬¬ä¸‰ä¸ªå…¥å‚å¼€å§‹å¾€åï¼Œä¼ å…¥çš„å‚æ•°éƒ½æ˜¯children\n&#125;, React.createElement(&quot;li&quot;, &#123;\n  key: 1\n&#125;), React, createElement(&quot;li&quot;, &#123;\n  key: 2\n&#125;))\n\næµç¨‹\n å¤„ç†keyã€refã€selfã€sourceå››ä¸ªå±æ€§å€¼\n\n éå†configï¼Œç­›é€‰å‡ºå¯ä»¥æè¿›propsé‡Œçš„å±æ€§\n\n æå–å­å…ƒç´ ï¼Œæ¨å…¥props.children\n\n æ ¼å¼åŒ–defaultProps\n\n å°†ä»¥ä¸Šæ•°æ®ä½œä¸ºå…¥å‚ï¼Œå‘èµ·ReactElementè°ƒç”¨\n\n\næ€»ç»“createElementå°±åƒæ˜¯å¼€å‘è€…å’ŒReactElementè°ƒç”¨ä¹‹é—´çš„ä¸€ä¸ªâ€œè½¬æ¢å™¨â€ï¼Œåœ¨å¼€å‘è€…å‡ºæ¥æ”¶ç›¸å¯¹ç®€å•çš„å‚æ•°ï¼Œç„¶å¹´åå°†è¿™äº›å‚æ•°æŒ‰ç…§ReactElementçš„é¢„æœŸåšä¸€å±‚æ ¼å¼åŒ–ï¼Œæœ€ç»ˆé€šè¿‡è°ƒç”¨ReactElementæ¥å®ç°å…ƒç´ çš„åˆ›å»º\nReactElementè§£ævar ReactElement &#x3D; function (type, key, ref, self, source, owner, props) &#123;\n  var element &#x3D; &#123;\n    &#x2F;&#x2F; ç”¨æ¥æ ‡è¯†è¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªReactElement\n    $$typeof: REACT_ELEMENT_TYPE,\n    &#x2F;&#x2F; å†…ç½®å±æ€§èµ‹å€¼\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n    &#x2F;&#x2F; è®°å½•åˆ›å»ºè¯¥å…ƒç´ çš„ç»„ä»¶\n    _owner: owner\n  &#125;;\n\n  return element;\n&#125;;\n\nReactElementåªåšäº†ä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯ç»„è£…ï¼ŒæŠŠä¼ å…¥çš„å‚æ•°æŒ‰ç…§ä¸€å®šçš„è§„èŒƒï¼Œç»„è£…è¿›elementå¯¹è±¡é‡Œï¼Œå¹¶æŠŠå®ƒè¿”å›ç»™React.createElementï¼Œæœ€ç»ˆReact.createElementåˆæŠŠå®ƒäº¤å›åˆ°å¼€å‘è€…æ‰‹ä¸­\n\nrenderåˆè¯†function render(element, container, callback) &#123;\n  if (!isValidContainer(container)) &#123;\n    &#123;\n      throw Error( &quot;Target container is not a DOM element.&quot; );\n    &#125;\n  &#125;\n\n  &#123;\n    var isModernRoot &#x3D; isContainerMarkedAsRoot(container) &amp;&amp; container._reactRootContainer &#x3D;&#x3D;&#x3D; undefined;\n\n    if (isModernRoot) &#123;\n      error(&#39;You are calling ReactDOM.render() on a container that was previously &#39; + &#39;passed to ReactDOM.createRoot(). This is not supported. &#39; + &#39;Did you mean to call root.render(element)?&#39;);\n    &#125;\n  &#125;\n\n  return legacyRenderSubtreeIntoContainer(null, element, container, false, callback);\n&#125;\n\nå‚æ•°è¯´æ˜\n  element:éœ€è¦æ¸²æŸ“çš„å…ƒç´ (ReactElement)\n\n  container:å…ƒç´ æŒ‚è½½çš„ç›®æ ‡å®¹å™¨(ä¸€ä¸ªçœŸå®DOM)\n\n  callback: å›è°ƒå‡½æ•°ï¼Œå¯é€‰å‚æ•°ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†æ¸²æŸ“ç»“æŸåçš„é€»è¾‘\n\n\næ€»ç»“\n","slug":"JSXå¦‚ä½•å˜æˆDOM","date":"2022-02-27T09:46:50.000Z","categories_index":"Reactæºç ","tags_index":"React,æºç ","author_index":"LIYUNFU"},{"id":"bdee22d1805781f30b666804c7635df8","title":"flexå¸ƒå±€","content":"flexå®¹å™¨å±æ€§æ”¹å˜ä¸»è½´æ–¹å‘flex-directionflex-direction: rowé»˜è®¤\nflex-direction: row-reverse\nflex-direction: column\nflex-direction: column-reverse\næ¢è¡Œflex-wrapflex-wrap: nowrapé»˜è®¤\nflex-wrap: wrap\nflex-wrap: wrap-reverse\nç¼©å†™flex-flow: [flex-direction] [flex-wrap]flex-flow: column wrap\nä¸»è½´å¯¹é½justify-contentjustify-content: flex-starté»˜è®¤\njustify-content: flex-end\njustify-content: space-around å¹³å‡åˆ†é…  æ¯ä¸ªæ–¹å—çš„margin-left+margin-right+widthç›¸ç­‰\njustify-content: space-between ä¸¤è¾¹æ²¡æœ‰ç©ºéš™ ä¸­é—´ç©ºéš™å¹³å‡åˆ†é…\njustify-content: space-evenlyæ‰€æœ‰ç©ºéš™å¹³å‡åˆ†é…\näº¤å‰è½´æ•´ä½“å¯¹é½align-content å¿…é¡»è¦æœ‰æŠ˜è¡Œå±æ€§æ‰èƒ½ç”Ÿæ•ˆ  \nalign-content: stretché»˜è®¤\nå¦‚æœäº¤å‰è½´ä¸Šçš„å®½åº¦æœªè®¾ç½®åˆ™è‡ªåŠ¨æ‹‰ä¼¸å¡«æ»¡äº¤å‰è½´\n\n\n\nè‹¥äº¤å‰è½´ä¸Šçš„å®½åº¦å·²ç»è®¾ç½®åˆ™æ•ˆæœå’Œflex-startä¸€æ ·\n\n\n\n\nalign-content: flex-start\nalign-content: flex-end\nalign-content: center\nå…¶ä»–å±æ€§ space-around``space-between``space-evenlyå’Œä¸»è½´å±æ€§ç±»ä¼¼äº¤å‰è½´æ¯ä¸€è¡Œå¯¹é½ align-itemsalign-items: stretché»˜è®¤align-items: flex-start\nalign-items: flex-end\nalign-items: center\nalign-items: baseline å†…å®¹ä»¥å°å†™xä¸ºåŸºçº¿å¯¹é½\nå†…è”ä¸å—çš„ä¸Šä¸‹å·¦å³å±…ä¸­å¸ƒå±€å†…è”ä¸Šä¸‹å·¦å³å±…ä¸­\nå—çº§ä¸Šä¸‹å·¦å³å±…ä¸­\nä¸å®šé¡¹å±…ä¸­å¸ƒå±€\nå‡åˆ†åˆ—å¸ƒå±€\nå­é¡¹åˆ†ç»„å¸ƒå±€å¤æ‚æ¨¡å¼ ä½¿ç”¨divåµŒå¥—\nç®€å•æ–¹å¼ margin-right: auto\nflexå­é¡¹å±æ€§æ‰©å±•æ¯”ä¾‹flex-growä¸€ä¸ªå­å…ƒç´ æ—¶\né»˜è®¤å€¼ä¸º0\n\næ¯”ä¾‹å€¼å¤§äºç­‰äº1ï¼Œæ²¾æ»¡å‰©ä½™æ‰€æœ‰ç©ºé—´\n\næ¯”ä¾‹å€¼ä¸º0.5ï¼Œå å‰©ä½™ç©ºé—´çš„ä¸€åŠ\n\n\n\n\nå¤šä¸ªå­å…ƒç´ æ—¶\nåªæœ‰ä¸€ä¸ªæœ‰flex-growæ—¶\n\n\n\nä¸¤ä¸ªéƒ½æœ‰flex-growæ—¶\n\n\n\nå½“å¤šä¸ªå…ƒç´ åŠ èµ·æ¥å°äº1æ—¶ï¼Œè¿˜æœ‰å‰©ä½™ç©ºé—´\n\n\næ”¶ç¼©æ¯”ä¾‹flex-shrink\né»˜è®¤å€¼ä¸º1ï¼Œæº¢å‡ºéƒ¨åˆ†å®Œå…¨æ”¶ç¼©ï¼Œå°æ•°æŒ‰æ¯”ä¾‹æ”¶ç¼©\n\n\né»˜è®¤æƒ…å†µå½“æœ‰ä¸¤ä¸ªåŠä»¥ä¸Šéœ€è¦æ”¶ç¼©æ—¶\nmainwidth: 400\n\nbox1width: 200\n\nbox2width: 300\n\nåˆ™ï¼Œé»˜è®¤æƒ…å†µä¸‹æ”¶ç¼©å æ‰€å æ¯”ä¾‹æŒ‰ç…§å®½åº¦è®¡ç®—\n\nbox1æ”¶ç¼©åæ‰€å å°ºå¯¸ï¼š200-2/5*(200+300-400)=160\n\nbox2æ”¶ç¼©åæ‰€å å°ºå¯¸ï¼š300-3/5*(200+300-400)=240\n\n\n\nä¸åŒæ¯”ä¾‹æ”¶ç¼©æ—¶\nmainwidth: 400\n\nbox1width: 200\n\nbox2width: 300\n\nåˆ™ï¼Œæ¯”ä¾‹æƒ…å†µä¸‹æ”¶ç¼©å æ‰€å æ¯”ä¾‹æŒ‰ç…§å®½åº¦è®¡ç®—\n\nbox1æ”¶ç¼©åæ‰€å å°ºå¯¸ï¼š200-4/7*(200+300-400)=142\n\nbox2æ”¶ç¼©åæ‰€å å°ºå¯¸ï¼š300-3/7*(200+300-400)=257\n\n\n\næŒ‡å®šflexå…ƒç´ åœ¨ä¸»è½´ä¸Šçš„åˆå§‹å¤§å°flex-basis\nå½“ä¸»è½´æ–¹å‘æ˜¯æ°´å¹³æ—¶ï¼Œè¦†ç›–æ°´å¹³å®½åº¦\n\nå½“ä¸»è½´æ–¹å‘æ˜¯å‚ç›´æ—¶ï¼Œè¦†ç›–å‚ç›´é«˜åº¦\n\nå¯é€‰å€¼ï¼š0% auto 200px 100%  0  \n\n\n\nflex-basis: autoé»˜è®¤å€¼\nflex-basis: 0è¡¨ç¤ºå æ®æœ€å°å®½åº¦ï¼Œä¼šç«–èµ·æ¥\nflexç¼©å†™flex: 1\nflex: 0\nflex: auto\næ”¹å˜æŸä¸ªå­é¡¹çš„æ’åºä½ç½®order\norder: 0å½“å‰ä½ç½®ä¿æŒä¸å˜\n\norder: -1å‘å‰æ’\n\norder: 1å‘åæ‹\n\n\n\næ§åˆ¶å•ç‹¬æŸä¸€ä¸ªå…ƒç´ äº¤å‰è½´çš„å¸ƒå±€align-self\nç­‰é«˜å¸ƒå±€ å†…å®¹å¡«å……ä¸¤è¾¹ä¹Ÿç­‰é«˜\nä¸¤åˆ—æˆ–ä¸‰åˆ—å¸ƒå±€  ä¸¤è¾¹å›ºå®šå®½åº¦ ä¸­é—´è‡ªé€‚åº”\nSticky Footerå¸ƒå±€ å†…å®¹ç©ºé¡µè„šåœ¨æœ€åº•éƒ¨ å†…å®¹æ»¡ä¹Ÿåœ¨æœ€åº•éƒ¨\næº¢å‡ºé¡¹å¸ƒå±€\n\n","slug":"flexå¸ƒå±€","date":"2022-02-12T13:46:33.000Z","categories_index":"","tags_index":"CSS,å¸ƒå±€","author_index":"LIYUNFU"},{"id":"6436dbae418d43dcb9001fac6bd76e96","title":"å¸ƒå±€ä¸­çš„å°ºå¯¸ä¸ä½ç½®","content":"ç›¸å¯¹é•¿åº¦å•ä½&emsp;&emsp;ç›¸å¯¹é•¿åº¦å•ä½ç›¸å¯¹äºå…¶ä»–ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚çˆ¶å…ƒç´ çš„å­—ä½“å¤§å°ï¼Œæˆ–è€…è§†å›¾ç«¯å£çš„å¤§å°ã€‚ä½¿ç”¨ç›¸å¯¹å•ä½çš„å¥½å¤„æ˜¯ï¼Œç»è¿‡ä¸€äº›ä»”ç»†çš„è§„åˆ’ï¼Œæ‚¨å¯ä»¥ä½¿æ–‡æœ¬æˆ–å…¶ä»–å…ƒç´ çš„å¤§å°ä¸é¡µé¢ä¸Šçš„å…¶ä»–å†…å®¹ç›¸å¯¹åº”ã€‚ä»¥ä¸‹åˆ—å‡ºäº†å¸¸è§ç›¸å¯¹å•ä½ã€‚\n\n\n\nå•ä½\nåç§°\n\n\n\nem\nåœ¨font-sizeä¸­ä½¿ç”¨æ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ çš„å­—ä½“å¤§å°ï¼Œåœ¨å…¶ä»–å±æ€§ä¸­ä½¿ç”¨æ˜¯ç›¸å¯¹äºè‡ªèº«çš„å­—ä½“å¤§å°\n\n\nex\nå­—ç¬¦â€œxâ€çš„é«˜åº¦\n\n\nch\næ•°å­—â€œ0â€çš„å®½åº¦\n\n\nrem\næ ¹å…ƒç´ çš„å­—ä½“å¤§å°\n\n\nlh\nå…ƒç´ çš„line-height\n\n\nvw\nè§†çª—å®½åº¦çš„1%\n\n\nvh\nè§†çª—é«˜åº¦çš„1%\n\n\nvmin\nè§†çª—è¾ƒå°å°ºå¯¸çš„1%\n\n\nvmax\nè§†å›¾å¤§å°ºå¯¸çš„1%\n\n\nmargin-topä¼ é€’çš„ç°è±¡ä¸è§£å†³æ–¹æ¡ˆç°è±¡ï¼šä¸ºå­å…ƒç´ è®¾ç½®margin-topåï¼Œä¼šæŠŠçˆ¶å…ƒç´ ä¸€å—å¸¦ä¸‹æ¥&lt;div class=\"box1\">\n  &lt;div class=\"box2\">&lt;/div>\n&lt;/div>\n\n.box1&#123;\n  width: 200px;\n  height: 200px;\n  background: pink;\n&#125;\n.box2&#123;\n  width: 100px;\n  height: 100px;\n  background: skyblue;\n  margin-top: 30px;\n&#125;\n\n\nè§£å†³æ–¹æ¡ˆ1ï¼š ä¸ºçˆ¶å…ƒç´ åŠ è¾¹æ¡†\nè§£å†³æ–¹æ¡ˆ2ï¼šæ ¼å¼åŒ–ä¸Šä¸‹æ–‡BFC\nè§£å†³æ–¹æ¡ˆ3ï¼šä½¿ç”¨paddingæ›¿ä»£margin\nè‡ªé€‚åº”ç›’æ¨¡å‹çš„ç‰¹æ€§å½“å­ç›’å­ä¸å†™å®½åº¦çš„æ—¶å€™ï¼Œæ·»åŠ paddingï¼Œmarginï¼Œborderç­‰ï¼Œå‘å†…ç¼©\n\næ ‡å‡†ç›’æ¨¡å‹å’Œæ€ªå¼‚ç›’æ¨¡å‹\næ ‡å‡†ç›’æ¨¡å‹content-boxï¼šwidthï¼Œheight=content\næ€ªå¼‚ç›’æ¨¡å‹border-boxï¼šwidthï¼Œheight=content+padding+border\n\nå¸¸è§æ¸…é™¤æµ®åŠ¨çš„æ–¹æ¡ˆclearå±æ€§ æ¸…é™¤ä¸Šä¸‹\nBFC æ¸…é™¤çˆ¶ç»„ä»¶å¡Œé™·\nç©ºæ ‡ç­¾.clearfix::after{}.clearfix::after&#123;\n\tcontent:\"\";\n  clear:both;\n  display:block;\n&#125;\n\næµ®åŠ¨ç‰¹æ€§æ³¨æ„ç‚¹\nåªä¼šå½±å“åé¢çš„å…ƒç´ \n\næ–‡æœ¬ä¸ä¼šè¢«æµ®åŠ¨å…ƒç´ è¦†ç›–\n\nå…·å¤‡å†…è”ç›’å­ç‰¹æ€§ï¼šå®½åº¦ç”±å†…å®¹å†³å®š\n\nå…·å¤‡å—çº§ç›’å­ç‰¹æ€§ï¼šæ”¯æŒæ‰€æœ‰æ ·å¼\n\næµ®åŠ¨æ”¾ä¸ä¸‹ï¼Œä¼šè‡ªåŠ¨æ¢è¡Œ\n\n\nå®šä½ç›¸å¯¹å®šä½positionï¼šralative\nç›¸å¯¹å®šä½çš„å…ƒç´ æ˜¯åœ¨æ–‡æ¡£ä¸­çš„æ­£å¸¸ä½ç½®åç§»ç»™å®šçš„å€¼\n\nä¸å½±å“å…¶ä»–å…ƒç´ å¸ƒå±€\n\nç›¸å¯¹äºè‡ªèº«è¿›è¡Œåç§»\n\n\nç»å¯¹å®šä½positionï¼šabsolute\nè„±ç¦»æ ‡å‡†æ–‡æ¡£æµï¼Œä¸å æ®ç©ºé—´\n\nå…·å¤‡å†…è”ç›’å­ç‰¹æ€§ï¼šå®½åº¦ç”±å†…å®¹å†³å®š\n\nå…·å¤‡å—çº§ç›’å­ç‰¹æ€§ï¼šæ”¯æŒæ‰€æœ‰æ ·å¼\n\nç»å¯¹å®šä½å…ƒç´ ç›¸å¯¹äºæœ€è¿‘çš„éstaticç¥–å…ˆå…ƒç´ å®šä½ï¼Œå½“è¿™æ ·çš„ç¥–å…ˆå…ƒç´ ä¸å­˜åœ¨æ—¶ï¼Œåˆ™ç›¸å¯¹äºå¯è§†åŒºå®šä½\n\n\nå›ºå®šå®šä½positionï¼šfixedç²˜æ€§å®šä½positionï¼šsticky\nç²˜æ€§å®šä½å¯ä»¥è¢«è®¤ä¸ºæ˜¯ç›¸å¯¹å®šä½å’Œå›ºå®šå®šä½çš„æ··åˆï¼Œå…ƒç´ åœ¨è·¨è¶Šç‰¹å®šé˜ˆå€¼å‰ä¸ºç›¸å¯¹å®šä½ï¼Œä¹‹åä¸ºå›ºå®šå®šä½\n\nè¯¦è§£displayå±æ€§display-outsideå¤–éƒ¨å€¼å®šä¹‰è‡ªèº«å…ƒç´ çš„å¤–éƒ¨è¡¨ç°ï¼Œè€Œä¸å½±å“å…¶å†…çš„å­å…ƒç´ \n\nblockï¼šè¡¨ç¤ºå—çº§ç›’å­\ninlineï¼šè¡¨ç¤ºå†…è”ç›’å­\n\ndisplay-insideå†…éƒ¨å€¼å®šä¹‰å­å…ƒç´ å¸ƒå±€çš„\n\ntableï¼šå¸¦æœ‰å†…éƒ¨è¡¨æ ¼å¸ƒå±€çš„å—çº§ç›’å­\n\nflexï¼šå¸¦æœ‰å†…éƒ¨å¼¹æ€§å¸ƒå±€çš„å—çº§ç›’å­\n\ngridï¼šå¸¦æœ‰å†…éƒ¨ç½‘æ ¼å¸ƒå±€çš„å—çº§ç›’å­\n\n\nglobalå…¨å±€å€¼\ninheritï¼šç»§æ‰¿çˆ¶å…ƒç´ çš„displayå±æ€§\n\ninitialï¼šä¸ç®¡çˆ¶å…ƒç´ æ€ä¹ˆè®¾å®šï¼Œæ¢å¤åˆ°æµè§ˆå™¨æœ€åˆæ—¶çš„displayå±æ€§\n\nunsetï¼šunsetæ··åˆäº†inheritå’Œinitialï¼Œå¦‚æœçˆ¶å…ƒç´ è®¾å€¼äº†ï¼Œå°±ç”¨çˆ¶å…ƒç´ çš„è®¾å®šï¼Œå¦‚æœçˆ¶å…ƒç´ æ²¡æœ‰è®¾å€¼ï¼Œå°±ç”¨æµè§ˆå™¨çš„ç¼ºçœè®¾å®š\n\n\nä¹¦å†™æ¨¡å¼ä¸é€»è¾‘å±æ€§writing-modeä¹¦å†™æ¨¡å¼\nhorizontal-tbï¼šæ°´å¹³æ–¹å‘è‡ªä¸Šè€Œä¸‹çš„ä¹¦å†™æ–¹å¼\n\nvertical-lrï¼šå‚ç›´æ–¹å‘è‡ªå·¦è€Œå³çš„ä¹¦å†™æ–¹å¼\n\nvertical-rlï¼šå‚ç›´æ–¹å‘è‡ªå³è€Œå·¦çš„ä¹¦å†™æ–¹å¼\n\n\n\nBFCå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡æ¦‚å¿µï¼š\nå¯ä»¥æŠŠBFCç†è§£ä¸ºä¸€ä¸ªå°é—­çš„å¤§ç®±å­ï¼Œç®±å­å†…éƒ¨çš„å…ƒç´ æ— è®ºå¦‚ä½•ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°å¤–éƒ¨\n\nè§¦å‘æ¡ä»¶ï¼š\nfloatçš„å€¼ä¸æ˜¯none\n\npositionçš„å€¼ä¸æ˜¯staticæˆ–relative\n\ndisplayçš„å€¼æ˜¯inline-blockã€table-celã€flexã€table-captionæˆ–inline-flex\n\noverflowçš„å€¼ä¸æ˜¯visible\n\n\nBFCçš„åº”ç”¨ï¼š\nè§£å†³margin-topä¼ é€’é—®é¢˜   åœ¨çˆ¶å…ƒç´ ä¸ŠåŠ \n\nè§£å†³çºµå‘marginé‡å é—®é¢˜\n\n\n\n\n\nè§£å†³æµ®åŠ¨é«˜åº¦å¡Œé™·  åœ¨çˆ¶å…ƒç´ ä¸ŠåŠ \n\n\n","slug":"å¸ƒå±€ä¸­çš„å°ºå¯¸ä¸ä½ç½®","date":"2022-02-11T13:28:00.000Z","categories_index":"","tags_index":"å¸ƒå±€,css","author_index":"LIYUNFU"},{"id":"72f191bcb7ec59bd5f1454660b2b3dff","title":"è¥¿ç“œéŸ³ä¹å°ç¨‹åºå¼€å‘ç¬¬äºŒå¤©","content":"âœ… å¼•å…¥ç¬¬ä¸‰æ–¹ UI åº“ vantâœ… å°è£… banner è¯·æ±‚âœ… å®æ—¶è·å–ç»„ä»¶é«˜åº¦è§£å†³ä¸åŒå±å¹•ä¸­çš„ swiper æ ·å¼é—®é¢˜âœ… ä½¿ç”¨èŠ‚æµå‡½æ•°ä¼˜åŒ–æ€§èƒ½\n\nä»Šæ—¥å®Œæˆæ•ˆæœ\n\n\n\\\nå¼•å…¥ vantUI åº“æ­¥éª¤å¦‚ä¸‹\n ç¬¬ä¸€æ­¥è¿›å…¥å¾®ä¿¡å¼€å‘å·¥å…·ï¼Œç‚¹å¼€è¯¦æƒ…ï¼Œå‹¾é€‰ä½¿ç”¨ npm æ¨¡å—ï¼Œå¹¶è°ƒä½åŸºç¡€åº“ï¼Œç”±äºå½“å‰æµ‹è¯•åŸºç¡€åº“2.22.0æ— æ³•æ­£å¸¸æ˜¾ç¤º vant ä¸­çš„van-searchæ ‡ç­¾ï¼Œé‚è°ƒä½åŸºç¡€åº“è‡³2.21.2\n\n\n\n æ‰“å¼€ç»ˆç«¯ï¼Œåˆå§‹åŒ–package.jsonå¹¶ä¸”å®‰è£… vant ä¾èµ– npm i @vant/weapp\n\n\n\n\\\n\n ç‚¹å‡»å·¥å…·èœå•ä¸­çš„æ„å»º npmï¼Œç­‰å¾…æ„å»ºå®Œæˆï¼Œè‡ªåŠ¨äº§ç”Ÿminiprogram_npmè¿™å°±æ˜¯å°ç¨‹åºä¾èµ–çš„åŒ…\n\n\n\n\n æœ€ååˆ é™¤ app.json ä¸­çš„style:v2é˜²æ­¢æ ·å¼å†²çª\n\nä½¿ç”¨ç¬¬ä¸‰æ–¹ UI åº“\n åœ¨pages/home-music/index.jsonä¸­å¯¼å…¥éœ€è¦çš„searchç»„ä»¶\n\n&#123;\n  &quot;usingComponents&quot;: &#123;\n    &quot;van-search&quot;: &quot;@vant&#x2F;weapp&#x2F;search&#x2F;index&quot;\n  &#125;\n&#125;\n\n\n åœ¨pages/home-music/index.wxmlä¸­ä½¿ç”¨searchç»„ä»¶\n\n&lt;!--pages&#x2F;home-music&#x2F;index.wxml--&gt;\n&lt;!-- æœç´¢æ¡† --&gt;\n&lt;van-search disabled  placeholder&#x3D;&quot;æœç´¢æ‚¨å–œæ¬¢çš„æ­Œæ›²&quot; background&#x3D;&quot;#fafafa&quot; shape&#x3D;&quot;round&quot; bind:click-input&#x3D;&quot;handleSearchClick&quot; &#x2F;&gt;\n\n\nè¿™é‡Œä½¿æœç´¢æ¡†æ— æ³•è¾“å…¥ï¼Œç»‘å®šäº†ç‚¹å‡»æ–¹æ³•ï¼Œä½¿ç”¨æˆ·ç‚¹å‡»æœç´¢æ¡†è·³è½¬åˆ°æœç´¢é¡µé¢ï¼Œindex.js ä¸­å®ç°æ–¹æ³•å³å¯ï¼Œshapeå±æ€§å¯ä»¥è®¾ç½®ä¸ºåœ†è§’æˆ–è€…æ–¹è§’\n\n&#x2F;**\n  * äº‹ä»¶å¤„ç†\n  *&#x2F;\n handleSearchClick: function () &#123;\n   wx.navigateTo(&#123;\n     url: &quot;&#x2F;pages&#x2F;detail-search&#x2F;index&quot;,\n   &#125;);\n &#125;,\n\n\næ•ˆæœå¦‚å›¾\n\n\n\\\nå°è£… banner è¯·æ±‚æ–°å»º service/api_music.jsimport hyRequest from &quot;.&#x2F;index&quot;;\nexport function getBanners() &#123;\n  return hyRequest.get(&quot;&#x2F;banner&quot;, &#123;\n    type: 2,\n  &#125;);\n&#125;\n\n\ntype çš„å€¼æœ‰å››ç§ï¼š0 ä»£è¡¨ PC 1 ä»£è¡¨ Android 2 ä»£è¡¨ Iphone 3 ä»£è¡¨ pad\n\n\\\nè¯·æ±‚æ•°æ®å¹¶æ¸²æŸ“åˆ°é¡µé¢\n æ ¹æ®å®˜æ–¹æ–‡æ¡£å¯çŸ¥ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹ç¤ºä¾‹è·å¾—æ¯æ¬¡æ¸²æŸ“å®Œæˆçš„ç»„ä»¶çš„rect\n\n\n\n æ–°å»ºutils/query-rect.jsç”¨ä»¥è·å–ç»„ä»¶é«˜åº¦\n\nexport default function (selector) &#123;\n  return new Promise((resolve) &#x3D;&gt; &#123;\n    &#x2F;&#x2F; è·å–å›¾ç‰‡çš„é«˜åº¦(å¦‚ä½•è·å–ç»„ä»¶é«˜åº¦)\n    const query &#x3D; wx.createSelectorQuery();\n    query.select(selector).boundingClientRect();\n    query.exec((res) &#x3D;&gt; &#123;\n      resolve(res);\n    &#125;);\n  &#125;);\n&#125;\n\n\n åœ¨pages/home-music/index.jsä¸­å®šä¹‰æ•°æ®å’Œæ–¹æ³•ï¼Œå¹¶è°ƒç”¨\n\n&#x2F;&#x2F; pages&#x2F;home-music&#x2F;index.js\nimport &#123; getBanners &#125; from &quot;..&#x2F;..&#x2F;service&#x2F;api_music&quot;;\nimport queryRect from &quot;..&#x2F;..&#x2F;utils&#x2F;query-rect&quot;;\nimport throttle from &quot;..&#x2F;..&#x2F;utils&#x2F;throttle&quot;;\n\nconst throttleQueryRect &#x3D; throttle(queryRect);\n\nPage(&#123;\n  &#x2F;**\n   * é¡µé¢çš„åˆå§‹æ•°æ®\n   *&#x2F;\n  data: &#123;\n    swiperHeight: 0,\n    banners: &#123;&#125;,\n  &#125;,\n\n  &#x2F;**\n   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½\n   *&#x2F;\n  onLoad: function (options) &#123;\n    this.getPageData();\n  &#125;,\n\n  &#x2F;**\n   * äº‹ä»¶å¤„ç†\n   *&#x2F;\n  handleSearchClick: function () &#123;\n    wx.navigateTo(&#123;\n      url: &quot;&#x2F;pages&#x2F;detail-search&#x2F;index&quot;,\n    &#125;);\n  &#125;,\n  &#x2F;**\n   * ç½‘ç»œè¯·æ±‚\n   *&#x2F;\n  getPageData: function () &#123;\n    getBanners().then((res) &#x3D;&gt; &#123;\n      this.setData(&#123; banners: res.banners &#125;);\n    &#125;);\n  &#125;,\n\n  handleSwiperImageLoaded: function () &#123;\n    &#x2F;&#x2F; è·å–å›¾ç‰‡çš„é«˜åº¦\n    throttleQueryRect(&quot;#swiper-img&quot;).then((res) &#x3D;&gt; &#123;\n      const rect &#x3D; res[0];\n      this.setData(&#123;\n        swiperHeight: rect.height,\n      &#125;);\n    &#125;);\n  &#125;,\n&#125;)\n\n\n åœ¨pages/home-music/index.wxmlä¸­è°ƒç”¨æ•°æ®ï¼Œå¹¶ç»‘å®šimageåŠ è½½å®Œæˆçš„æ–¹æ³•bindonload\n\n&lt;!--pages&#x2F;home-music&#x2F;index.wxml--&gt;\n&lt;!-- æœç´¢æ¡† --&gt;\n&lt;van-search disabled  placeholder&#x3D;&quot;æœç´¢æ‚¨å–œæ¬¢çš„æ­Œæ›²&quot; background&#x3D;&quot;#fafafa&quot; shape&#x3D;&quot;round&quot; bind:click-input&#x3D;&quot;handleSearchClick&quot; &#x2F;&gt;\n\n&lt;!-- è½®æ’­å›¾ --&gt;\n&lt;swiper class&#x3D;&quot;swiper&quot; style&#x3D;&quot;height:&#123;&#123;swiperHeight&#125;&#125;&quot; indicator-dots autoplay circular&gt;\n  &lt;block wx:for&#x3D;&quot;&#123;&#123;banners&#125;&#125;&quot; wx:key&#x3D;&quot;bannerId&quot;&gt;\n    &lt;swiper-item class&#x3D;&quot;swiper-item&quot; &gt;\n      &lt;image id&#x3D;&quot;swiper-img&quot; class&#x3D;&quot;image&quot; mode&#x3D;&quot;heightFix&quot; src&#x3D;&quot;&#123;&#123;item.pic&#125;&#125;&quot;  bindload&#x3D;&quot;handleSwiperImageLoaded&quot; &#x2F;&gt;\n    &lt;&#x2F;swiper-item&gt;\n  &lt;&#x2F;block&gt;\n&lt;&#x2F;swiper&gt;\n\nå‚æ•°è¯´æ˜:\n\ncircularæ— é™æ»‘åŠ¨\nmodeé«˜åº¦è‡ªé€‚åº”\n\n\n\n\nbindloadå½“imageæ ‡ç­¾åŠ è½½å®Œæˆæ—¶æ‰§è¡Œ\nindicator-dotsæ˜¾ç¤ºå°åœ†ç‚¹\n\nä¸Šé¢ç”¨åˆ°çš„èŠ‚æµå‡½æ•°utils/throttle.js\nexport default function throttle(\n  fn,\n  interval &#x3D; 1000,\n  options &#x3D; &#123; leading: true, trailing: false &#125;\n) &#123;\n  &#x2F;&#x2F; 1.è®°å½•ä¸Šä¸€æ¬¡çš„å¼€å§‹æ—¶é—´\n  const &#123; leading, trailing, resultCallback &#125; &#x3D; options;\n  let lastTime &#x3D; 0;\n  let timer &#x3D; null;\n\n  &#x2F;&#x2F; 2.äº‹ä»¶è§¦å‘æ—¶, çœŸæ­£æ‰§è¡Œçš„å‡½æ•°\n  const _throttle &#x3D; function (...args) &#123;\n    return new Promise((resolve, reject) &#x3D;&gt; &#123;\n      &#x2F;&#x2F; 2.1.è·å–å½“å‰äº‹ä»¶è§¦å‘æ—¶çš„æ—¶é—´\n      const nowTime &#x3D; new Date().getTime();\n      if (!lastTime &amp;&amp; !leading) lastTime &#x3D; nowTime;\n\n      &#x2F;&#x2F; 2.2.ä½¿ç”¨å½“å‰è§¦å‘çš„æ—¶é—´å’Œä¹‹å‰çš„æ—¶é—´é—´éš”ä»¥åŠä¸Šä¸€æ¬¡å¼€å§‹çš„æ—¶é—´, è®¡ç®—å‡ºè¿˜å‰©ä½™å¤šé•¿äº‹ä»¶éœ€è¦å»è§¦å‘å‡½æ•°\n      const remainTime &#x3D; interval - (nowTime - lastTime);\n      if (remainTime &lt;&#x3D; 0) &#123;\n        if (timer) &#123;\n          clearTimeout(timer);\n          timer &#x3D; null;\n        &#125;\n\n        &#x2F;&#x2F; 2.3.çœŸæ­£è§¦å‘å‡½æ•°\n        const result &#x3D; fn.apply(this, args);\n        if (resultCallback) resultCallback(result);\n        resolve(result);\n        &#x2F;&#x2F; 2.4.ä¿ç•™ä¸Šæ¬¡è§¦å‘çš„æ—¶é—´\n        lastTime &#x3D; nowTime;\n        return;\n      &#125;\n\n      if (trailing &amp;&amp; !timer) &#123;\n        timer &#x3D; setTimeout(() &#x3D;&gt; &#123;\n          timer &#x3D; null;\n          lastTime &#x3D; !leading ? 0 : new Date().getTime();\n          const result &#x3D; fn.apply(this, args);\n          if (resultCallback) resultCallback(result);\n          resolve(result);\n        &#125;, remainTime);\n      &#125;\n    &#125;);\n  &#125;;\n\n  _throttle.cancel &#x3D; function () &#123;\n    if (timer) clearTimeout(timer);\n    timer &#x3D; null;\n    lastTime &#x3D; 0;\n  &#125;;\n\n  return _throttle;\n&#125;\n\n\\\nå…¶ä»–ï¼š\né¡¹ç›®åœ°å€: https://gitee.com/LUNIONT/xhumusic\n\n","slug":"è¥¿ç“œéŸ³ä¹å°ç¨‹åºå¼€å‘ç¬¬äºŒå¤©","date":"2022-02-10T07:54:45.000Z","categories_index":"","tags_index":"å®æˆ˜,å°ç¨‹åº","author_index":"LIYUNFU"},{"id":"27fc989783c0d00e7c3b706a3747978d","title":"è¥¿ç“œéŸ³ä¹å°ç¨‹åºå¼€å‘ç¬¬ä¸€å¤©","content":"\nâœ… åˆå§‹åŒ–é¡¹ç›®\nâœ… é…ç½® tabbar\nâœ… å°è£…è¯·æ±‚å‡½æ•°\nâœ… åˆ†å±‚æ¶æ„äºŒæ¬¡å°è£…è¯·æ±‚å‡½æ•°\nâœ… å°è£…æ ¼å¼åŒ–æ–¹æ³• (utils/format.wxs)\nâœ… å°è£…è§†é¢‘åˆ—è¡¨ item ç»„ä»¶\nâœ… å®Œæˆè§†é¢‘åˆ—è¡¨é¡µå±•ç¤º\nä»Šæ—¥å®Œæˆæ•ˆæœå¦‚ä¸‹\n\n\n\\\nåˆå§‹åŒ–é¡¹ç›®\n\n\\\nåˆ é™¤æ— å…³é¡¹ç›®æ–‡ä»¶\nåˆ é™¤ pages ç›®å½•ä¸‹çš„ index å’Œ logsï¼Œåˆ é™¤ utils ç›®å½•ä¸‹çš„ util.js\nåˆå§‹åŒ– app.js ä¸º\n\n&#x2F;&#x2F; app.js\nApp(&#123;\n\n&#125;)\n\n\nåˆå§‹åŒ– app.json ä¸º\n\n&#123;\n  &quot;pages&quot;: [\n\n  ],\n  &quot;window&quot;: &#123;\n    &quot;backgroundTextStyle&quot;: &quot;light&quot;,\n    &quot;navigationBarBackgroundColor&quot;: &quot;#fff&quot;,\n    &quot;navigationBarTitleText&quot;: &quot;Weixin&quot;,\n    &quot;navigationBarTextStyle&quot;: &quot;black&quot;\n  &#125;,\n  &quot;style&quot;: &quot;v2&quot;,\n  &quot;sitemapLocation&quot;: &quot;sitemap.json&quot;,\n  &quot;lazyCodeLoading&quot;: &quot;requiredComponents&quot;\n&#125;\n\n\nåˆå§‹åŒ– app.wxss ä¸º\n\n&#x2F;**app.wxss**&#x2F;\n\n\nç›®å‰ä¸ºæ­¢ç¼–è¯‘å™¨/æ¨¡æ‹Ÿå™¨ä¼šæŠ¥é”™\n\n\n\\\né…ç½® tabbaræ–°å»ºä¸¤ä¸ªé¡µé¢\n åœ¨ pages å³é”®åˆ›å»ºæ–‡ä»¶å¤¹home-musicå’Œhome-video\n åœ¨home-videoå’Œhome-musicä¸Šå³é”®æ–°å»ºpageä¸ºindex\n\n\n\n\n å°ç¨‹åºå¼€å‘å·¥å…·ä¼šè‡ªåŠ¨åœ¨ç›®å½•ä¸‹åˆ›å»ºå››ä¸ªæ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨åœ¨app.jsonä¸­æ·»åŠ  url\n \n\n\n\n\n \n\nå¯¼å…¥é™æ€èµ„æº assets\n åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰“å¼€é¡¹ç›®ï¼Œå¤åˆ¶å·²ç»å‡†å¤‡å¥½çš„ assets èµ„æºåˆ°æ ¹ç›®å½•\n \n\n\\\nåœ¨app.jsonä¸­é…ç½® tabbar&quot;tabBar&quot;: &#123;\n    &quot;list&quot;: [\n      &#123;\n        &quot;pagePath&quot;: &quot;pages&#x2F;home-music&#x2F;index&quot;,\n        &quot;text&quot;: &quot;éŸ³ä¹&quot;,\n        &quot;iconPath&quot;: &quot;assets&#x2F;images&#x2F;tabbar&#x2F;music_normal.png&quot;,\n        &quot;selectedIconPath&quot;: &quot;assets&#x2F;images&#x2F;tabbar&#x2F;music_active.png&quot;\n      &#125;,\n      &#123;\n        &quot;pagePath&quot;: &quot;pages&#x2F;home-video&#x2F;index&quot;,\n        &quot;text&quot;: &quot;è§†é¢‘&quot;,\n        &quot;iconPath&quot;: &quot;assets&#x2F;images&#x2F;tabbar&#x2F;video_normal.png&quot;,\n        &quot;selectedIconPath&quot;: &quot;assets&#x2F;images&#x2F;tabbar&#x2F;video_active.png&quot;\n      &#125;\n    ]\n  &#125;,\n\n\n\næ•ˆæœ\n\n\n\\\nå°è£…è¯·æ±‚å‡½æ•°ç”±äºå¾®ä¿¡å°ç¨‹åºç»™æˆ‘ä»¬æä¾›çš„wx.requestè¯·æ±‚è®¸å¤šå‚æ•°éƒ½å¯ä»¥å¤ç”¨ï¼Œæ‰€ä»¥å¯ä»¥å°è£…ä¸€ä¸ªè¯·æ±‚å‡½æ•°\n\n åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºserviceæ–‡ä»¶å¤¹\n æ–°å»ºservice/index.js\n\nconst BASE_URL &#x3D; &quot;http:&#x2F;&#x2F;123.207.32.32:9001&quot;;\nclass HYRequest &#123;\n  request(url, method, params) &#123;\n    return new Promise((resolve, reject) &#x3D;&gt; &#123;\n      wx.request(&#123;\n        url: BASE_URL + url,\n        method: method,\n        data: params,\n        success: function (res) &#123;\n          resolve(res.data);\n        &#125;,\n        fail: function (err) &#123;\n          reject(err);\n        &#125;,\n      &#125;);\n    &#125;);\n  &#125;\n  get(url, params) &#123;\n    return this.request(url, &quot;GET&quot;, params);\n  &#125;\n  post(url, data) &#123;\n    return this.request(url, &quot;POST&quot;, data);\n  &#125;\n&#125;\n\nconst hyRequest &#x3D; new HYRequest();\nexport default hyRequest;\n\näºŒæ¬¡å°è£…è¯·æ±‚å‡½æ•°æŸäº›åŠ¨ä½œéœ€è¦åå¤è°ƒç”¨è¯·æ±‚å‡½æ•°ï¼Œä½†æ˜¯æœ‰ä¸å˜çš„å‚æ•°ï¼Œæ²¡å¿…è¦æ¯æ¬¡ä¼ é€’ï¼Œå¯ä»¥å†å°è£…ä¸€æ¬¡\n\n æ–°å»ºservice/api_video.js\n\nimport hyRequest from &#39;.&#x2F;index&#39;\nexport function getTopMV(offset,limit&#x3D;10)&#123;\n  return hyRequest.get(&#39;&#x2F;top&#x2F;mv&#39;,&#123;\n    offset,\n    limit\n  &#125;)\n&#125;\n\n\n ç”±äºæˆ‘ä»¬çš„ api åå°éœ€è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯åç§»é‡ï¼Œä¸€ä¸ªæ˜¯æ•°é‡ï¼Œæˆ‘ä»¬é»˜è®¤æ¯æ¬¡æˆªå–åä¸ªå³å¯\n\nè°ƒç”¨è¯·æ±‚è·å¾—æ•°æ®\n åœ¨home-video/index.jsä¸­å¼•å…¥ getTopMV æ–¹æ³•\n\nimport &#123; getTopMV &#125; from &quot;..&#x2F;..&#x2F;service&#x2F;api_video&quot;;\n\n\n åœ¨home-video/index.jsçš„ data ä¸­å®šä¹‰ä¸¤ä¸ªå˜é‡\n\ndata: &#123;\n   topMVs: [],   &#x2F;&#x2F;ç”¨ä»¥ä¿å­˜è¯·æ±‚åˆ°çš„æ•°æ®åˆ—è¡¨\n   hasMore: true,  &#x2F;&#x2F; åˆ¤æ–­è¿˜æœ‰æ²¡æœ‰æ›´å¤šæ•°æ®èƒ½å¤Ÿè¯·æ±‚\n &#125;,\n\n\n å°è£…ä¸“å±äºhome-videoçš„ç½‘ç»œè¯·æ±‚æ–¹æ³•ï¼Œç”¨ä»¥åœ¨ä¸åŒæ“ä½œä¸‹å¤ç”¨\n\n&#x2F;**\n   * å°è£…ç½‘ç»œè¯·æ±‚çš„æ–¹æ³•\n   *&#x2F;\n  async getTopMVData(offset) &#123;\n    &#x2F;&#x2F; åˆ¤æ–­æ˜¯å¦å¯ä»¥è¯·æ±‚\n    if (!this.data.hasMore) return;\n\n    &#x2F;&#x2F; å±•ç¤ºåŠ è½½åŠ¨ç”»\n    wx.showNavigationBarLoading();\n    &#x2F;&#x2F; çœŸæ­£è¯·æ±‚æ•°æ®\n    const res &#x3D; await getTopMV(offset);\n\n    let newData &#x3D; this.data.topMVs;\n    if (offset &#x3D;&#x3D;&#x3D; 0) &#123;\n      newData &#x3D; res.data;\n    &#125; else &#123;\n      newData &#x3D; newData.concat(res.data);\n    &#125;\n    this.setData(&#123;\n      topMVs: newData,\n    &#125;);\n    this.setData(&#123;\n      hasMore: res.hasMore,\n    &#125;);\n\n    &#x2F;&#x2F; éšè—navigationåˆ·æ–°åŠ¨ç”»\n    wx.hideNavigationBarLoading();\n    &#x2F;&#x2F; å½“è¯·æ±‚æ•°æ®å®Œæˆ å…³é—­ä¸‹æ‹‰åˆ·æ–°åŠ¨ç”»\n    if (offset &#x3D;&#x3D;&#x3D; 0) &#123;\n      wx.stopPullDownRefresh();\n    &#125;\n  &#125;,\n\n\n å½“ç”Ÿå‘½å‘¨æœŸ onLoad æ‰§è¡Œæ—¶ï¼Œè°ƒç”¨è¯·æ±‚æ–¹æ³•\n\n&#x2F;**\n   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½\n   * async await\n   *&#x2F;\n  onLoad: function (options) &#123;\n    this.getTopMVData(0);\n  &#125;,\n\n\n å½“ä¸‹æ‹‰åˆ·æ–°æ—¶è°ƒç”¨è¯·æ±‚æ–¹æ³•\n\n&#x2F;**\n  * ä¸‹æ‹‰åˆ·æ–°\n  *&#x2F;\n onPullDownRefresh: function () &#123;\n   this.getTopMVData(0);\n &#125;,\n\n\n å½“é¡µé¢è§¦åº•æ—¶è°ƒç”¨è¯·æ±‚æ–¹æ³•\n\n&#x2F;**\n * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°\n *&#x2F;\nonReachBottom: function () &#123;\n  this.getTopMVData(this.data.topMVs.length);\n&#125;,\n\n\n home-video/index.jså®Œæ•´ä»£ç \n\n&#x2F;&#x2F; pages&#x2F;home-video&#x2F;index.js\nimport &#123; getTopMV &#125; from &quot;..&#x2F;..&#x2F;service&#x2F;api_video&quot;;\nPage(&#123;\n  &#x2F;**\n   * é¡µé¢çš„åˆå§‹æ•°æ®\n   *&#x2F;\n  data: &#123;\n    topMVs: [],\n    hasMore: true,\n  &#125;,\n\n  &#x2F;**\n   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½\n   * async await\n   *&#x2F;\n  onLoad: function (options) &#123;\n    this.getTopMVData(0);\n  &#125;,\n\n  &#x2F;**\n   * å°è£…ç½‘ç»œè¯·æ±‚çš„æ–¹æ³•\n   *&#x2F;\n  async getTopMVData(offset) &#123;\n    &#x2F;&#x2F; åˆ¤æ–­æ˜¯å¦å¯ä»¥è¯·æ±‚\n    if (!this.data.hasMore) return;\n\n    &#x2F;&#x2F; å±•ç¤ºåŠ è½½åŠ¨ç”»\n    wx.showNavigationBarLoading();\n    &#x2F;&#x2F; çœŸæ­£è¯·æ±‚æ•°æ®\n    const res &#x3D; await getTopMV(offset);\n\n    let newData &#x3D; this.data.topMVs;\n    if (offset &#x3D;&#x3D;&#x3D; 0) &#123;\n      newData &#x3D; res.data;\n    &#125; else &#123;\n      newData &#x3D; newData.concat(res.data);\n    &#125;\n    this.setData(&#123;\n      topMVs: newData,\n    &#125;);\n    this.setData(&#123;\n      hasMore: res.hasMore,\n    &#125;);\n\n    &#x2F;&#x2F; éšè—navigationåˆ·æ–°åŠ¨ç”»\n    wx.hideNavigationBarLoading();\n    &#x2F;&#x2F; å½“è¯·æ±‚æ•°æ®å®Œæˆ å…³é—­ä¸‹æ‹‰åˆ·æ–°åŠ¨ç”»\n    if (offset &#x3D;&#x3D;&#x3D; 0) &#123;\n      wx.stopPullDownRefresh();\n    &#125;\n  &#125;,\n\n  &#x2F;**\n   * å°è£…äº‹ä»¶å¤„ç†çš„æ–¹æ³•\n   *&#x2F;\n  handleVideoItemClick: function (event) &#123;\n    const id &#x3D; event.currentTarget.dataset.item.id;\n\n    &#x2F;&#x2F; é¡µé¢è·³è½¬\n    wx.navigateTo(&#123;\n      url: &#96;&#x2F;pages&#x2F;detail-video&#x2F;index?id&#x3D;$&#123;id&#125;&#96;,\n    &#125;);\n  &#125;,\n  &#x2F;**\n   * ä¸‹æ‹‰åˆ·æ–°\n   *&#x2F;\n  onPullDownRefresh: function () &#123;\n    this.getTopMVData(0);\n  &#125;,\n\n  &#x2F;**\n   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ\n   *&#x2F;\n  onReady: function () &#123;&#125;,\n\n  &#x2F;**\n   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢æ˜¾ç¤º\n   *&#x2F;\n  onShow: function () &#123;&#125;,\n\n  &#x2F;**\n   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢éšè—\n   *&#x2F;\n  onHide: function () &#123;&#125;,\n\n  &#x2F;**\n   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢å¸è½½\n   *&#x2F;\n  onUnload: function () &#123;&#125;,\n\n  &#x2F;**\n   * é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ\n   *&#x2F;\n  onPullDownRefresh: function () &#123;&#125;,\n\n  &#x2F;**\n   * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°\n   *&#x2F;\n  onReachBottom: function () &#123;\n    this.getTopMVData(this.data.topMVs.length);\n  &#125;,\n\n  &#x2F;**\n   * ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«\n   *&#x2F;\n  onShareAppMessage: function () &#123;&#125;,\n&#125;);\n\néå†æ•°æ®åˆ°é¡µé¢å‰é¢æˆ‘ä»¬å·²ç»è¯·æ±‚åˆ°æ•°æ®äº†ï¼Œå¯ä»¥ç›´æ¥åœ¨home-video/index.wxmlä¸­è°ƒç”¨ï¼Œç”±äºåˆ—è¡¨çš„ item ä¹Ÿå¯ä»¥å¤ç”¨ï¼Œæˆ‘ä»¬å°†å®ƒå°è£…æˆä¸€ä¸ª component\n&lt;!--pages&#x2F;home-video&#x2F;index.wxml--&gt;\n&lt;view class&#x3D;&quot;video&quot;&gt;\n  &lt;view class&#x3D;&quot;item&quot; wx:for&#x3D;&quot;&#123;&#123;topMVs&#125;&#125;&quot; wx:key&#x3D;&quot;id&quot;&gt;\n     &lt;!-- &lt;video-item-v1 item&#x3D;&quot;&#123;&#123;item&#125;&#125;&quot;\n      bindtap&#x3D;&quot;handleVideoItemClick&quot;\n      data-item&#x3D;&quot;&#123;&#123;item&#125;&#125;&quot;&gt;&lt;&#x2F;video-item-v1&gt; --&gt;\n  &lt;&#x2F;view&gt;\n&lt;&#x2F;view&gt;\n\n\\\nå°è£… item ç»„ä»¶\n åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹components/video-item-v1ï¼Œå³é”®video-item-v1æ–°å»ºcomponentä¸º index\n \n\n\n\n\n å¯ä»¥çœ‹åˆ°componentçš„ index.js å’Œæ™®é€šç»„ä»¶ä¸åŒï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªä¸“é—¨æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥æ•°æ®çš„å‡½æ•°\n\n&#x2F;**\n  * ç»„ä»¶çš„å±æ€§åˆ—è¡¨\n  *&#x2F;\n properties: &#123;\n\n &#125;,\n\n\n å¯ä»¥åœ¨è¿™å„¿å®šä¹‰æ¥æ”¶çš„æ•°æ®ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨ wxml é¡µé¢ä¸­ä½¿ç”¨äº†\n\n&#x2F;**\n   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨\n   *&#x2F;\n  properties: &#123;\n    item:&#123;\n      type:Object,\n      default:&#123;&#125;\n    &#125;\n  &#125;,\n\n\n ç”±äºæœåŠ¡å™¨è¿”å›çš„æ•°æ®é‡Œé¢æ’­æ”¾é‡å’Œ æ—¶é—´éƒ½éœ€è¦è½¬æ¢æ ¼å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ utils ç›®å½•ä¸‹å®šä¹‰ä¸€ä¸ªformat.wxsç”¨äºæ ¼å¼åŒ–æ•°æ®ï¼Œwxml ä¸­åªèƒ½è°ƒç”¨ wxs å®šä¹‰çš„æ–¹æ³•\n\nfunction formatCount(count) &#123;\n  var counter &#x3D; parseInt(count);\n  if (counter &gt; 100000000) &#123;\n    return (counter &#x2F; 100000000).toFixed(1) + &quot;äº¿&quot;;\n  &#125; else if (counter &gt; 10000) &#123;\n    return (counter &#x2F; 10000).toFixed(1) + &quot;ä¸‡&quot;;\n  &#125; else &#123;\n    return counter + &quot;&quot;;\n  &#125;\n&#125;\n\nfunction padLeftZero(time) &#123;\n  time &#x3D; time + &quot;&quot;;\n  return (&quot;00&quot; + time).slice(time.length);\n&#125;\nfunction formatDuration(duration) &#123;\n  duration &#x3D; duration &#x2F; 1000;\n\n  var minute &#x3D; Math.floor(duration &#x2F; 60);\n  &#x2F;&#x2F; è®¡ç®—ç§’é’Ÿ\n  var second &#x3D; duration % 60;\n\n  return padLeftZero(minute) + &quot;:&quot; + padLeftZero(second);\n&#125;\n&#x2F;&#x2F; commonjs\nmodule.exports &#x3D; &#123;\n  formatCount: formatCount,\n  formatDuration: formatDuration,\n&#125;;\n\n\n ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ wxml ä¸­ä½¿ç”¨çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®äº†\n\n&lt;!--components&#x2F;video-item-v1&#x2F;index.wxml--&gt;\n&lt;wxs src&#x3D;&quot;..&#x2F;..&#x2F;utils&#x2F;format.wxs&quot; module&#x3D;&quot;format&quot;&gt;&lt;&#x2F;wxs&gt;\n&lt;view class&#x3D;&quot;item&quot;&gt;\n  &lt;view class&#x3D;&quot;album&quot;&gt;\n    &lt;image class&#x3D;&quot;images&quot; src&#x3D;&quot;&#123;&#123;item.cover&#125;&#125;&quot; mode&#x3D;&quot;widthFix&quot; &#x2F;&gt;\n    &lt;view class&#x3D;&quot;info&quot;&gt;\n      &lt;view class&#x3D;&quot;count&quot;&gt;&#123;&#123;format.formatCount(item.playCount)&#125;&#125;&lt;&#x2F;view&gt;\n      &lt;view class&#x3D;&quot;duration&quot;&gt;&#123;&#123;format.formatDuration(item.mv.videos[0].duration)&#125;&#125;&lt;&#x2F;view&gt;\n    &lt;&#x2F;view&gt;\n  &lt;&#x2F;view&gt;\n  &lt;view class&#x3D;&quot;content&quot;&gt;\n    &#123;&#123;item.name&#125;&#125; - &#123;&#123;item.artisName&#125;&#125;\n  &lt;&#x2F;view&gt;\n&lt;&#x2F;view&gt;\n\n\n ä¸º item ç»„ä»¶é…ç½®æ ·å¼\n\n&#x2F;* components&#x2F;video-item-v1&#x2F;index.wxss *&#x2F;\n.item &#123;\n  width: 100%;\n  margin-bottom: 30rpx;\n&#125;\n\n.album &#123;\n  position: relative;\n  border-radius: 12rpx;\n  overflow: hidden;\n  display: flex;\n&#125;\n\n.album .image &#123;\n  width: 100%;\n&#125;\n\n.info &#123;\n  position: absolute;\n  padding: 0 10rpx;\n  box-sizing: border-box;\n  width: 100%;\n  bottom: 8rpx;\n  display: flex;\n  justify-content: space-between;\n  color: #fff;\n  font-size: 24rpx;\n&#125;\n\n.info .count &#123;\n  padding-left: 36rpx;\n  position: relative;\n&#125;\n\n.info .count::before &#123;\n  content: &quot;&quot;;\n  position: absolute;\n  left: -2rpx;\n  top: 4rpx;\n  width: 30rpx;\n  height: 24rpx;\n  background-size: cover;\n  background-image: url(&quot;data:image&#x2F;jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAYCAQAAABHYIU0AAAM82lDQ1BrQ0dDb2xvclNwYWNlR2VuZXJpY0dyYXlHYW1tYTJfMgAAWIWlVwdYU8kWnluS0BJ6lRI60gwoXUqkBpBeBFGJIZBACDEFAbEhiyu4dhHBsqKiKIsdgcWGBQtrB7sLuigo6+IqNixvEopYdt&#x2F;7vnfzzb3&#x2F;nXPOnDpnbgBQ5TAFAh4KAMjki4WBUfSEKQmJVNJdIAe0gTKwB8pMlkhAj4gIhSyAn8Vng2+uV+0AkT6v2UnX+pb+rxchhS1iwedxOHJTRKxMAJCJAJC6WQKhGAB5MzhvOlsskOIgiDUyYqJ8IU4CQE5pSFZ6GQWy+Wwhl0UNFDJzqYHMzEwm1dHekRohzErl8r5j9f97ZfIkI7rhUBJlRIfApz20vzCF6SfFrhDvZzH9o4fwk2xuXBjEPgCgJgLxpCiIgyGeKcmIpUNsC3FNqjAgFmIviG9yJEFSPAEATCuPExMPsSHEwfyZYeEQu0PMYYl8EyG2griSw2ZI8wRjhp3nihkxEEN92DNhVpSU3xoAfGIK289&#x2F;cB5PzcgKkdpgAvFBUXa0&#x2F;7DNeRzfsEFdeHs6MzgCYguIX7J5gVGD6xD0BOII6ZrwneDH54WFDvpFKGWLZP7Cd0K7mBMjzZkjAEQTsTAmatA2YkwqN4ABcQDEORxhUNSgv8SjAp6szmBMiO+FkqjYQR9JAWx+rHRNaV0sYAr9AwdjRWoCcQgTsEEWmAnvLMAHnYAKRIALsmUoDTBBJhxUaIEtHIGQiw+HEHKIQIaMQwi6RujDElIZAaRkgVTIyYNyw7NUkALlB+Wka2TBIX2Trtstm2MN6bOHw9dwO5DANw7ohXQORJNBh2wmB9qXCZ++cFYCaWkQj9YyKB8hs3XQBuqQ9T1DWrJktjBH5D7b5gvpfJAHZ0TDnuHaOA0fD4cHHop74jSZlBBy5AI72fxE2dyw1s+eS33rGdE6C9o62vvR8RqO4QkoJYbvPOghfyg+ImjNeyiTMST9lZ8r9CRWAkHpskjG9KoRK6gFwhlc1qXlff+StW+1232Rt&#x2F;DRdSGrlJRv6gLqIlwlXCbcJ1wHVPj8g9BG6IboDuEu&#x2F;N36blSyRmKQBkfWSAWwv8gNG3LyZFq+tfNzzgbX+WoFBBvhpMtWkVIz4eDKeEQj+ZNALIb3VJm03Ve5C&#x2F;xab0t+kw6gti89fg5Qa1Qazn6Odhten3RNqSU&#x2F;lb9CTyCYXpU&#x2F;wBZ8pkrzwF4c9ioMFNjS9tJ6adtoNbQXtPufOWg3aH&#x2F;S2mhbIOUptho7hB3BGrBGrBVQ4VsjdgJrkKEarAn+9v1Dhad9p8KlFcMaqmgpVTxUU6Nrf3Rk6aOiJeUfjnD6P9Tr6IqRZux&#x2F;s2j0Ol92BPbnXUcxpThQSBRrihOFTkEoxvDnSPGByJRiQgmlaENqEMWS4kcZMxKP4VrnDWWY+8X+HrQ4AVKHK4Ev6y5MyCnlYA75+7WP1C+8lHrGHb2rEDLcVdxRPeF7vYj6xc6KhbJcMFsmL5Ltdr5MTvBF&#x2F;YlkXQjOIFNlOfyObbgh7oAzYAcKB1ScjjvhPkN4sCsN9yVZpnBvSPXC&#x2F;XBXaR&#x2F;7oi+w&#x2F;qv1o3cGm+hOtCT6Ey0&#x2F;04l+xCBiAHw6SOeJ44jBELtJucTsHLH0kPfNEuQKuWkcMZUOv3LYVAafZW9LdaQ5wNNN+s00+CnwIlL2LYRotbIkwuzBOVx6IwAF+D2lAXThqWoKT2s7qNUFeMAz0x+ed+EgBuZ1OvSDA+0Wwsjmg4WgCJSAFWAtKAebwTZQDWrBfnAYNMEeewZcAJdBG7gDz5Mu8BT0gVdgAEEQEkJG1BFdxAgxR2wQR8QV8UL8kVAkCklAkpE0hI9IkHxkEVKCrELKkS1INbIPaUBOIOeQK8gtpBPpQf5G3qEYqoRqoAaoBToOdUXpaAgag05D09BZaB5aiC5Dy9BKtAatQ0+gF9A2tAN9ivZjAFPEtDBjzA5zxXyxcCwRS8WE2DysGCvFKrFa2ANasGtYB9aLvcWJuDpOxe1gFoPwWJyFz8Ln4UvxcnwnXoefwq&#x2F;hnXgf&#x2F;pFAJugTbAjuBAZhCiGNMJtQRCglVBEOEU7DDt1FeEUkErVgflxg3hKI6cQ5xKXEjcQ9xOPEK8SHxH4SiaRLsiF5ksJJTJKYVERaT6ohHSNdJXWR3sgpyhnJOcoFyCXK8eUK5Erldskdlbsq91huQF5F3lzeXT5cPkU+V365&#x2F;Db5RvlL8l3yAwqqCpYKngoxCukKCxXKFGoVTivcVXihqKhoouimGKnIVVygWKa4V&#x2F;GsYqfiWyU1JWslX6UkJYnSMqUdSseVbim9IJPJFmQfciJZTF5GriafJN8nv6GoU+wpDEoKZT6lglJHuUp5piyvbK5MV56unKdcqnxA+ZJyr4q8ioWKrwpTZZ5KhUqDyg2VflV1VQfVcNVM1aWqu1TPqXarkdQs1PzVUtQK1baqnVR7qI6pm6r7qrPUF6lvUz+t3qVB1LDUYGika5Ro&#x2F;KJxUaNPU01zgmacZo5mheYRzQ4tTMtCi6HF01qutV+rXeudtoE2XZutvUS7Vvuq9mudMTo+OmydYp09Om0673Spuv66GbordQ&#x2F;r3tPD9az1IvVm623SO63XO0ZjjMcY1pjiMfvH3NZH9a31o&#x2F;Tn6G&#x2F;Vb9XvNzA0CDQQGKw3OGnQa6hl6GOYbrjG8Khhj5G6kZcR12iN0TGjJ1RNKp3Ko5ZRT1H7jPWNg4wlxluMLxoPmFiaxJoUmOwxuWeqYOpqmmq6xrTZtM&#x2F;MyGyyWb7ZbrPb5vLmruYc83XmLeavLSwt4i0WWxy26LbUsWRY5lnutrxrRbbytpplVWl1fSxxrOvYjLEbx162Rq2drDnWFdaXbFAbZxuuzUabK7YEWzdbvm2l7Q07JTu6XbbdbrtOey37UPsC+8P2z8aZjUsct3Jcy7iPNCcaD55udxzUHIIdChwaHf52tHZkOVY4Xh9PHh8wfv74+vHPJ9hMYE&#x2F;YNOGmk7rTZKfFTs1OH5xdnIXOtc49LmYuyS4bXG64arhGuC51PetGcJvkNt+tye2tu7O72H2&#x2F;+18edh4ZHrs8uidaTmRP3DbxoaeJJ9Nzi2eHF9Ur2etnrw5vY2+md6X3Ax9TnxSfKp&#x2F;H9LH0dHoN&#x2F;dkk2iThpEOTXvu6+871Pe6H+QX6Fftd9Ffzj&#x2F;Uv978fYBKQFrA7oC&#x2F;QKXBO4PEgQlBI0MqgGwwDBotRzegLdgmeG3wqRCkkOqQ85EGodagwtHEyOjl48urJd8PMw&#x2F;hhh8NBOCN8dfi9CMuIWRG&#x2F;RhIjIyIrIh9FOUTlR7VEq0fPiN4V&#x2F;SpmUszymDuxVrGS2OY45bikuOq41&#x2F;F+8aviO6aMmzJ3yoUEvQRuQn0iKTEusSqxf6r&#x2F;1LVTu5KckoqS2qdZTsuZdm663nTe9CMzlGcwZxxIJiTHJ+9Kfs8MZ1Yy+2cyZm6Y2cfyZa1jPU3xSVmT0sP2ZK9iP071TF2V2p3mmbY6rYfjzSnl9HJ9ueXc5+lB6ZvTX2eEZ+zI+MSL5+3JlMtMzmzgq&#x2F;Ez+KeyDLNysq4IbARFgo5Z7rPWzuoThgirRIhomqherAH&#x2F;YLZKrCQ&#x2F;SDqzvbIrst&#x2F;Mjpt9IEc1h5&#x2F;TmmuduyT3cV5A3vY5+BzWnOZ84&#x2F;yF+Z1z6XO3zEPmzZzXPN90fuH8rgWBC3YuVFiYsfC3AlrBqoKXi+IXNRYaFC4ofPhD4A+7iyhFwqIbiz0Wb&#x2F;4R&#x2F;5H748Ul45esX&#x2F;KxOKX4fAmtpLTk&#x2F;VLW0vM&#x2F;OfxU9tOnZanLLi53Xr5pBXEFf0X7Su+VO1eprspb9XD15NV1a6hrite8XDtj7bnSCaWb1ymsk6zrKAstq19vtn7F+vflnPK2ikkVezbob1iy4fXGlI1XN&#x2F;lsqt1ssLlk87ufuT&#x2F;f3BK4pa7SorJ0K3Fr9tZH2+K2tWx33V5dpVdVUvVhB39Hx86onaeqXaqrd+nvWr4b3S3Z3VOTVHP5F79f6mvtarfs0dpTshfslex9si95X&#x2F;v+kP3NB1wP1B40P7jhkPqh4jqkLreu7zDncEd9Qv2VhuCG5kaPxkO&#x2F;2v+6o8m4qeKI5pHlRxWOFh79dCzvWP9xwfHeE2knHjbPaL5zcsrJ66ciT108HXL67JmAMydb6C3HznqebTrnfq7hvOv5wxecL9S1OrUe+s3pt0MXnS&#x2F;WXXK5VH&#x2F;Z7XLjlYlXjl71vnrimt+1M9cZ1y+0hbVdaY9tv3kj6UbHzZSb3bd4t57fzr49cGcB&#x2F;Igvvqdyr&#x2F;S+&#x2F;v3K38f+vqfDueNIp19n64PoB3cesh4+&#x2F;UP0x&#x2F;uuwkfkR6WPjR5Xdzt2N&#x2F;UE9Fx+MvVJ11PB04Heoj9V&#x2F;9zwzOrZwb98&#x2F;mrtm9LX9Vz4&#x2F;NPfS1&#x2F;ovtjxcsLL5v6I&#x2F;vuvMl8NvC5+o&#x2F;tm51vXty3v4t89Hpj9nvS+7MPYD40fQz7e&#x2F;ZT56dN&#x2F;AC1d8BzqtvWAAAAAOGVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAACoAIABAAAAAEAAAAeoAMABAAAAAEAAAAYAAAAAGbJ4J8AAAElSURBVDgRnZQxTsNAEEX&#x2F;WFGUC6RDEEGFREkPihEVokoVDkDFAWgISsUZuAIFQjQUFE5Ni1NEhEjQxQegy2fsFPHKu&#x2F;Zutpr5&#x2F;u&#x2F;vFOsBwDNOVhkDjroTxlA0DqBMayxMcMJfGeEH1CyfI9jlWHYwAZcaN&#x2F;Rhyh5eKbWM0FXxu&#x2F;zBq56rqxsVVt+BN7kFsYY3YlDlgPnIJx40JTlgHGOAT96zUxfggnOmgxFSXrjxOjin9vHKF&#x2F;bsAU1wTl1iynMb7gPrG8ZqW&#x2F;gZh&#x2F;Jug1s2saR94UbeSr1R1o39hzscuVHAdfMHZriVhXFRpXHAcl1xWoS6sS12U1rDYooeXUFEyNTa+AtU4nIiayHFKR&#x2F;YDlpDexgrnIJ9c6sFdH0N0P2ZbLd6&#x2F;wF85hyuQTMxjwAAAABJRU5ErkJggg&#x3D;&#x3D;&quot;);\n&#125;\n\n.content &#123;\n  margin-top: 10rpx;\n  font-size: 28rpx;\n\n  &#x2F;* æ˜¾ç¤ºä¸¤è¡Œ *&#x2F;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  display: -moz-box;\n  -moz-line-clamp: 2;\n  -moz-box-orient: vertical;\n  word-wrap: break-word;\n  word-break: break-all;\n  white-space: normal;\n  overflow: hidden;\n&#125;\n\nçˆ¶ç»„ä»¶å¼•å…¥å­ç»„ä»¶\n åœ¨home-video/index.jsonä¸­å¼•å…¥å­ç»„ä»¶\n\n&#123;\n  &quot;enablePullDownRefresh&quot;: true,\n  &quot;backgroundTextStyle&quot;: &quot;dark&quot;,\n  &quot;usingComponents&quot;: &#123;\n    &quot;video-item-v1&quot;: &quot;&#x2F;components&#x2F;video-item-v1&#x2F;index&quot;\n  &#125;\n&#125;\n\n\n æ”¹å†™home-video/index.wxmlä½¿ç”¨ç»„ä»¶\n\n&lt;!--pages&#x2F;home-video&#x2F;index.wxml--&gt;\n&lt;view class&#x3D;&quot;video&quot;&gt;\n  &lt;view class&#x3D;&quot;item&quot; wx:for&#x3D;&quot;&#123;&#123;topMVs&#125;&#125;&quot; wx:key&#x3D;&quot;id&quot;&gt;\n     &lt;video-item-v1 item&#x3D;&quot;&#123;&#123;item&#125;&#125;&quot;\n      bindtap&#x3D;&quot;handleVideoItemClick&quot;\n      data-item&#x3D;&quot;&#123;&#123;item&#125;&#125;&quot;&gt;&lt;&#x2F;video-item-v1&gt;\n  &lt;&#x2F;view&gt;\n&lt;&#x2F;view&gt;\n\nçˆ¶ç»„ä»¶ä¼ å€¼å°±æ˜¯é€šè¿‡data-itemä¼ é€’çš„\n\n\\\n\n æœ€åæˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹home-video/index.wxss\n\n&#x2F;* pages&#x2F;home-video&#x2F;index.wxss *&#x2F;\n.video &#123;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n&#125;\n\n.item &#123;\n  width: 48%;\n&#125;\n\n\n\\\nå…¶ä»–ï¼š\né¡¹ç›®åœ°å€: https://gitee.com/LUNIONT/xhumusic\n\n","slug":"è¥¿ç“œéŸ³ä¹å°ç¨‹åºå¼€å‘ç¬¬ä¸€å¤©","date":"2022-02-10T07:50:55.000Z","categories_index":"","tags_index":"å®æˆ˜,å°ç¨‹åº","author_index":"LIYUNFU"}]